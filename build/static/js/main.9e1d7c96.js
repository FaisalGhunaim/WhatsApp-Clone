/*! For license information please see main.9e1d7c96.js.LICENSE.txt */
!function(){"use strict";var e={110:function(e,t,n){var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!u||!u[y])){var g=h(n,y);try{c(t,y,g)}catch(k){}}}}return t}},746:function(e,t){var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||w(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===y)},t.typeOf=w},309:function(e,t,n){e.exports=n(746)},463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function z(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function j(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case I:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){$(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Se=null;function Ie(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Ee(e){xe?Se?Se.push(e):Se=[e]:xe=e}function Te(){if(xe){var e=xe,t=Se;if(Se=xe=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Re=!1;function Ne(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ce(e,t,n)}finally{Re=!1,(null!==xe||null!==Se)&&(Ae(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,ze={onError:function(e){Me=!0,Fe=e}};function je(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(ze,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,St,It,Et=!1,Tt=[],Ct=null,At=null,Rt=null,Nt=new Map,Pt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void It(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function zt(){Et=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==At&&Ut(At)&&(At=null),null!==Rt&&Ut(Rt)&&(Rt=null),Nt.forEach(Vt),Pt.forEach(Vt)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Bt(e){function t(t){return jt(t,e)}if(0<Tt.length){jt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&jt(Ct,e),null!==At&&jt(At,e),null!==Rt&&jt(Rt,e),Nt.forEach(t),Pt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Rt=Mt(Rt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Nt.set(a,Mt(Nt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function In(){return Sn}var En=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(En),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),Rn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Nn),On=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Dn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function zn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ee(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){Ur(e,0)}function Yn(e){if(W(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var $n=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Wn)){var t=[];Gn(t,Wn,e,we(e)),Ne(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Wn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Sr={};function Ir(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return xr[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Er=Ir("animationend"),Tr=Ir("animationiteration"),Cr=Ir("animationstart"),Ar=Ir("transitionend"),Rr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Rr.set(e,t),s(t,[e])}for(var Or=0;Or<Nr.length;Or++){var Dr=Nr[Or];Pr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Pr(Er,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(je.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[jr]){e[jr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,zr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Gt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ne((function(){var r=a,i=we(n),o=[];e:{var u=Rr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=An;break;case Er:case Tr:case Cr:s=yn;break;case Ar:s=Rn;break;case"scroll":s=hn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Pe(p,h))&&l.push(Gr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Wr(d))p++;for(d=0,v=h;v;v=Wr(v))d++;for(;0<p-d;)l=Wr(l),p--;for(;0<d-p;)h=Wr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Xn;else if(Kn(u))if($n)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Gn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Jt="value"in($t=i)?$t.value:$t.textContent,Bn=!0)),0<(y=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=jn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&zn(e,t)?(e=en(),Zt=Jt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Si(e){return{current:e}}function Ii(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ei(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ci=Si(Ti),Ai=Si(!1),Ri=Ti;function Ni(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ii(Ai),Ii(Ci)}function Di(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ei(Ci,t),Ei(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ri=Ci.current,Ei(Ci,e),Ei(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ai),Ii(Ci),Ei(Ci,e)):Ii(Ai),Ei(Ai,n)}var Ui=null,Vi=!1,zi=!1;function ji(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!zi&&null!==Ui){zi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),We(Ze,Bi),i}finally{kt=t,zi=!1}}return null}var qi=[],Ki=0,Gi=null,Hi=0,Wi=[],Qi=0,Yi=null,Xi=1,$i="";function Ji(e,t){qi[Ki++]=Hi,qi[Ki++]=Gi,Gi=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=Xi,Wi[Qi++]=$i,Wi[Qi++]=Yi,Yi=e;var r=Xi;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,$i=a+e}else Xi=1<<a|n<<i|r,$i=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Hi=qi[--Ki],qi[Ki]=null;for(;e===Yi;)Yi=Wi[--Qi],Wi[Qi]=null,$i=Wi[--Qi],Wi[Qi]=null,Xi=Wi[--Qi],Wi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Si(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function _a(e){var t=ya.current;Ii(ya),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ia(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ea=null;function Ta(e){null===Ea?Ea=[e]:Ea.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ra=!1;function Na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&As)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Ra=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Ra=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function za(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ja={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ia(a):(i=Pi(t)?Ri:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ni(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ja,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ja.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Na(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ia(a):(a=Pi(t)?Ri:Ci.current,i.context=Ni(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(za(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ja.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case _:return(t=Vc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Ji(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Vc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Uc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Xa=Ya(!0),$a=Ya(!1),Ja={},Za=Si(Ja),eo=Si(Ja),to=Si(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ei(to,t),Ei(eo,e),Ei(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(Za),Ei(Za,t)}function io(){Ii(Za),Ii(eo),Ii(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ei(eo,e),Ei(Za,n))}function oo(e){eo.current===e&&(Ii(Za),Ii(eo))}var uo=Si(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Io(){var e=0!==bo;return bo=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ro(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function No(){}function Po(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Vo(9,Do.bind(null,n,r,i,t),void 0,null),null===Rs)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Aa(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zo(){return To().memoizedState}function jo(e,t,n,r){var i=Eo();vo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}vo.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function qo(e,t){return jo(8390656,8,e,t)}function Ko(e,t){return Bo(2048,8,e,t)}function Go(e,t){return Bo(4,2,e,t)}function Ho(e,t){return Bo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Wo.bind(null,t,e),n)}function Yo(){}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ia,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Ia,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Ia,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jo(4194308,4,e,t)},useInsertionEffect:function(e,t){return jo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Eo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Rs)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Rs.identifierPrefix;if(ia){var n=$i;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ia,useCallback:Xo,useContext:Ia,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:$o,useReducer:Ao,useRef:zo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(To(),mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:No,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ia,useCallback:Xo,useContext:Ia,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:$o,useReducer:Ro,useRef:zo,useState:function(){return Ro(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Ro(Co)[0],To().memoizedState]},useMutableSource:No,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gs||(Gs=!0,Hs=r),hu(0,t)},n}function vu(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?$a(t,null,n,r):Xa(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Io(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Oc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Su(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Gu(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function Su(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Iu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Ds,Os),Os|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Ds,Os),Os|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Ds,Os),Os|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(Ds,Os),Os|=r;return wu(e,t,i,n),t.child}function Eu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Pi(n)?Ri:Ci.current;return a=Ni(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Io(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Cu(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Ku(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ia(c):c=Ni(t,c=Pi(n)?Ri:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Ra=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ai.current||Ra?("function"===typeof l&&(za(t,n,l,r),s=t.memoizedState),(u=Ra||Ba(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ia(s):s=Ni(t,s=Pi(n)?Ri:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Ra=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ai.current||Ra?("function"===typeof d&&(za(t,n,d,r),p=t.memoizedState),(c=Ra||Ba(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Eu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Gu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ru(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Nu(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Pu,Ou,Du,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):Vu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,zu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xa(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return zu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,zu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Rs)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),rc(r,e,i,-1))}return mc(),zu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Qi++]=Xi,Wi[Qi++]=$i,Wi[Qi++]=Yi,Xi=e.id,$i=e.overflow,Yi=t),t=Vu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Dc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Dc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vu(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zu(e,t,n,r){return null!==r&&pa(r),Xa(t,e.child,null,n),(e=Vu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ju(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ju(e,n,t);else if(19===e.tag)ju(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wu(t),null;case 1:case 17:return Pi(t.type)&&Oi(),Wu(t),null;case 3:return r=t.stateNode,io(),Ii(Ai),Ii(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Ou(e,t),Wu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Du(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":X(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Pu(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wu(t),null;case 13:if(Ii(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wu(t),null);case 4:return io(),Ou(e,t),null===e&&Br(t.stateNode.containerInfo),Wu(t),null;case 10:return _a(t.type._context),Wu(t),null;case 19:if(Ii(uo),null===(o=t.memoizedState))return Wu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Hu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Hu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>qs&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Wu(t),null}else 2*$e()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=uo.current,Ei(uo,r?1&n|2:1&n),t):(Wu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Os)&&(Wu(t),6&t.subtreeFlags&&(t.flags|=8192)):Wu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yu(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ii(Ai),Ii(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ii(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Pu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ou=function(){},Du=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xu=!1,$u=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:$u||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!$u&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!$u&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?($u=(r=$u)||null!==n.memoizedState,ds(e,t,n),$u=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){Ic(e,e.return,m)}try{rs(5,e,e.return)}catch(m){Ic(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ic(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&$(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ic(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ic(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Ic(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=$e())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?($u=(l=$u)||f,ms(t,e),$u=l):ms(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ic(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){_s(h);continue}}null!==p?(p.return=d,Zu=p):_s(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Ic(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ic(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ms(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Xu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||$u;u=Xu;var c=$u;if(Xu=o,($u=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Zu=s):xs(i);for(;null!==a;)Zu=a,bs(a,t,n),a=a.sibling;Zu=i,Xu=u,$u=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$u||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$u)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}$u||512&t.flags&&as(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{as(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Ss,Is=Math.ceil,Es=b.ReactCurrentDispatcher,Ts=b.ReactCurrentOwner,Cs=b.ReactCurrentBatchConfig,As=0,Rs=null,Ns=null,Ps=0,Os=0,Ds=Si(0),Ls=0,Ms=null,Fs=0,Us=0,Vs=0,zs=null,js=null,Bs=0,qs=1/0,Ks=null,Gs=!1,Hs=null,Ws=null,Qs=!1,Ys=null,Xs=0,$s=0,Js=null,Zs=-1,ec=0;function tc(){return 0!==(6&As)?$e():-1!==Zs?Zs:Zs=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&As)&&0!==Ps?Ps&-Ps:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,n,r){if(50<$s)throw $s=0,Js=null,Error(a(185));yt(e,n,r),0!==(2&As)&&e===Rs||(e===Rs&&(0===(2&As)&&(Us|=n),4===Ls&&sc(e,Ps)),ic(e,r),1===n&&0===As&&0===(1&t.mode)&&(qs=$e()+500,Vi&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Rs?Ps:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,ji(e)}(cc.bind(null,e)):ji(cc.bind(null,e)),oi((function(){0===(6&As)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&As))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Rs?Ps:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=As;As|=2;var o=vc();for(Rs===e&&Ps===t||(Ks=null,qs=$e()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}wa(),Es.current=o,As=i,null!==Ns?t=0:(Rs=null,Ps=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,$e()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,js,Ks);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Bs+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,js,Ks),t);break}_c(e,js,Ks);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,js,Ks),r);break}_c(e,js,Ks);break;default:throw Error(a(329))}}}return ic(e,$e()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=zs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=js,js=n,null!==t&&uc(t)),e}function uc(e){null===js?js=e:js.push.apply(js,e)}function sc(e,t){for(t&=~Vs,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&As))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return ic(e,$e()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,js,Ks),ic(e,$e()),null}function lc(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(qs=$e()+500,Vi&&Bi())}}function fc(e){null!==Ys&&0===Ys.tag&&0===(6&As)&&xc();var t=As;As|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(As=t))&&Bi()}}function hc(){Os=Ds.current,Ii(Ds)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ns)for(n=Ns.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Ii(Ai),Ii(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ii(uo);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Rs=e,Ns=e=Dc(e.current,null),Ps=Os=t,Ls=0,Ms=null,Vs=Us=Fs=0,js=zs=null,null!==Ea){for(t=0;t<Ea.length;t++)if(null!==(r=(n=Ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ea=null}return e}function pc(e,t){for(;;){var n=Ns;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Ts.current=null,null===n||null===n.return){Ls=1,Ms=t,Ns=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ps,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===zs?zs=[o]:zs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ws||!Ws.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Ns===n&&null!==n&&(Ns=n=n.return);continue}break}}function vc(){var e=Es.current;return Es.current=ou,null===e?ou:e}function mc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===Rs||0===(268435455&Fs)&&0===(268435455&Us)||sc(Rs,Ps)}function yc(e,t){var n=As;As|=2;var r=vc();for(Rs===e&&Ps===t||(Ks=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),As=n,Es.current=r,null!==Ns)throw Error(a(261));return Rs=null,Ps=0,Ls}function gc(){for(;null!==Ns;)bc(Ns)}function kc(){for(;null!==Ns&&!Ye();)bc(Ns)}function bc(e){var t=Ss(e.alternate,e,Os);e.memoizedProps=e.pendingProps,null===t?wc(e):Ns=t,Ts.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Os)))return void(Ns=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(Ns=n);if(null===e)return Ls=6,void(Ns=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ns=t);Ns=t=e}while(null!==t);0===Ls&&(Ls=5)}function _c(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Ys);if(0!==(6&As))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Rs&&(Ns=Rs=null,Ps=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Rc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=As;As|=4,Ts.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ic(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ys(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),Xe(),As=s,kt=u,Cs.transition=o}else e.current=n;if(Qs&&(Qs=!1,Ys=e,Xs=i),o=e.pendingLanes,0===o&&(Ws=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,e=Hs,Hs=null,e;0!==(1&Xs)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Js?$s++:($s=0,Js=e):$s=0,Bi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function xc(){if(null!==Ys){var e=bt(Xs),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,Xs=0,0!==(6&As))throw Error(a(331));var i=As;for(As|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var b=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Zu=b;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(_){Ic(s,s.return,_)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(As=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Sc(e,t,n){e=Da(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Ic(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){t=Da(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Rs===e&&(Ps&n)===n&&(4===Ls||3===Ls&&(130023424&Ps)===Ps&&500>$e()-Bs?dc(e,0):Vs|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Aa(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Rc(e,t){return We(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Nc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Oc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Mc(n.children,i,o,t);case S:u=8,i|=8;break;case I:return(e=Pc(12,n,t,2|i)).elementType=I,e.lanes=o,e;case A:return(e=Pc(13,n,t,i)).elementType=A,e.lanes=o,e;case R:return(e=Pc(19,n,t,i)).elementType=R,e.lanes=o,e;case O:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:u=10;break e;case T:u=9;break e;case C:u=11;break e;case N:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,o,u,s){return e=new zc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Na(a),e}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=jc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=Oa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Kc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Ss=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Ru(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uu(e,t,n):(Ei(uo,1&uo.current),null!==(e=Gu(e,t,n))?e.sibling:null);Ei(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Iu(e,t,n)}return Gu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ku(e,t),e=t.pendingProps;var i=Ni(t,Ci.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Io();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Na(t),i.updater=ja,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ku(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===N)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Ru(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Nu(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Nu(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Gu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Eu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Uu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ei(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ai.current){t=Gu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ia(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xu(e,t,r,i=ma(r.type,i),n);case 15:return Su(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Ku(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Sa(t,n),qa(t,r,i),Ga(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Iu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=jc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),fc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Kc(null,e,null,null)})),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,$e()),0===(6&As)&&(qs=$e()+500,Bi()))}break;case 13:fc((function(){var t=Aa(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Wc(e,1)}},_t=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)rc(t,e,134217728,tc());Wc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Aa(e,t);if(null!==n)rc(n,e,t,tc());Wc(e,t)}},St=function(){return kt},It=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));W(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ae=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ee,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=A(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=A(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function R(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:x};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,O(_);else{var t=r(l);null!==t&&D(w,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,g(E),E=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&D(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,S=!1,I=null,E=-1,T=5,C=-1;function A(){return!(t.unstable_now()-C<T)}function R(){if(null!==I){var e=t.unstable_now();C=e;var n=!0;try{n=I(!0,e)}finally{n?x():(S=!1,I=null)}}else S=!1}if("function"===typeof k)x=function(){k(R)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,P=N.port2;N.port1.onmessage=R,x=function(){P.postMessage(null)}}else x=function(){y(R,0)};function O(e){I=e,S||(S=!0,x())}function D(e,n){E=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(E),E=-1):m=!0,D(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,O(_))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}!function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return na},SDK_VERSION:function(){return yo},_DEFAULT_ENTRY_NAME:function(){return ro},_addComponent:function(){return uo},_addOrOverwriteComponent:function(){return so},_apps:function(){return ao},_clearComponents:function(){return ho},_components:function(){return oo},_getProvider:function(){return lo},_registerComponent:function(){return co},_removeServiceInstance:function(){return fo},deleteApp:function(){return wo},getApp:function(){return ko},getApps:function(){return bo},initializeApp:function(){return go},onLog:function(){return So},registerVersion:function(){return xo},setLogLevel:function(){return Io}});var t=n(791),r=n.t(t,2),i=n(250);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||u(e,t)||s()}function l(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function h(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=h(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var d=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=h(e))&&(r&&(r+=" "),r+=t);return r};function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r={};return Object.keys(e).forEach((function(i){r[i]=e[i].reduce((function(e,r){if(r){var i=t(r);""!==i&&e.push(i),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}function v(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function m(e){return function(e){if(Array.isArray(e))return o(e)}(e)||v(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var g=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,k=y((function(e){return g.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var b=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),w=Math.abs,_=String.fromCharCode,x=Object.assign;function S(e){return e.trim()}function I(e,t,n){return e.replace(t,n)}function E(e,t){return e.indexOf(t)}function T(e,t){return 0|e.charCodeAt(t)}function C(e,t,n){return e.slice(t,n)}function A(e){return e.length}function R(e){return e.length}function N(e,t){return t.push(e),e}var P=1,O=1,D=0,L=0,M=0,F="";function U(e,t,n,r,i,a,o){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:P,column:O,length:o,return:""}}function V(e,t){return x(U("",null,null,"",null,null,0),e,{length:-e.length},t)}function z(){return M=L>0?T(F,--L):0,O--,10===M&&(O=1,P--),M}function j(){return M=L<D?T(F,L++):0,O++,10===M&&(O=1,P++),M}function B(){return T(F,L)}function q(){return L}function K(e,t){return C(F,e,t)}function G(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function H(e){return P=O=1,D=A(F=e),L=0,[]}function W(e){return F="",e}function Q(e){return S(K(L-1,$(91===e?e+2:40===e?e+1:e)))}function Y(e){for(;(M=B())&&M<33;)j();return G(e)>2||G(M)>3?"":" "}function X(e,t){for(;--t&&j()&&!(M<48||M>102||M>57&&M<65||M>70&&M<97););return K(e,q()+(t<6&&32==B()&&32==j()))}function $(e){for(;j();)switch(M){case e:return L;case 34:case 39:34!==e&&39!==e&&$(M);break;case 40:41===e&&$(e);break;case 92:j()}return L}function J(e,t){for(;j()&&e+M!==57&&(e+M!==84||47!==B()););return"/*"+K(t,L-1)+"*"+_(47===e?e:j())}function Z(e){for(;!G(B());)j();return K(e,L)}var ee="-ms-",te="-moz-",ne="-webkit-",re="comm",ie="rule",ae="decl",oe="@keyframes";function ue(e,t){for(var n="",r=R(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function se(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case ae:return e.return=e.return||e.value;case re:return"";case oe:return e.return=e.value+"{"+ue(e.children,r)+"}";case ie:e.value=e.props.join(",")}return A(n=ue(e.children,r))?e.return=e.value+"{"+n+"}":""}function ce(e){return W(le("",null,null,null,[""],e=H(e),0,[0],e))}function le(e,t,n,r,i,a,o,u,s){for(var c=0,l=0,f=o,h=0,d=0,p=0,v=1,m=1,y=1,g=0,k="",b=i,w=a,x=r,S=k;m;)switch(p=g,g=j()){case 40:if(108!=p&&58==T(S,f-1)){-1!=E(S+=I(Q(g),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:S+=Q(g);break;case 9:case 10:case 13:case 32:S+=Y(p);break;case 92:S+=X(q()-1,7);continue;case 47:switch(B()){case 42:case 47:N(he(J(j(),q()),t,n),s);break;default:S+="/"}break;case 123*v:u[c++]=A(S)*y;case 125*v:case 59:case 0:switch(g){case 0:case 125:m=0;case 59+l:-1==y&&(S=I(S,/\f/g,"")),d>0&&A(S)-f&&N(d>32?de(S+";",r,n,f-1):de(I(S," ","")+";",r,n,f-2),s);break;case 59:S+=";";default:if(N(x=fe(S,t,n,c,l,i,u,k,b=[],w=[],f),a),123===g)if(0===l)le(S,t,x,x,b,a,f,u,w);else switch(99===h&&110===T(S,3)?100:h){case 100:case 108:case 109:case 115:le(e,x,x,r&&N(fe(e,x,x,0,0,i,u,k,i,b=[],f),w),i,w,f,u,r?b:w);break;default:le(S,x,x,x,[""],w,0,u,w)}}c=l=d=0,v=y=1,k=S="",f=o;break;case 58:f=1+A(S),d=p;default:if(v<1)if(123==g)--v;else if(125==g&&0==v++&&125==z())continue;switch(S+=_(g),g*v){case 38:y=l>0?1:(S+="\f",-1);break;case 44:u[c++]=(A(S)-1)*y,y=1;break;case 64:45===B()&&(S+=Q(j())),h=B(),l=f=A(k=S+=Z(q())),g++;break;case 45:45===p&&2==A(S)&&(v=0)}}return a}function fe(e,t,n,r,i,a,o,u,s,c,l){for(var f=i-1,h=0===i?a:[""],d=R(h),p=0,v=0,m=0;p<r;++p)for(var y=0,g=C(e,f+1,f=w(v=o[p])),k=e;y<d;++y)(k=S(v>0?h[y]+" "+g:I(g,/&\f/g,h[y])))&&(s[m++]=k);return U(e,t,n,0===i?ie:u,s,c,l)}function he(e,t,n){return U(e,t,n,re,_(M),C(e,2,-2),0)}function de(e,t,n,r){return U(e,t,n,ae,C(e,0,r),C(e,r+1,-1),r)}var pe=function(e,t,n){for(var r=0,i=0;r=i,i=B(),38===r&&12===i&&(t[n]=1),!G(i);)j();return K(e,L)},ve=function(e,t){return W(function(e,t){var n=-1,r=44;do{switch(G(r)){case 0:38===r&&12===B()&&(t[n]=1),e[n]+=pe(L-1,t,n);break;case 2:e[n]+=Q(r);break;case 4:if(44===r){e[++n]=58===B()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=_(r)}}while(r=j());return e}(H(e),t))},me=new WeakMap,ye=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||me.get(n))&&!r){me.set(e,!0);for(var i=[],a=ve(t,i),o=n.props,u=0,s=0;u<a.length;u++)for(var c=0;c<o.length;c++,s++)e.props[s]=i[u]?a[u].replace(/&\f/g,o[c]):o[c]+" "+a[u]}}},ge=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ke(e,t){switch(function(e,t){return 45^T(e,0)?(((t<<2^T(e,0))<<2^T(e,1))<<2^T(e,2))<<2^T(e,3):0}(e,t)){case 5103:return ne+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ne+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ne+e+te+e+ee+e+e;case 6828:case 4268:return ne+e+ee+e+e;case 6165:return ne+e+ee+"flex-"+e+e;case 5187:return ne+e+I(e,/(\w+).+(:[^]+)/,ne+"box-$1$2"+ee+"flex-$1$2")+e;case 5443:return ne+e+ee+"flex-item-"+I(e,/flex-|-self/,"")+e;case 4675:return ne+e+ee+"flex-line-pack"+I(e,/align-content|flex-|-self/,"")+e;case 5548:return ne+e+ee+I(e,"shrink","negative")+e;case 5292:return ne+e+ee+I(e,"basis","preferred-size")+e;case 6060:return ne+"box-"+I(e,"-grow","")+ne+e+ee+I(e,"grow","positive")+e;case 4554:return ne+I(e,/([^-])(transform)/g,"$1"+ne+"$2")+e;case 6187:return I(I(I(e,/(zoom-|grab)/,ne+"$1"),/(image-set)/,ne+"$1"),e,"")+e;case 5495:case 3959:return I(e,/(image-set\([^]*)/,ne+"$1$`$1");case 4968:return I(I(e,/(.+:)(flex-)?(.*)/,ne+"box-pack:$3"+ee+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ne+e+e;case 4095:case 3583:case 4068:case 2532:return I(e,/(.+)-inline(.+)/,ne+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(A(e)-1-t>6)switch(T(e,t+1)){case 109:if(45!==T(e,t+4))break;case 102:return I(e,/(.+:)(.+)-([^]+)/,"$1"+ne+"$2-$3$1"+te+(108==T(e,t+3)?"$3":"$2-$3"))+e;case 115:return~E(e,"stretch")?ke(I(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==T(e,t+1))break;case 6444:switch(T(e,A(e)-3-(~E(e,"!important")&&10))){case 107:return I(e,":",":"+ne)+e;case 101:return I(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ne+(45===T(e,14)?"inline-":"")+"box$3$1"+ne+"$2$3$1"+ee+"$2box$3")+e}break;case 5936:switch(T(e,t+11)){case 114:return ne+e+ee+I(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ne+e+ee+I(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ne+e+ee+I(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ne+e+ee+e+e}return e}var be=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case ae:e.return=ke(e.value,e.length);break;case oe:return ue([V(e,{value:I(e.value,"@","@"+ne)})],r);case ie:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ue([V(e,{props:[I(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return ue([V(e,{props:[I(t,/:(plac\w+)/,":"+ne+"input-$1")]}),V(e,{props:[I(t,/:(plac\w+)/,":-moz-$1")]}),V(e,{props:[I(t,/:(plac\w+)/,ee+"input-$1")]})],r)}return""}))}}],we=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||be;var i,a,o={},u=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;u.push(e)}));var s,c,l=[se,(c=function(e){s.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],f=function(e){var t=R(e);return function(n,r,i,a){for(var o="",u=0;u<t;u++)o+=e[u](n,r,i,a)||"";return o}}([ye,ge].concat(r,l));a=function(e,t,n,r){s=n,ue(ce(e?e+"{"+t.styles+"}":t.styles),f),r&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new b({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:a};return h.sheet.hydrate(u),h};var _e={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},xe=/[A-Z]|^ms/g,Se=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Ie=function(e){return 45===e.charCodeAt(1)},Ee=function(e){return null!=e&&"boolean"!==typeof e},Te=y((function(e){return Ie(e)?e:e.replace(xe,"-$&").toLowerCase()})),Ce=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(Se,(function(e,t,n){return Re={name:t,styles:n,next:Re},t}))}return 1===_e[e]||Ie(e)||"number"!==typeof t||0===t?t:t+"px"};function Ae(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Re={name:n.name,styles:n.styles,next:Re},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)Re={name:r.name,styles:r.styles,next:Re},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Ae(e,t,n[i])+";";else for(var a in n){var o=n[a];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=a+"{"+t[o]+"}":Ee(o)&&(r+=Te(a)+":"+Ce(a,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var u=Ae(e,t,o);switch(a){case"animation":case"animationName":r+=Te(a)+":"+u+";";break;default:r+=a+"{"+u+"}"}}else for(var s=0;s<o.length;s++)Ee(o[s])&&(r+=Te(a)+":"+Ce(a,o[s])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=Re,a=n(e);return Re=i,Ae(e,t,a)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var Re,Ne=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var Pe=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";Re=void 0;var a=e[0];null==a||void 0===a.raw?(r=!1,i+=Ae(n,t,a)):i+=a[0];for(var o=1;o<e.length;o++)i+=Ae(n,t,e[o]),r&&(i+=a[o]);Ne.lastIndex=0;for(var u,s="";null!==(u=Ne.exec(i));)s+="-"+u[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+s;return{name:c,styles:i,next:Re}},Oe=!!r.useInsertionEffect&&r.useInsertionEffect,De=Oe||function(e){return e()},Le=(Oe||t.useLayoutEffect,t.createContext("undefined"!==typeof HTMLElement?we({key:"css"}):null));Le.Provider;var Me=function(e){return(0,t.forwardRef)((function(n,r){var i=(0,t.useContext)(Le);return e(n,i,r)}))};var Fe=t.createContext({});var Ue=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},Ve=k,ze=function(e){return"theme"!==e},je=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?Ve:ze},Be=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},qe=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return Ue(t,n,r),De((function(){return function(e,t,n){Ue(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,n,r)})),null},Ke=function e(n,r){var i,a,o=n.__emotion_real===n,u=o&&n.__emotion_base||n;void 0!==r&&(i=r.label,a=r.target);var s=Be(n,r,o),c=s||je(u),l=!c("as");return function(){var h=arguments,d=o&&void 0!==n.__emotion_styles?n.__emotion_styles.slice(0):[];if(void 0!==i&&d.push("label:"+i+";"),null==h[0]||void 0===h[0].raw)d.push.apply(d,h);else{0,d.push(h[0][0]);for(var p=h.length,v=1;v<p;v++)d.push(h[v],h[0][v])}var m=Me((function(e,n,r){var i=l&&e.as||u,o="",f=[],h=e;if(null==e.theme){for(var p in h={},e)h[p]=e[p];h.theme=t.useContext(Fe)}"string"===typeof e.className?o=function(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}(n.registered,f,e.className):null!=e.className&&(o=e.className+" ");var v=Pe(d.concat(f),n.registered,h);o+=n.key+"-"+v.name,void 0!==a&&(o+=" "+a);var m=l&&void 0===s?je(i):c,y={};for(var g in e)l&&"as"===g||m(g)&&(y[g]=e[g]);return y.className=o,y.ref=r,t.createElement(t.Fragment,null,t.createElement(qe,{cache:n,serialized:v,isStringTag:"string"===typeof i}),t.createElement(i,y))}));return m.displayName=void 0!==i?i:"Styled("+("string"===typeof u?u:u.displayName||u.name||"Component")+")",m.defaultProps=n.defaultProps,m.__emotion_real=m,m.__emotion_base=u,m.__emotion_styles=d,m.__emotion_forwardProp=s,Object.defineProperty(m,"toString",{value:function(){return"."+a}}),m.withComponent=function(t,n){return e(t,f({},r,n,{shouldForwardProp:Be(m,n,!0)})).apply(void 0,d)},m}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){Ke[e]=Ke(e)}));function Ge(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function He(e){if(!Ge(e))return e;var t={};return Object.keys(e).forEach((function(n){t[n]=He(e[n])})),t}function We(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?f({},e):e;return Ge(e)&&Ge(t)&&Object.keys(t).forEach((function(i){"__proto__"!==i&&(Ge(t[i])&&i in e&&Ge(e[i])?r[i]=We(e[i],t[i],n):n.clone?r[i]=Ge(t[i])?He(t[i]):t[i]:r[i]=t[i])})),r}function Qe(e){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qe(e)}function Ye(e){var t=function(e,t){if("object"!==Qe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Qe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Qe(t)?t:String(t)}function Xe(e,t,n){return(t=Ye(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $e=["values","unit","step"],Je=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return f({},e,Xe({},t.key,t.val))}),{})};var Ze={borderRadius:4},et={xs:0,sm:600,md:900,lg:1200,xl:1536},tt={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(et[e],"px)")}};function nt(e,t,n){var r=e.theme||{};if(Array.isArray(t)){var i=r.breakpoints||tt;return t.reduce((function(e,r,a){return e[i.up(i.keys[a])]=n(t[a]),e}),{})}if("object"===typeof t){var a=r.breakpoints||tt;return Object.keys(t).reduce((function(e,r){if(-1!==Object.keys(a.values||et).indexOf(r)){e[a.up(r)]=n(t[r],r)}else{var i=r;e[i]=t[i]}return e}),{})}return n(t)}function rt(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{}))||{}}function it(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function at(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function ot(e){if("string"!==typeof e)throw new Error(at(7));return e.charAt(0).toUpperCase()+e.slice(1)}function ut(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){var r="vars.".concat(t).split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e);if(null!=r)return r}return t.split(".").reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e)}function st(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:ut(e,n)||i,t&&(r=t(r,i,e)),r}var ct=function(e){var t=e.prop,n=e.cssProperty,r=void 0===n?e.prop:n,i=e.themeKey,a=e.transform,o=function(e){if(null==e[t])return null;var n=e[t],o=ut(e.theme,i)||{};return nt(e,n,(function(e){var n=st(o,a,e);return e===n&&"string"===typeof e&&(n=st(o,a,"".concat(t).concat("default"===e?"":ot(e)),e)),!1===r?n:Xe({},r,n)}))};return o.propTypes={},o.filterProps=[t],o};var lt=function(e,t){return t?We(e,t,{clone:!1}):e};var ft={m:"margin",p:"padding"},ht={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},dt={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},pt=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!dt[e])return[e];e=dt[e]}var t=c(e.split(""),2),n=t[0],r=t[1],i=ft[n],a=ht[r]||"";return Array.isArray(a)?a.map((function(e){return i+e})):[i+a]})),vt=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],mt=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],yt=[].concat(vt,mt);function gt(e,t,n,r){var i,a=null!=(i=ut(e,t,!1))?i:n;return"number"===typeof a?function(e){return"string"===typeof e?e:a*e}:Array.isArray(a)?function(e){return"string"===typeof e?e:a[e]}:"function"===typeof a?a:function(){}}function kt(e){return gt(e,"spacing",8)}function bt(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function wt(e,t,n,r){if(-1===t.indexOf(n))return null;var i=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=bt(t,n),e}),{})}}(pt(n),r);return nt(e,e[n],i)}function _t(e,t){var n=kt(e.theme);return Object.keys(e).map((function(r){return wt(e,t,r,n)})).reduce(lt,{})}function xt(e){return _t(e,vt)}function St(e){return _t(e,mt)}function It(e){return _t(e,yt)}xt.propTypes={},xt.filterProps=vt,St.propTypes={},St.filterProps=mt,It.propTypes={},It.filterProps=yt;var Et=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),i=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?lt(t,r[n](e)):t}),{})};return i.propTypes={},i.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),i};function Tt(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var Ct=ct({prop:"border",themeKey:"borders",transform:Tt}),At=ct({prop:"borderTop",themeKey:"borders",transform:Tt}),Rt=ct({prop:"borderRight",themeKey:"borders",transform:Tt}),Nt=ct({prop:"borderBottom",themeKey:"borders",transform:Tt}),Pt=ct({prop:"borderLeft",themeKey:"borders",transform:Tt}),Ot=ct({prop:"borderColor",themeKey:"palette"}),Dt=ct({prop:"borderTopColor",themeKey:"palette"}),Lt=ct({prop:"borderRightColor",themeKey:"palette"}),Mt=ct({prop:"borderBottomColor",themeKey:"palette"}),Ft=ct({prop:"borderLeftColor",themeKey:"palette"}),Ut=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=gt(e.theme,"shape.borderRadius",4);return nt(e,e.borderRadius,(function(e){return{borderRadius:bt(t,e)}}))}return null};Ut.propTypes={},Ut.filterProps=["borderRadius"];Et(Ct,At,Rt,Nt,Pt,Ot,Dt,Lt,Mt,Ft,Ut);var Vt=function(e){if(void 0!==e.gap&&null!==e.gap){var t=gt(e.theme,"spacing",8);return nt(e,e.gap,(function(e){return{gap:bt(t,e)}}))}return null};Vt.propTypes={},Vt.filterProps=["gap"];var zt=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=gt(e.theme,"spacing",8);return nt(e,e.columnGap,(function(e){return{columnGap:bt(t,e)}}))}return null};zt.propTypes={},zt.filterProps=["columnGap"];var jt=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=gt(e.theme,"spacing",8);return nt(e,e.rowGap,(function(e){return{rowGap:bt(t,e)}}))}return null};jt.propTypes={},jt.filterProps=["rowGap"];Et(Vt,zt,jt,ct({prop:"gridColumn"}),ct({prop:"gridRow"}),ct({prop:"gridAutoFlow"}),ct({prop:"gridAutoColumns"}),ct({prop:"gridAutoRows"}),ct({prop:"gridTemplateColumns"}),ct({prop:"gridTemplateRows"}),ct({prop:"gridTemplateAreas"}),ct({prop:"gridArea"}));function Bt(e,t){return"grey"===t?t:e}Et(ct({prop:"color",themeKey:"palette",transform:Bt}),ct({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Bt}),ct({prop:"backgroundColor",themeKey:"palette",transform:Bt}));function qt(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var Kt=ct({prop:"width",transform:qt}),Gt=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return nt(e,e.maxWidth,(function(t){var n,r,i=(null==(n=e.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[t])||et[t];return i?"px"!==(null==(r=e.theme)||null==(r=r.breakpoints)?void 0:r.unit)?{maxWidth:"".concat(i).concat(e.theme.breakpoints.unit)}:{maxWidth:i}:{maxWidth:qt(t)}}))}return null};Gt.filterProps=["maxWidth"];var Ht=ct({prop:"minWidth",transform:qt}),Wt=ct({prop:"height",transform:qt}),Qt=ct({prop:"maxHeight",transform:qt}),Yt=ct({prop:"minHeight",transform:qt}),Xt=(ct({prop:"size",cssProperty:"width",transform:qt}),ct({prop:"size",cssProperty:"height",transform:qt}),Et(Kt,Gt,Ht,Wt,Qt,Yt,ct({prop:"boxSizing"})),{border:{themeKey:"borders",transform:Tt},borderTop:{themeKey:"borders",transform:Tt},borderRight:{themeKey:"borders",transform:Tt},borderBottom:{themeKey:"borders",transform:Tt},borderLeft:{themeKey:"borders",transform:Tt},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Ut},color:{themeKey:"palette",transform:Bt},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Bt},backgroundColor:{themeKey:"palette",transform:Bt},p:{style:St},pt:{style:St},pr:{style:St},pb:{style:St},pl:{style:St},px:{style:St},py:{style:St},padding:{style:St},paddingTop:{style:St},paddingRight:{style:St},paddingBottom:{style:St},paddingLeft:{style:St},paddingX:{style:St},paddingY:{style:St},paddingInline:{style:St},paddingInlineStart:{style:St},paddingInlineEnd:{style:St},paddingBlock:{style:St},paddingBlockStart:{style:St},paddingBlockEnd:{style:St},m:{style:xt},mt:{style:xt},mr:{style:xt},mb:{style:xt},ml:{style:xt},mx:{style:xt},my:{style:xt},margin:{style:xt},marginTop:{style:xt},marginRight:{style:xt},marginBottom:{style:xt},marginLeft:{style:xt},marginX:{style:xt},marginY:{style:xt},marginInline:{style:xt},marginInlineStart:{style:xt},marginInlineEnd:{style:xt},marginBlock:{style:xt},marginBlockStart:{style:xt},marginBlockEnd:{style:xt},displayPrint:{cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Vt},rowGap:{style:jt},columnGap:{style:zt},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:qt},maxWidth:{style:Gt},minWidth:{transform:qt},height:{transform:qt},maxHeight:{transform:qt},minHeight:{transform:qt},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});var $t=function(){function e(e,t,n,r){var i,a=(Xe(i={},e,t),Xe(i,"theme",n),i),o=r[e];if(!o)return Xe({},e,t);var u=o.cssProperty,s=void 0===u?e:u,c=o.themeKey,l=o.transform,f=o.style;if(null==t)return null;if("typography"===c&&"inherit"===t)return Xe({},e,t);var h=ut(n,c)||{};if(f)return f(a);return nt(a,t,(function(t){var n=st(h,l,t);return t===n&&"string"===typeof t&&(n=st(h,l,"".concat(e).concat("default"===t?"":ot(t)),t)),!1===s?n:Xe({},s,n)}))}return function t(n){var r,i=n||{},a=i.sx,o=i.theme,u=void 0===o?{}:o;if(!a)return null;var s=null!=(r=u.unstable_sxConfig)?r:Xt;function c(n){var r=n;if("function"===typeof n)r=n(u);else if("object"!==typeof n)return n;if(!r)return null;var i=rt(u.breakpoints),a=Object.keys(i),o=i;return Object.keys(r).forEach((function(n){var i,a,c=(i=r[n],a=u,"function"===typeof i?i(a):i);if(null!==c&&void 0!==c)if("object"===typeof c)if(s[n])o=lt(o,e(n,c,u,s));else{var l=nt({theme:u},c,(function(e){return Xe({},n,e)}));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),i=new Set(r);return t.every((function(e){return i.size===Object.keys(e).length}))}(l,c)?o=lt(o,l):o[n]=t({sx:c,theme:u})}else o=lt(o,e(n,c,u,s))})),it(a,o)}return Array.isArray(a)?a.map(c):c(a)}}();$t.filterProps=["sx"];var Jt=$t,Zt=["breakpoints","palette","spacing","shape"];var en=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.palette,i=void 0===r?{}:r,a=e.spacing,o=e.shape,u=void 0===o?{}:o,s=l(e,Zt),c=function(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,r=e.unit,i=void 0===r?"px":r,a=e.step,o=void 0===a?5:a,u=l(e,$e),s=Je(n),c=Object.keys(s);function h(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(i,")")}function d(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-o/100).concat(i,")")}function p(e,t){var r=c.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[c[r]]?n[c[r]]:t)-o/100).concat(i,")")}return f({keys:c,values:s,up:h,down:d,between:p,only:function(e){return c.indexOf(e)+1<c.length?p(e,c[c.indexOf(e)+1]):h(e)},not:function(e){var t=c.indexOf(e);return 0===t?h(c[1]):t===c.length-1?d(c[t]):p(e,c[c.indexOf(e)+1]).replace("@media","@media not all and")},unit:i},u)}(n),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=kt({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(a),d=We({breakpoints:c,direction:"ltr",components:{},palette:f({mode:"light"},i),spacing:h,shape:f({},Ze,u)},s),p=arguments.length,v=new Array(p>1?p-1:0),m=1;m<p;m++)v[m-1]=arguments[m];return(d=v.reduce((function(e,t){return We(e,t)}),d)).unstable_sxConfig=f({},Xt,null==s?void 0:s.unstable_sxConfig),d.unstable_sx=function(e){return Jt({sx:e,theme:this})},d},tn=["variant"];function nn(e){return 0===e.length}function rn(e){var t=e.variant,n=l(e,tn),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?nn(r)?e[t]:ot(e[t]):"".concat(nn(r)?t:ot(t)).concat(ot(e[t].toString()))})),r}var an=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function on(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var un=en();function sn(e){var t,n=e.defaultTheme,r=e.theme,i=e.themeId;return t=r,0===Object.keys(t).length?n:r[i]||r}function cn(e,t){var n;return f({toolbar:(n={minHeight:56},Xe(n,e.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),Xe(n,e.up("sm"),{minHeight:64}),n)},t)}function ln(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function fn(e){if(e.type)return e;if("#"===e.charAt(0))return fn(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(at(9,e));var r,i=e.substring(t+1,e.length-1);if("color"===n){if(r=(i=i.split(" ")).shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error(at(10,r))}else i=i.split(",");return{type:n,values:i=i.map((function(e){return parseFloat(e)})),colorSpace:r}}function hn(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function dn(e){var t="hsl"===(e=fn(e)).type||"hsla"===e.type?fn(function(e){var t=(e=fn(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,a=r*Math.min(i,1-i),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-a*Math.max(Math.min(t-3,9-t,1),-1)},u="rgb",s=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(u+="a",s.push(t[3])),hn({type:u,values:s})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function pn(e,t){return e=fn(e),t=ln(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,hn(e)}function vn(e,t){if(e=fn(e),t=ln(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return hn(e)}function mn(e,t){if(e=fn(e),t=ln(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return hn(e)}var yn={black:"#000",white:"#fff"},gn={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},kn={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},bn={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},wn={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},_n={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},xn={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Sn={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},In=["mode","contrastThreshold","tonalOffset"],En={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:yn.white,default:yn.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Tn={text:{primary:yn.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:yn.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Cn(e,t,n,r){var i=r.light||r,a=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=mn(e.main,i):"dark"===t&&(e.dark=vn(e.main,a)))}function An(e){var t=e.mode,n=void 0===t?"light":t,r=e.contrastThreshold,i=void 0===r?3:r,a=e.tonalOffset,o=void 0===a?.2:a,u=l(e,In),s=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:_n[200],light:_n[50],dark:_n[400]}:{main:_n[700],light:_n[400],dark:_n[800]}}(n),c=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:kn[200],light:kn[50],dark:kn[400]}:{main:kn[500],light:kn[300],dark:kn[700]}}(n),h=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:bn[500],light:bn[300],dark:bn[700]}:{main:bn[700],light:bn[400],dark:bn[800]}}(n),d=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:xn[400],light:xn[300],dark:xn[700]}:{main:xn[700],light:xn[500],dark:xn[900]}}(n),p=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Sn[400],light:Sn[300],dark:Sn[700]}:{main:Sn[800],light:Sn[500],dark:Sn[900]}}(n),v=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:wn[400],light:wn[300],dark:wn[700]}:{main:"#ed6c02",light:wn[500],dark:wn[900]}}(n);function m(e){var t=function(e,t){var n=dn(e),r=dn(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,Tn.text.primary)>=i?Tn.text.primary:En.text.primary;return t}var y=function(e){var t=e.color,n=e.name,r=e.mainShade,i=void 0===r?500:r,a=e.lightShade,u=void 0===a?300:a,s=e.darkShade,c=void 0===s?700:s;if(!(t=f({},t)).main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error(at(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error(at(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return Cn(t,"light",u,o),Cn(t,"dark",c,o),t.contrastText||(t.contrastText=m(t.main)),t},g={dark:Tn,light:En};return We(f({common:f({},yn),mode:n,primary:y({color:s,name:"primary"}),secondary:y({color:c,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:y({color:h,name:"error"}),warning:y({color:v,name:"warning"}),info:y({color:d,name:"info"}),success:y({color:p,name:"success"}),grey:gn,contrastThreshold:i,getContrastText:m,augmentColor:y,tonalOffset:o},g[n]),u)}var Rn=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var Nn={textTransform:"uppercase"},Pn='"Roboto", "Helvetica", "Arial", sans-serif';function On(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,i=void 0===r?Pn:r,a=n.fontSize,o=void 0===a?14:a,u=n.fontWeightLight,s=void 0===u?300:u,c=n.fontWeightRegular,h=void 0===c?400:c,d=n.fontWeightMedium,p=void 0===d?500:d,v=n.fontWeightBold,m=void 0===v?700:v,y=n.htmlFontSize,g=void 0===y?16:y,k=n.allVariants,b=n.pxToRem,w=l(n,Rn);var _=o/14,x=b||function(e){return"".concat(e/g*_,"rem")},S=function(e,t,n,r,a){return f({fontFamily:i,fontWeight:e,fontSize:x(t),lineHeight:n},i===Pn?{letterSpacing:"".concat((o=r/t,Math.round(1e5*o)/1e5),"em")}:{},a,k);var o},I={h1:S(s,96,1.167,-1.5),h2:S(s,60,1.2,-.5),h3:S(h,48,1.167,0),h4:S(h,34,1.235,.25),h5:S(h,24,1.334,0),h6:S(p,20,1.6,.15),subtitle1:S(h,16,1.75,.15),subtitle2:S(p,14,1.57,.1),body1:S(h,16,1.5,.15),body2:S(h,14,1.43,.15),button:S(p,14,1.75,.4,Nn),caption:S(h,12,1.66,.4),overline:S(h,12,2.66,1,Nn),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return We(f({htmlFontSize:g,pxToRem:x,fontFamily:i,fontSize:o,fontWeightLight:s,fontWeightRegular:h,fontWeightMedium:p,fontWeightBold:m},I),w,{clone:!1})}function Dn(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var Ln=["none",Dn(0,2,1,-1,0,1,1,0,0,1,3,0),Dn(0,3,1,-2,0,2,2,0,0,1,5,0),Dn(0,3,3,-2,0,3,4,0,0,1,8,0),Dn(0,2,4,-1,0,4,5,0,0,1,10,0),Dn(0,3,5,-1,0,5,8,0,0,1,14,0),Dn(0,3,5,-1,0,6,10,0,0,1,18,0),Dn(0,4,5,-2,0,7,10,1,0,2,16,1),Dn(0,5,5,-3,0,8,10,1,0,3,14,2),Dn(0,5,6,-3,0,9,12,1,0,3,16,2),Dn(0,6,6,-3,0,10,14,1,0,4,18,3),Dn(0,6,7,-4,0,11,15,1,0,4,20,3),Dn(0,7,8,-4,0,12,17,2,0,5,22,4),Dn(0,7,8,-4,0,13,19,2,0,5,24,4),Dn(0,7,9,-4,0,14,21,2,0,5,26,4),Dn(0,8,9,-5,0,15,22,2,0,6,28,5),Dn(0,8,10,-5,0,16,24,2,0,6,30,5),Dn(0,8,11,-5,0,17,26,2,0,6,32,5),Dn(0,9,11,-5,0,18,28,2,0,7,34,6),Dn(0,9,12,-6,0,19,29,2,0,7,36,6),Dn(0,10,13,-6,0,20,31,3,0,8,38,7),Dn(0,10,13,-6,0,21,33,3,0,8,40,7),Dn(0,10,14,-6,0,22,35,3,0,8,42,7),Dn(0,11,14,-7,0,23,36,3,0,9,44,8),Dn(0,11,15,-7,0,24,38,3,0,9,46,8)],Mn=["duration","easing","delay"],Fn={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Un={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Vn(e){return"".concat(Math.round(e),"ms")}function zn(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function jn(e){var t=f({},Fn,e.easing),n=f({},Un,e.duration);return f({getAutoHeightDuration:zn,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.duration,a=void 0===i?n.standard:i,o=r.easing,u=void 0===o?t.easeInOut:o,s=r.delay,c=void 0===s?0:s;l(r,Mn);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof a?a:Vn(a)," ").concat(u," ").concat("string"===typeof c?c:Vn(c))})).join(",")}},e,{easing:t,duration:n})}var Bn={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},qn=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Kn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,r=e.palette,i=void 0===r?{}:r,a=e.transitions,o=void 0===a?{}:a,u=e.typography,s=void 0===u?{}:u,c=l(e,qn);if(e.vars)throw new Error(at(18));var h=An(i),d=en(e),p=We(d,{mixins:cn(d.breakpoints,n),palette:h,shadows:Ln.slice(),typography:On(h,s),transitions:jn(o),zIndex:f({},Bn)});p=We(p,c);for(var v=arguments.length,m=new Array(v>1?v-1:0),y=1;y<v;y++)m[y-1]=arguments[y];return(p=m.reduce((function(e,t){return We(e,t)}),p)).unstable_sxConfig=f({},Xt,null==c?void 0:c.unstable_sxConfig),p.unstable_sx=function(e){return Jt({sx:e,theme:this})},p}var Gn=Kn(),Hn="$$material",Wn=function(e){return on(e)&&"classes"!==e},Qn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.themeId,n=e.defaultTheme,r=void 0===n?un:n,i=e.rootShouldForwardProp,a=void 0===i?on:i,o=e.slotShouldForwardProp,u=void 0===o?on:o,s=function(e){return Jt(f({},e,{theme:sn(f({},e,{defaultTheme:r,themeId:t}))}))};return s.__mui_systemSx=!0,function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}(e,(function(e){return e.filter((function(e){return!(null!=e&&e.__mui_systemSx)}))}));var i,o,h=n.name,d=n.slot,p=n.skipVariantsResolver,v=n.skipSx,y=n.overridesResolver,g=void 0===y?(i=(o=d)?o.charAt(0).toLowerCase()+o.slice(1):o)?function(e,t){return t[i]}:null:y,k=l(n,an),b=void 0!==p?p:d&&"Root"!==d&&"root"!==d||!1,w=v||!1;var _=on;"Root"===d||"root"===d?_=a:d?_=u:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(_=void 0);var x=function(e,t){return Ke(e,t)}(e,f({shouldForwardProp:_,label:undefined},k)),S=function(n){for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];var u=a?a.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(n){return e(f({},n,{theme:sn(f({},n,{defaultTheme:r,themeId:t}))}))}:e})):[],l=n;h&&g&&u.push((function(e){var n=sn(f({},e,{defaultTheme:r,themeId:t})),i=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null}(h,n);if(i){var a={};return Object.entries(i).forEach((function(t){var r=c(t,2),i=r[0],o=r[1];a[i]="function"===typeof o?o(f({},e,{theme:n})):o})),g(e,a)}return null})),h&&!b&&u.push((function(e){var n=sn(f({},e,{defaultTheme:r,themeId:t}));return function(e,t,n,r){var i,a=e.ownerState,o=void 0===a?{}:a,u=[],s=null==n||null==(i=n.components)||null==(i=i[r])?void 0:i.variants;return s&&s.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){o[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&u.push(t[rn(n.props)])})),u}(e,function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=rn(e.props);r[t]=e.style})),r}(h,n),n,h)})),w||u.push(s);var d=u.length-a.length;if(Array.isArray(n)&&d>0){var p=new Array(d).fill("");(l=[].concat(m(n),m(p))).raw=[].concat(m(n.raw),m(p))}else"function"===typeof n&&n.__emotion_real!==n&&(l=function(e){return n(f({},e,{theme:sn(f({},e,{defaultTheme:r,themeId:t}))}))});var v=x.apply(void 0,[l].concat(m(u)));return e.muiName&&(v.muiName=e.muiName),v};return x.withConfig&&(S.withConfig=x.withConfig),S}}({themeId:Hn,defaultTheme:Gn,rootShouldForwardProp:Wn}),Yn=Qn;function Xn(e,t){var n=f({},t);return Object.keys(e).forEach((function(r){if(r.toString().match(/^(components|slots)$/))n[r]=f({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){var i=e[r]||{},a=t[r];n[r]={},a&&Object.keys(a)?i&&Object.keys(i)?(n[r]=f({},a),Object.keys(i).forEach((function(e){n[r][e]=Xn(i[e],a[e])}))):n[r]=a:n[r]=i}else void 0===n[r]&&(n[r]=e[r])})),n}var $n=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=t.useContext(Fe);return r&&(e=r,0!==Object.keys(e).length)?r:n},Jn=en();var Zn=function(){return $n(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn)};function er(e){var t=e.props,n=e.name,r=e.defaultTheme,i=e.themeId,a=Zn(r);i&&(a=a[i]||a);var o=function(e){var t=e.theme,n=e.name,r=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?Xn(t.components[n].defaultProps,r):r}({theme:a,name:n,props:t});return o}function tr(e){return er({props:e.props,name:e.name,defaultTheme:Gn,themeId:Hn})}var nr=ot,rr=function(e){return e},ir=function(){var e=rr;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=rr}}}(),ar={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function or(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",r=ar[t];return r?"".concat(n,"-").concat(r):"".concat(ir.generate(e),"-").concat(t)}function ur(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",r={};return t.forEach((function(t){r[t]=or(e,t,n)})),r}function sr(e){return or("MuiSvgIcon",e)}ur("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var cr=n(184),lr=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],fr=Yn("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"inherit"!==n.color&&t["color".concat(nr(n.color))],t["fontSize".concat(nr(n.fontSize))]]}})((function(e){var t,n,r,i,a,o,u,s,c,l,f,h,d,p=e.theme,v=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:v.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(t=p.transitions)||null==(n=t.create)?void 0:n.call(t,"fill",{duration:null==(r=p.transitions)||null==(r=r.duration)?void 0:r.shorter}),fontSize:{inherit:"inherit",small:(null==(i=p.typography)||null==(a=i.pxToRem)?void 0:a.call(i,20))||"1.25rem",medium:(null==(o=p.typography)||null==(u=o.pxToRem)?void 0:u.call(o,24))||"1.5rem",large:(null==(s=p.typography)||null==(c=s.pxToRem)?void 0:c.call(s,35))||"2.1875rem"}[v.fontSize],color:null!=(l=null==(f=(p.vars||p).palette)||null==(f=f[v.color])?void 0:f.main)?l:{action:null==(h=(p.vars||p).palette)||null==(h=h.action)?void 0:h.active,disabled:null==(d=(p.vars||p).palette)||null==(d=d.action)?void 0:d.disabled,inherit:void 0}[v.color]}})),hr=t.forwardRef((function(e,n){var r=tr({props:e,name:"MuiSvgIcon"}),i=r.children,a=r.className,o=r.color,u=void 0===o?"inherit":o,s=r.component,c=void 0===s?"svg":s,h=r.fontSize,v=void 0===h?"medium":h,m=r.htmlColor,y=r.inheritViewBox,g=void 0!==y&&y,k=r.titleAccess,b=r.viewBox,w=void 0===b?"0 0 24 24":b,_=l(r,lr),x=t.isValidElement(i)&&"svg"===i.type,S=f({},r,{color:u,component:c,fontSize:v,instanceFontSize:e.fontSize,inheritViewBox:g,viewBox:w,hasSvgAsChild:x}),I={};g||(I.viewBox=w);var E=function(e){var t=e.color,n=e.fontSize,r=e.classes;return p({root:["root","inherit"!==t&&"color".concat(nr(t)),"fontSize".concat(nr(n))]},sr,r)}(S);return(0,cr.jsxs)(fr,f({as:c,className:d(E.root,a),focusable:"false",color:m,"aria-hidden":!k||void 0,role:k?"img":void 0,ref:n},I,_,x&&i.props,{ownerState:S,children:[x?i.props.children:i,k?(0,cr.jsx)("title",{children:k}):null]}))}));hr.muiName="SvgIcon";var dr=hr;function pr(e,n){function r(t,r){return(0,cr.jsx)(dr,f({"data-testid":"".concat(n,"Icon"),ref:r},t,{children:e}))}return r.muiName=dr.muiName,t.memo(t.forwardRef(r))}var vr=pr((0,cr.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function mr(e){return or("MuiAvatar",e)}ur("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);var yr=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],gr=Yn("div",{name:"MuiAvatar",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})((function(e){var t=e.theme,n=e.ownerState;return f({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},"rounded"===n.variant&&{borderRadius:(t.vars||t).shape.borderRadius},"square"===n.variant&&{borderRadius:0},n.colorDefault&&f({color:(t.vars||t).palette.background.default},t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:{backgroundColor:"light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[600]}))})),kr=Yn("img",{name:"MuiAvatar",slot:"Img",overridesResolver:function(e,t){return t.img}})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),br=Yn(vr,{name:"MuiAvatar",slot:"Fallback",overridesResolver:function(e,t){return t.fallback}})({width:"75%",height:"75%"});var wr=t.forwardRef((function(e,n){var r=tr({props:e,name:"MuiAvatar"}),i=r.alt,a=r.children,o=r.className,u=r.component,s=void 0===u?"div":u,h=r.imgProps,v=r.sizes,m=r.src,y=r.srcSet,g=r.variant,k=void 0===g?"circular":g,b=l(r,yr),w=null,_=function(e){var n=e.crossOrigin,r=e.referrerPolicy,i=e.src,a=e.srcSet,o=c(t.useState(!1),2),u=o[0],s=o[1];return t.useEffect((function(){if(i||a){s(!1);var e=!0,t=new Image;return t.onload=function(){e&&s("loaded")},t.onerror=function(){e&&s("error")},t.crossOrigin=n,t.referrerPolicy=r,t.src=i,a&&(t.srcset=a),function(){e=!1}}}),[n,r,i,a]),u}(f({},h,{src:m,srcSet:y})),x=m||y,S=x&&"error"!==_,I=f({},r,{colorDefault:!S,component:s,variant:k}),E=function(e){var t=e.classes;return p({root:["root",e.variant,e.colorDefault&&"colorDefault"],img:["img"],fallback:["fallback"]},mr,t)}(I);return w=S?(0,cr.jsx)(kr,f({alt:i,srcSet:y,src:m,sizes:v,ownerState:I,className:E.img},h)):null!=a?a:x&&i?i[0]:(0,cr.jsx)(br,{ownerState:I,className:E.fallback}),(0,cr.jsx)(gr,f({as:s,ownerState:I,className:d(E.root,o),ref:n},b,{children:w}))})),_r=wr;var xr=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.useMemo((function(){return n.every((function(e){return null==e}))?null:function(e){n.forEach((function(t){!function(e,t){"function"===typeof e?e(t):e&&(e.current=t)}(t,e)}))}}),n)},Sr="undefined"!==typeof window?t.useLayoutEffect:t.useEffect;var Ir,Er=function(e){var n=t.useRef(e);return Sr((function(){n.current=e})),t.useCallback((function(){return n.current.apply(void 0,arguments)}),[])},Tr=Er,Cr=!0,Ar=!1,Rr={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Nr(e){e.metaKey||e.altKey||e.ctrlKey||(Cr=!0)}function Pr(){Cr=!1}function Or(){"hidden"===this.visibilityState&&Ar&&(Cr=!0)}function Dr(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return Cr||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!Rr[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}var Lr=function(){var e=t.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",Nr,!0),t.addEventListener("mousedown",Pr,!0),t.addEventListener("pointerdown",Pr,!0),t.addEventListener("touchstart",Pr,!0),t.addEventListener("visibilitychange",Or,!0))}),[]),n=t.useRef(!1);return{isFocusVisibleRef:n,onFocus:function(e){return!!Dr(e)&&(n.current=!0,!0)},onBlur:function(){return!!n.current&&(Ar=!0,window.clearTimeout(Ir),Ir=window.setTimeout((function(){Ar=!1}),100),n.current=!1,!0)},ref:e}};function Mr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Fr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ur(e,t){return Ur=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ur(e,t)}var Vr=t.createContext(null);function zr(e,n){var r=Object.create(null);return e&&t.Children.map(e,(function(e){return e})).forEach((function(e){r[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),r}function jr(e,t,n){return null!=n[t]?n[t]:e.props[t]}function Br(e,n,r){var i=zr(e.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),a=[];for(var o in e)o in t?a.length&&(i[o]=a,a=[]):a.push(o);var u={};for(var s in t){if(i[s])for(r=0;r<i[s].length;r++){var c=i[s][r];u[i[s][r]]=n(c)}u[s]=n(s)}for(r=0;r<a.length;r++)u[a[r]]=n(a[r]);return u}(n,i);return Object.keys(a).forEach((function(o){var u=a[o];if((0,t.isValidElement)(u)){var s=o in n,c=o in i,l=n[o],f=(0,t.isValidElement)(l)&&!l.props.in;!c||s&&!f?c||!s||f?c&&s&&(0,t.isValidElement)(l)&&(a[o]=(0,t.cloneElement)(u,{onExited:r.bind(null,u),in:l.props.in,exit:jr(u,"exit",e),enter:jr(u,"enter",e)})):a[o]=(0,t.cloneElement)(u,{in:!1}):a[o]=(0,t.cloneElement)(u,{onExited:r.bind(null,u),in:!0,exit:jr(u,"exit",e),enter:jr(u,"enter",e)})}})),a}var qr=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},Kr=function(e){var n,r;function i(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(Fr(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,Ur(n,r);var a=i.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},i.getDerivedStateFromProps=function(e,n){var r,i,a=n.children,o=n.handleExited;return{children:n.firstRender?(r=e,i=o,zr(r.children,(function(e){return(0,t.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:jr(e,"appear",r),enter:jr(e,"enter",r),exit:jr(e,"exit",r)})}))):Br(e,a,o),firstRender:!1}},a.handleExited=function(e,t){var n=zr(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=f({},t.children);return delete n[e.key],{children:n}})))},a.render=function(){var e=this.props,n=e.component,r=e.childFactory,i=l(e,["component","childFactory"]),a=this.state.contextValue,o=qr(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?t.createElement(Vr.Provider,{value:a},o):t.createElement(Vr.Provider,{value:a},t.createElement(n,i,o))},i}(t.Component);Kr.propTypes={},Kr.defaultProps={component:"div",childFactory:function(e){return e}};var Gr=Kr;n(110);function Hr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Pe(t)}var Wr=function(){var e=Hr.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};var Qr=function(e){var n=e.className,r=e.classes,i=e.pulsate,a=void 0!==i&&i,o=e.rippleX,u=e.rippleY,s=e.rippleSize,l=e.in,f=e.onExited,h=e.timeout,p=c(t.useState(!1),2),v=p[0],m=p[1],y=d(n,r.ripple,r.rippleVisible,a&&r.ripplePulsate),g={width:s,height:s,top:-s/2+u,left:-s/2+o},k=d(r.child,v&&r.childLeaving,a&&r.childPulsate);return l||v||m(!0),t.useEffect((function(){if(!l&&null!=f){var e=setTimeout(f,h);return function(){clearTimeout(e)}}}),[f,l,h]),(0,cr.jsx)("span",{className:y,style:g,children:(0,cr.jsx)("span",{className:k})})};var Yr,Xr,$r,Jr,Zr,ei,ti,ni,ri=ur("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),ii=["center","classes","className"],ai=Wr(Zr||(Zr=Yr||(Yr=Mr(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),oi=Wr(ei||(ei=Xr||(Xr=Mr(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),ui=Wr(ti||(ti=$r||($r=Mr(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),si=Yn("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),ci=Yn(Qr,{name:"MuiTouchRipple",slot:"Ripple"})(ni||(ni=Jr||(Jr=Mr(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),ri.rippleVisible,ai,550,(function(e){return e.theme.transitions.easing.easeInOut}),ri.ripplePulsate,(function(e){return e.theme.transitions.duration.shorter}),ri.child,ri.childLeaving,oi,550,(function(e){return e.theme.transitions.easing.easeInOut}),ri.childPulsate,ui,(function(e){return e.theme.transitions.easing.easeInOut})),li=t.forwardRef((function(e,n){var r=tr({props:e,name:"MuiTouchRipple"}),i=r.center,a=void 0!==i&&i,o=r.classes,u=void 0===o?{}:o,s=r.className,h=l(r,ii),p=c(t.useState([]),2),v=p[0],y=p[1],g=t.useRef(0),k=t.useRef(null);t.useEffect((function(){k.current&&(k.current(),k.current=null)}),[v]);var b=t.useRef(!1),w=t.useRef(0),_=t.useRef(null),x=t.useRef(null);t.useEffect((function(){return function(){w.current&&clearTimeout(w.current)}}),[]);var S=t.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,i=e.rippleSize,a=e.cb;y((function(e){return[].concat(m(e),[(0,cr.jsx)(ci,{classes:{ripple:d(u.ripple,ri.ripple),rippleVisible:d(u.rippleVisible,ri.rippleVisible),ripplePulsate:d(u.ripplePulsate,ri.ripplePulsate),child:d(u.child,ri.child),childLeaving:d(u.childLeaving,ri.childLeaving),childPulsate:d(u.childPulsate,ri.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},g.current)])})),g.current+=1,k.current=a}),[u]),I=t.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=t.pulsate,i=void 0!==r&&r,o=t.center,u=void 0===o?a||t.pulsate:o,s=t.fakeElement,c=void 0!==s&&s;if("mousedown"===(null==e?void 0:e.type)&&b.current)b.current=!1;else{"touchstart"===(null==e?void 0:e.type)&&(b.current=!0);var l,f,h,d=c?null:x.current,p=d?d.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(u||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(p.width/2),f=Math.round(p.height/2);else{var v=e.touches&&e.touches.length>0?e.touches[0]:e,m=v.clientX,y=v.clientY;l=Math.round(m-p.left),f=Math.round(y-p.top)}if(u)(h=Math.sqrt((2*Math.pow(p.width,2)+Math.pow(p.height,2))/3))%2===0&&(h+=1);else{var g=2*Math.max(Math.abs((d?d.clientWidth:0)-l),l)+2,k=2*Math.max(Math.abs((d?d.clientHeight:0)-f),f)+2;h=Math.sqrt(Math.pow(g,2)+Math.pow(k,2))}null!=e&&e.touches?null===_.current&&(_.current=function(){S({pulsate:i,rippleX:l,rippleY:f,rippleSize:h,cb:n})},w.current=setTimeout((function(){_.current&&(_.current(),_.current=null)}),80)):S({pulsate:i,rippleX:l,rippleY:f,rippleSize:h,cb:n})}}),[a,S]),E=t.useCallback((function(){I({},{pulsate:!0})}),[I]),T=t.useCallback((function(e,t){if(clearTimeout(w.current),"touchend"===(null==e?void 0:e.type)&&_.current)return _.current(),_.current=null,void(w.current=setTimeout((function(){T(e,t)})));_.current=null,y((function(e){return e.length>0?e.slice(1):e})),k.current=t}),[]);return t.useImperativeHandle(n,(function(){return{pulsate:E,start:I,stop:T}}),[E,I,T]),(0,cr.jsx)(si,f({className:d(ri.root,u.root,s),ref:x},h,{children:(0,cr.jsx)(Gr,{component:null,exit:!0,children:v})}))})),fi=li;function hi(e){return or("MuiButtonBase",e)}var di,pi=ur("MuiButtonBase",["root","disabled","focusVisible"]),vi=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],mi=Yn("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(e,t){return t.root}})((Xe(di={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},"&.".concat(pi.disabled),{pointerEvents:"none",cursor:"default"}),Xe(di,"@media print",{colorAdjust:"exact"}),di)),yi=t.forwardRef((function(e,n){var r=tr({props:e,name:"MuiButtonBase"}),i=r.action,a=r.centerRipple,o=void 0!==a&&a,u=r.children,s=r.className,h=r.component,v=void 0===h?"button":h,m=r.disabled,y=void 0!==m&&m,g=r.disableRipple,k=void 0!==g&&g,b=r.disableTouchRipple,w=void 0!==b&&b,_=r.focusRipple,x=void 0!==_&&_,S=r.LinkComponent,I=void 0===S?"a":S,E=r.onBlur,T=r.onClick,C=r.onContextMenu,A=r.onDragLeave,R=r.onFocus,N=r.onFocusVisible,P=r.onKeyDown,O=r.onKeyUp,D=r.onMouseDown,L=r.onMouseLeave,M=r.onMouseUp,F=r.onTouchEnd,U=r.onTouchMove,V=r.onTouchStart,z=r.tabIndex,j=void 0===z?0:z,B=r.TouchRippleProps,q=r.touchRippleRef,K=r.type,G=l(r,vi),H=t.useRef(null),W=t.useRef(null),Q=xr(W,q),Y=Lr(),X=Y.isFocusVisibleRef,$=Y.onFocus,J=Y.onBlur,Z=Y.ref,ee=c(t.useState(!1),2),te=ee[0],ne=ee[1];y&&te&&ne(!1),t.useImperativeHandle(i,(function(){return{focusVisible:function(){ne(!0),H.current.focus()}}}),[]);var re=c(t.useState(!1),2),ie=re[0],ae=re[1];t.useEffect((function(){ae(!0)}),[]);var oe=ie&&!k&&!y;function ue(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w;return Tr((function(r){return t&&t(r),!n&&W.current&&W.current[e](r),!0}))}t.useEffect((function(){te&&x&&!k&&ie&&W.current.pulsate()}),[k,x,te,ie]);var se=ue("start",D),ce=ue("stop",C),le=ue("stop",A),fe=ue("stop",M),he=ue("stop",(function(e){te&&e.preventDefault(),L&&L(e)})),de=ue("start",V),pe=ue("stop",F),ve=ue("stop",U),me=ue("stop",(function(e){J(e),!1===X.current&&ne(!1),E&&E(e)}),!1),ye=Tr((function(e){H.current||(H.current=e.currentTarget),$(e),!0===X.current&&(ne(!0),N&&N(e)),R&&R(e)})),ge=function(){var e=H.current;return v&&"button"!==v&&!("A"===e.tagName&&e.href)},ke=t.useRef(!1),be=Tr((function(e){x&&!ke.current&&te&&W.current&&" "===e.key&&(ke.current=!0,W.current.stop(e,(function(){W.current.start(e)}))),e.target===e.currentTarget&&ge()&&" "===e.key&&e.preventDefault(),P&&P(e),e.target===e.currentTarget&&ge()&&"Enter"===e.key&&!y&&(e.preventDefault(),T&&T(e))})),we=Tr((function(e){x&&" "===e.key&&W.current&&te&&!e.defaultPrevented&&(ke.current=!1,W.current.stop(e,(function(){W.current.pulsate(e)}))),O&&O(e),T&&e.target===e.currentTarget&&ge()&&" "===e.key&&!e.defaultPrevented&&T(e)})),_e=v;"button"===_e&&(G.href||G.to)&&(_e=I);var xe={};"button"===_e?(xe.type=void 0===K?"button":K,xe.disabled=y):(G.href||G.to||(xe.role="button"),y&&(xe["aria-disabled"]=y));var Se=xr(n,Z,H);var Ie=f({},r,{centerRipple:o,component:v,disabled:y,disableRipple:k,disableTouchRipple:w,focusRipple:x,tabIndex:j,focusVisible:te}),Ee=function(e){var t=e.disabled,n=e.focusVisible,r=e.focusVisibleClassName,i=p({root:["root",t&&"disabled",n&&"focusVisible"]},hi,e.classes);return n&&r&&(i.root+=" ".concat(r)),i}(Ie);return(0,cr.jsxs)(mi,f({as:_e,className:d(Ee.root,s),ownerState:Ie,onBlur:me,onClick:T,onContextMenu:ce,onFocus:ye,onKeyDown:be,onKeyUp:we,onMouseDown:se,onMouseLeave:he,onMouseUp:fe,onDragLeave:le,onTouchEnd:pe,onTouchMove:ve,onTouchStart:de,ref:Se,tabIndex:y?-1:j,type:K},xe,G,{children:[u,oe?(0,cr.jsx)(fi,f({ref:Q,center:o},B)):null]}))})),gi=yi;function ki(e){return or("MuiIconButton",e)}var bi=ur("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),wi=["edge","children","className","color","disabled","disableFocusRipple","size"],_i=Yn(gi,{name:"MuiIconButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"default"!==n.color&&t["color".concat(nr(n.color))],n.edge&&t["edge".concat(nr(n.edge))],t["size".concat(nr(n.size))]]}})((function(e){var t=e.theme,n=e.ownerState;return f({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):pn(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(function(e){var t,n=e.theme,r=e.ownerState,i=null==(t=(n.vars||n).palette)?void 0:t[r.color];return f({},"inherit"===r.color&&{color:"inherit"},"inherit"!==r.color&&"default"!==r.color&&f({color:null==i?void 0:i.main},!r.disableRipple&&{"&:hover":f({},i&&{backgroundColor:n.vars?"rgba(".concat(i.mainChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):pn(i.main,n.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===r.size&&{padding:5,fontSize:n.typography.pxToRem(18)},"large"===r.size&&{padding:12,fontSize:n.typography.pxToRem(28)},Xe({},"&.".concat(bi.disabled),{backgroundColor:"transparent",color:(n.vars||n).palette.action.disabled}))})),xi=t.forwardRef((function(e,t){var n=tr({props:e,name:"MuiIconButton"}),r=n.edge,i=void 0!==r&&r,a=n.children,o=n.className,u=n.color,s=void 0===u?"default":u,c=n.disabled,h=void 0!==c&&c,v=n.disableFocusRipple,m=void 0!==v&&v,y=n.size,g=void 0===y?"medium":y,k=l(n,wi),b=f({},n,{edge:i,color:s,disabled:h,disableFocusRipple:m,size:g}),w=function(e){var t=e.classes,n=e.disabled,r=e.color,i=e.edge,a=e.size;return p({root:["root",n&&"disabled","default"!==r&&"color".concat(nr(r)),i&&"edge".concat(nr(i)),"size".concat(nr(a))]},ki,t)}(b);return(0,cr.jsx)(_i,f({className:d(w.root,o),centerRipple:!0,focusRipple:!m,disabled:h,ref:t,ownerState:b},k,{children:a}))})),Si=xi,Ii=pr((0,cr.jsx)("path",{d:"M11 5.08V2c-5 .5-9 4.81-9 10s4 9.5 9 10v-3.08c-3-.48-6-3.4-6-6.92s3-6.44 6-6.92zM18.97 11H22c-.47-5-4-8.53-9-9v3.08C16 5.51 18.54 8 18.97 11zM13 18.92V22c5-.47 8.53-4 9-9h-3.03c-.43 3-2.97 5.49-5.97 5.92z"}),"DonutLarge"),Ei=pr((0,cr.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"}),"Chat"),Ti=pr((0,cr.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert"),Ci=pr((0,cr.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"SearchOutlined");function Ai(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ri(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ye(r.key),r)}}function Ni(e,t,n){return t&&Ri(e.prototype,t),n&&Ri(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pi(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Oi(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ur(e,t)}function Di(e){return Di=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Di(e)}function Li(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Mi(e){var t=Li();return function(){var n,r=Di(e);if(t){var i=Di(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Qe(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fr(e)}(this,n)}}function Fi(e,t,n){return Fi=Li()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Ur(i,n.prototype),i},Fi.apply(null,arguments)}function Ui(e){var t="function"===typeof Map?new Map:void 0;return Ui=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Fi(e,arguments,Di(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Ur(r,e)},Ui(e)}var Vi=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},zi={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Vi(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new ji;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ji=function(e){Oi(n,e);var t=Mi(n);function n(){var e;return Ai(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return Ni(n)}(Ui(Error)),Bi=function(e){return function(e){var t=Vi(e);return zi.encodeByteArray(t,!0)}(e).replace(/\./g,"")},qi=function(e){try{return zi.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ki(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ki(e[n],t[n]));return e}var Gi=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Hi=function(){try{return Gi()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&qi(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Wi=function(){var e;return null===(e=Hi())||void 0===e?void 0:e.config},Qi=function(){function e(){var t=this;Ai(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Ni(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Yi(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Bi(JSON.stringify({alg:"none",type:"JWT"})),Bi(JSON.stringify(a)),""].join(".")}function Xi(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function $i(){var e,t=null===(e=Hi())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function Ji(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Zi(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function ea(){var e=Xi();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ta(){try{return"object"===typeof indexedDB}catch(e){return!1}}var na=function(e){Oi(n,e);var t=Mi(n);function n(e,r,i){var a;return Ai(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Fr(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Fr(a),ra.prototype.create),a}return Ni(n)}(Ui(Error)),ra=function(){function e(t,n,r){Ai(this,e),this.service=t,this.serviceName=n,this.errors=r}return Ni(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ia,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new na(n,a,t)}}]),e}();var ia=/\{\$([^}]+)}/g;function aa(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function oa(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ua(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(sa(u)&&sa(s)){if(!ua(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function sa(e){return null!==e&&"object"===typeof e}function ca(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function la(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function fa(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function ha(e,t){var n=new da(e,t);return n.subscribe.bind(n)}var da=function(){function e(t,n){var r=this;Ai(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Ni(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Pi(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=pa),void 0===r.error&&(r.error=pa),void 0===r.complete&&(r.complete=pa);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function pa(){}function va(e){return e&&e._delegate?e._delegate:e}function ma(){ma=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,o=Object.create(a.prototype),u=new R(r||[]);return i(o,"_invoke",{value:E(e,n,u)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",v="completed",m={};function y(){}function g(){}function k(){}var b={};c(b,o,(function(){return this}));var w=Object.getPrototypeOf,_=w&&w(w(N([])));_&&_!==n&&r.call(_,o)&&(b=_);var x=k.prototype=y.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,u){var s=f(e[i],e,a);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==Qe(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(l).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function E(t,n,r){var i=h;return function(a,o){if(i===p)throw new Error("Generator is already running");if(i===v){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var u=r.delegate;if(u){var s=T(u,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=f(t,n,r);if("normal"===c.type){if(i=r.done?v:d,c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=v,r.method="throw",r.arg=c.arg)}}}function T(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=f(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Qe(t)+" is not iterable")}return g.prototype=k,i(x,"constructor",{value:k,configurable:!0}),i(k,"constructor",{value:g,configurable:!0}),g.displayName=c(k,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,c(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(I.prototype),c(I.prototype,u,(function(){return this})),t.AsyncIterator=I,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new I(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(x),c(x,s,"Generator"),c(x,o,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function ya(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function ga(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ya(a,r,i,o,u,"next",e)}function u(e){ya(a,r,i,o,u,"throw",e)}o(void 0)}))}}var ka=function(){function e(t,n,r){Ai(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Ni(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ba="[DEFAULT]",wa=function(){function e(t,n){Ai(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Ni(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Qi;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ba})}catch(s){}var t,n=Pi(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ba;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=ga(ma().mark((function e(){var t;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(m(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),m(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ba;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ba;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Pi(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=c(i.value,2),s=u[0],l=u[1];r===this.normalizeInstanceIdentifier(s)&&l.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Pi(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t=e.instanceIdentifier,n=e.options,r=void 0===n?{}:n,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:_a(t),options:r}),this.instances.set(t,i),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(a){}return i||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ba;return this.component?this.component.multipleInstances?e:ba:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();function _a(e){return e===ba?void 0:e}var xa,Sa,Ia=function(){function e(t){Ai(this,e),this.name=t,this.providers=new Map}return Ni(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new wa(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ea=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Sa||(Sa={}));var Ta={debug:Sa.DEBUG,verbose:Sa.VERBOSE,info:Sa.INFO,warn:Sa.WARN,error:Sa.ERROR,silent:Sa.SILENT},Ca=Sa.INFO,Aa=(Xe(xa={},Sa.DEBUG,"log"),Xe(xa,Sa.VERBOSE,"log"),Xe(xa,Sa.INFO,"info"),Xe(xa,Sa.WARN,"warn"),Xe(xa,Sa.ERROR,"error"),xa),Ra=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Aa[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Na=function(){function e(t){Ai(this,e),this.name=t,this._logLevel=Ca,this._logHandler=Ra,this._userLogHandler=null,Ea.push(this)}return Ni(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Sa))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Ta[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Sa.DEBUG].concat(t)),this._logHandler.apply(this,[this,Sa.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Sa.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Sa.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Sa.INFO].concat(t)),this._logHandler.apply(this,[this,Sa.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Sa.WARN].concat(t)),this._logHandler.apply(this,[this,Sa.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Sa.ERROR].concat(t)),this._logHandler.apply(this,[this,Sa.ERROR].concat(t))}}]),e}();function Pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pa(Object(n),!0).forEach((function(t){Xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Da,La,Ma=function(e,t){return t.some((function(t){return e instanceof t}))};var Fa=new WeakMap,Ua=new WeakMap,Va=new WeakMap,za=new WeakMap,ja=new WeakMap;var Ba={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ua.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Va.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ga(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function qa(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(La||(La=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ha(this),n),Ga(Fa.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ga(e.apply(Ha(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Ha(this),t].concat(r));return Va.set(a,t.sort?t.sort():[t]),Ga(a)}}function Ka(e){return"function"===typeof e?qa(e):(e instanceof IDBTransaction&&function(e){if(!Ua.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ua.set(e,t)}}(e),Ma(e,Da||(Da=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ba):e)}function Ga(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Ga(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Fa.set(t,e)})).catch((function(){})),ja.set(t,e),t}(e);if(za.has(e))return za.get(e);var t=Ka(e);return t!==e&&(za.set(e,t),ja.set(t,e)),t}var Ha=function(e){return ja.get(e)};var Wa,Qa,Ya=["get","getKey","getAll","getAllKeys","count"],Xa=["put","add","delete","clear"],$a=new Map;function Ja(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if($a.get(t))return $a.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Xa.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Ya.includes(n))){var a=function(){var e=ga(ma().mark((function e(t){var a,o,u,s,c,l,f=arguments;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return $a.set(t,a),a}}}Ba=function(e){return Oa(Oa({},e),{},{get:function(t,n,r){return Ja(t,n)||e.get(t,n,r)},has:function(t,n){return!!Ja(t,n)||e.has(t,n)}})}(Ba);var Za=function(){function e(t){Ai(this,e),this.container=t}return Ni(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var eo="@firebase/app",to="0.9.19",no=new Na("@firebase/app"),ro="[DEFAULT]",io=(Xe(Wa={},eo,"fire-core"),Xe(Wa,"@firebase/app-compat","fire-core-compat"),Xe(Wa,"@firebase/analytics","fire-analytics"),Xe(Wa,"@firebase/analytics-compat","fire-analytics-compat"),Xe(Wa,"@firebase/app-check","fire-app-check"),Xe(Wa,"@firebase/app-check-compat","fire-app-check-compat"),Xe(Wa,"@firebase/auth","fire-auth"),Xe(Wa,"@firebase/auth-compat","fire-auth-compat"),Xe(Wa,"@firebase/database","fire-rtdb"),Xe(Wa,"@firebase/database-compat","fire-rtdb-compat"),Xe(Wa,"@firebase/functions","fire-fn"),Xe(Wa,"@firebase/functions-compat","fire-fn-compat"),Xe(Wa,"@firebase/installations","fire-iid"),Xe(Wa,"@firebase/installations-compat","fire-iid-compat"),Xe(Wa,"@firebase/messaging","fire-fcm"),Xe(Wa,"@firebase/messaging-compat","fire-fcm-compat"),Xe(Wa,"@firebase/performance","fire-perf"),Xe(Wa,"@firebase/performance-compat","fire-perf-compat"),Xe(Wa,"@firebase/remote-config","fire-rc"),Xe(Wa,"@firebase/remote-config-compat","fire-rc-compat"),Xe(Wa,"@firebase/storage","fire-gcs"),Xe(Wa,"@firebase/storage-compat","fire-gcs-compat"),Xe(Wa,"@firebase/firestore","fire-fst"),Xe(Wa,"@firebase/firestore-compat","fire-fst-compat"),Xe(Wa,"fire-js","fire-js"),Xe(Wa,"firebase","fire-js-all"),Wa),ao=new Map,oo=new Map;function uo(e,t){try{e.container.addComponent(t)}catch(n){no.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function so(e,t){e.container.addOrOverwriteComponent(t)}function co(e){var t=e.name;if(oo.has(t))return no.debug("There were multiple attempts to register component ".concat(t,".")),!1;oo.set(t,e);var n,r=Pi(ao.values());try{for(r.s();!(n=r.n()).done;){uo(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function lo(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function fo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ro;lo(e,t).clearInstance(n)}function ho(){oo.clear()}var po=(Xe(Qa={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),Xe(Qa,"bad-app-name","Illegal App name: '{$appName}"),Xe(Qa,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Xe(Qa,"app-deleted","Firebase App named '{$appName}' already deleted"),Xe(Qa,"no-options","Need to provide options, when not being deployed to hosting via source."),Xe(Qa,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Xe(Qa,"invalid-log-argument","First argument to `onLog` must be null or a function."),Xe(Qa,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Xe(Qa,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Xe(Qa,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Xe(Qa,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Qa),vo=new ra("app","Firebase",po),mo=function(){function e(t,n,r){var i=this;Ai(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ka("app",(function(){return i}),"PUBLIC"))}return Ni(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw vo.create("app-deleted",{appName:this._name})}}]),e}(),yo="10.4.0";function go(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:ro,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw vo.create("bad-app-name",{appName:String(i)});if(n||(n=Wi()),!n)throw vo.create("no-options");var a=ao.get(i);if(a){if(ua(n,a.options)&&ua(r,a.config))return a;throw vo.create("duplicate-app",{appName:i})}var o,u=new Ia(i),s=Pi(oo.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new mo(n,r,u);return ao.set(i,l),l}function ko(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ro,t=ao.get(e);if(!t&&e===ro&&Wi())return go();if(!t)throw vo.create("no-app",{appName:e});return t}function bo(){return Array.from(ao.values())}function wo(e){return _o.apply(this,arguments)}function _o(){return _o=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!ao.has(n)){e.next=6;break}return ao.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),_o.apply(this,arguments)}function xo(e,t,n){var r,i=null!==(r=io[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void no.warn(u.join(" "))}co(new ka("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function So(e,t){if(null!==e&&"function"!==typeof e)throw vo.create("invalid-log-argument");!function(e,t){var n,r=Pi(Ea);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Ta[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Sa[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Io(e){var t;t=e,Ea.forEach((function(e){e.setLogLevel(t)}))}var Eo="firebase-heartbeat-database",To=1,Co="firebase-heartbeat-store",Ao=null;function Ro(){return Ao||(Ao=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Ga(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Ga(u.result),e.oldVersion,e.newVersion,Ga(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(Eo,To,{upgrade:function(e,t){if(0===t)e.createObjectStore(Co)}}).catch((function(e){throw vo.create("idb-open",{originalErrorMessage:e.message})}))),Ao}function No(e){return Po.apply(this,arguments)}function Po(){return Po=ga(ma().mark((function e(t){var n,r,i;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ro();case 3:return n=e.sent,e.next=6,n.transaction(Co).objectStore(Co).get(Lo(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof na?no.warn(e.t0.message):(i=vo.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),no.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),Po.apply(this,arguments)}function Oo(e,t){return Do.apply(this,arguments)}function Do(){return Do=ga(ma().mark((function e(t,n){var r,i,a,o;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ro();case 3:return r=e.sent,i=r.transaction(Co,"readwrite"),a=i.objectStore(Co),e.next=8,a.put(n,Lo(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof na?no.warn(e.t0.message):(o=vo.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),no.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Do.apply(this,arguments)}function Lo(e){return"".concat(e.name,"!").concat(e.options.appId)}var Mo=function(){function e(t){var n=this;Ai(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new jo(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return Ni(e,[{key:"triggerHeartbeat",value:function(){var e=ga(ma().mark((function e(){var t,n,r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Fo(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=ga(ma().mark((function e(){var t,n,r,i,a;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Fo(),n=Uo(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Bi(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Fo(){return(new Date).toISOString().substring(0,10)}function Uo(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Pi(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Bo(r)>n)return a.dates.pop(),0}else if(r.push({agent:e.agent,dates:[e.date]}),Bo(r)>n)return r.pop(),0;i=i.slice(1)};for(a.s();!(t=a.n()).done&&0!==o(););}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Vo,zo,jo=function(){function e(t){Ai(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Ni(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ta()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=ga(ma().mark((function e(){var t;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,No(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=ga(ma().mark((function e(t){var n,r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Oo(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=ga(ma().mark((function e(t){var n,r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Oo(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(m(r.heartbeats),m(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Bo(e){return Bi(JSON.stringify({version:2,heartbeats:e})).length}Vo="",co(new ka("platform-logger",(function(e){return new Za(e)}),"PRIVATE")),co(new ka("heartbeat",(function(e){return new Mo(e)}),"PRIVATE")),xo(eo,to,Vo),xo(eo,to,"esm2017"),xo("fire-js","");var qo=function(){function e(t,n){var r=this;Ai(this,e),this._delegate=t,this.firebase=n,uo(t,new ka("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Ni(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),wo(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ro;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ro;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){uo(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){so(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Ko=(Xe(zo={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Xe(zo,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),zo),Go=new ra("app-compat","Firebase",Ko);var Ho=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=go(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(aa(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:xo,setLogLevel:Io,onLog:So,apps:null,SDK_VERSION:yo,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(co(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Go.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Ki(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!aa(n,e=e||ro))throw Go.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(qo);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ki(n,e)},createSubscribe:ha,ErrorFactory:ra,deepExtend:Ki}),n}(),Wo=new Na("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Wo.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Qo=self.firebase.SDK_VERSION;Qo&&Qo.indexOf("LITE")>=0&&Wo.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Yo=Ho;!function(e){xo("@firebase/app-compat","0.2.19",e)}();function Xo(e){return a(e)||v(e)||u(e)||s()}function $o(){return $o="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Di(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},$o.apply(this,arguments)}Yo.registerVersion("firebase","10.4.0","app-compat");function Jo(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var Zo,eu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},tu="EMAIL_SIGNIN",nu="PASSWORD_RESET",ru="RECOVER_EMAIL",iu="REVERT_SECOND_FACTOR_ADDITION",au="VERIFY_AND_CHANGE_EMAIL",ou="VERIFY_EMAIL";function uu(e){return void 0!==e&&void 0!==e.getResponse}function su(e){return void 0!==e&&void 0!==e.enterprise}var cu=Ni((function e(t){if(Ai(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function lu(){return Xe({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var fu=function(){var e;return Xe(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Xe(e,"argument-error",""),Xe(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Xe(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Xe(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Xe(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Xe(e,"cordova-not-ready","Cordova framework is not ready."),Xe(e,"cors-unsupported","This browser is not supported."),Xe(e,"credential-already-in-use","This credential is already associated with a different user account."),Xe(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Xe(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Xe(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Xe(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Xe(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Xe(e,"email-already-in-use","The email address is already in use by another account."),Xe(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Xe(e,"expired-action-code","The action code has expired."),Xe(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Xe(e,"internal-error","An internal AuthError has occurred."),Xe(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Xe(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Xe(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Xe(e,"invalid-auth-event","An internal AuthError has occurred."),Xe(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Xe(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Xe(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Xe(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Xe(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Xe(e,"invalid-email","The email address is badly formatted."),Xe(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Xe(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Xe(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Xe(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Xe(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Xe(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Xe(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Xe(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Xe(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Xe(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Xe(e,"wrong-password","The password is invalid or the user does not have a password."),Xe(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Xe(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Xe(e,"invalid-provider-id","The specified provider ID is invalid."),Xe(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Xe(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Xe(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Xe(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Xe(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),Xe(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Xe(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Xe(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Xe(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Xe(e,"missing-continue-uri","A continue URL must be provided in the request."),Xe(e,"missing-iframe-start","An internal AuthError has occurred."),Xe(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Xe(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Xe(e,"missing-password","A non-empty password must be provided"),Xe(e,"missing-multi-factor-info","No second factor identifier is provided."),Xe(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Xe(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Xe(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Xe(e,"app-deleted","This instance of FirebaseApp has been deleted."),Xe(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Xe(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Xe(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Xe(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Xe(e,"no-auth-event","An internal AuthError has occurred."),Xe(e,"no-such-provider","User was not linked to an account with the given provider."),Xe(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Xe(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Xe(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Xe(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Xe(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Xe(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Xe(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Xe(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Xe(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Xe(e,"rejected-credential","The request contains malformed or mismatching credentials."),Xe(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Xe(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Xe(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Xe(e,"timeout","The operation has timed out."),Xe(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Xe(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Xe(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Xe(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Xe(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Xe(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Xe(e,"unverified-email","The operation requires a verified email."),Xe(e,"user-cancelled","The user did not grant your application the permissions it requested."),Xe(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Xe(e,"user-disabled","The user account has been disabled by an administrator."),Xe(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Xe(e,"user-signed-out",""),Xe(e,"weak-password","The password must be 6 characters long or more."),Xe(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Xe(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),Xe(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),Xe(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),Xe(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),Xe(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),Xe(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),Xe(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),Xe(e,"invalid-req-type","Invalid request parameters."),Xe(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),Xe(e,"unsupported-password-policy-schema-version","The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK."),Xe(e,"password-does-not-meet-requirements","The password does not meet the requirements."),e},hu=lu,du=new ra("auth","Firebase",lu()),pu=new Na("@firebase/auth");function vu(e){if(pu.logLevel<=Sa.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];pu.warn.apply(pu,["Auth (".concat(yo,"): ").concat(e)].concat(n))}}function mu(e){if(pu.logLevel<=Sa.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];pu.error.apply(pu,["Auth (".concat(yo,"): ").concat(e)].concat(n))}}function yu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw wu.apply(void 0,[e].concat(n))}function gu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return wu.apply(void 0,[e].concat(n))}function ku(e,t,n){var r=Object.assign(Object.assign({},hu()),Xe({},t,n));return new ra("auth","Firebase",r).create(t,{appName:e.name})}function bu(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&yu(e,"argument-error"),ku(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function wu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=m(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(m(o)))}return du.create.apply(du,[e].concat(n))}function _u(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw wu.apply(void 0,[t].concat(r))}}function xu(e){var t="INTERNAL ASSERTION FAILED: "+e;throw mu(t),new Error(t)}function Su(e,t){e||xu(t)}function Iu(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Eu(){return"http:"===Tu()||"https:"===Tu()}function Tu(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Cu=function(){function e(t,n){Ai(this,e),this.shortDelay=t,this.longDelay=n,Su(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xi())||Zi()}return Ni(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Eu()||Ji()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Au(e,t){Su(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Ru=function(){function e(){Ai(this,e)}return Ni(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void xu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void xu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void xu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Nu=(Xe(Zo={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Xe(Zo,"MISSING_CUSTOM_TOKEN","internal-error"),Xe(Zo,"INVALID_IDENTIFIER","invalid-email"),Xe(Zo,"MISSING_CONTINUE_URI","internal-error"),Xe(Zo,"INVALID_PASSWORD","wrong-password"),Xe(Zo,"MISSING_PASSWORD","missing-password"),Xe(Zo,"EMAIL_EXISTS","email-already-in-use"),Xe(Zo,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Xe(Zo,"INVALID_IDP_RESPONSE","invalid-credential"),Xe(Zo,"INVALID_PENDING_TOKEN","invalid-credential"),Xe(Zo,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Xe(Zo,"MISSING_REQ_TYPE","internal-error"),Xe(Zo,"EMAIL_NOT_FOUND","user-not-found"),Xe(Zo,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Xe(Zo,"EXPIRED_OOB_CODE","expired-action-code"),Xe(Zo,"INVALID_OOB_CODE","invalid-action-code"),Xe(Zo,"MISSING_OOB_CODE","internal-error"),Xe(Zo,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Xe(Zo,"INVALID_ID_TOKEN","invalid-user-token"),Xe(Zo,"TOKEN_EXPIRED","user-token-expired"),Xe(Zo,"USER_NOT_FOUND","user-token-expired"),Xe(Zo,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Xe(Zo,"PASSWORD_DOES_NOT_MEET_REQUIREMENTS","password-does-not-meet-requirements"),Xe(Zo,"INVALID_CODE","invalid-verification-code"),Xe(Zo,"INVALID_SESSION_INFO","invalid-verification-id"),Xe(Zo,"INVALID_TEMPORARY_PROOF","invalid-credential"),Xe(Zo,"MISSING_SESSION_INFO","missing-verification-id"),Xe(Zo,"SESSION_EXPIRED","code-expired"),Xe(Zo,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Xe(Zo,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Xe(Zo,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Xe(Zo,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Xe(Zo,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Xe(Zo,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Xe(Zo,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Xe(Zo,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Xe(Zo,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Xe(Zo,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Xe(Zo,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Xe(Zo,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),Xe(Zo,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),Xe(Zo,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),Xe(Zo,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),Xe(Zo,"MISSING_CLIENT_TYPE","missing-client-type"),Xe(Zo,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),Xe(Zo,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),Xe(Zo,"INVALID_REQ_TYPE","invalid-req-type"),Zo),Pu=new Cu(3e4,6e4);function Ou(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Du(e,t,n,r){return Lu.apply(this,arguments)}function Lu(){return Lu=ga(ma().mark((function e(t,n,r,i){var a,o=arguments;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Mu(t,a,ga(ma().mark((function e(){var a,o,u,s;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=ca(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Ru.fetch()(zu(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Lu.apply(this,arguments)}function Mu(e,t,n){return Fu.apply(this,arguments)}function Fu(){return Fu=ga(ma().mark((function e(t,n,r){var i,a,o,u,s,l,f,h,d,p;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Nu),n),e.prev=2,a=new ju(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Bu(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,l=s.split(" : "),f=c(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw Bu(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw Bu(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw Bu(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw ku(t,p,d);case 34:yu(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof na)){e.next=41;break}throw e.t0;case 41:yu(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Fu.apply(this,arguments)}function Uu(e,t,n,r){return Vu.apply(this,arguments)}function Vu(){return Vu=ga(ma().mark((function e(t,n,r,i){var a,o,u=arguments;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Du(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&yu(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Vu.apply(this,arguments)}function zu(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Au(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var ju=function(){function e(t){var n=this;Ai(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(gu(n.auth,"network-request-failed"))}),Pu.get())}))}return Ni(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Bu(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=gu(e,t,r);return i.customData._tokenResponse=n,i}function qu(e){return Ku.apply(this,arguments)}function Ku(){return Ku=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Du(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Ku.apply(this,arguments)}function Gu(e,t){return Hu.apply(this,arguments)}function Hu(){return Hu=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Du(t,"GET","/v2/recaptchaConfig",Ou(t,n)));case 1:case"end":return e.stop()}}),e)}))),Hu.apply(this,arguments)}function Wu(e,t){return Qu.apply(this,arguments)}function Qu(){return Qu=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Du(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Qu.apply(this,arguments)}function Yu(e,t){return Xu.apply(this,arguments)}function Xu(){return Xu=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Du(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Xu.apply(this,arguments)}function $u(e,t){return Ju.apply(this,arguments)}function Ju(){return Ju=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Du(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Ju.apply(this,arguments)}function Zu(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function es(){return es=ga(ma().mark((function e(t){var n,r,i,a,o,u,s=arguments;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=va(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,_u((a=ns(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Zu(ts(a.auth_time)),issuedAtTime:Zu(ts(a.iat)),expirationTime:Zu(ts(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),es.apply(this,arguments)}function ts(e){return 1e3*Number(e)}function ns(e){var t=c(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return mu("JWT malformed, contained fewer than 3 sections"),null;try{var a=qi(r);return a?JSON.parse(a):(mu("Failed to decode base64 JWT payload"),null)}catch(o){return mu("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function rs(e,t){return is.apply(this,arguments)}function is(){return is=ga(ma().mark((function e(t,n){var r=arguments;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof na&&as(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),is.apply(this,arguments)}function as(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var os=function(){function e(t){Ai(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Ni(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(ga(ma().mark((function t(){return ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),us=function(){function e(t,n){Ai(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Ni(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Zu(this.lastLoginAt),this.creationTime=Zu(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function ss(e){return cs.apply(this,arguments)}function cs(){return cs=ga(ma().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,rs(t,$u(r,{idToken:i}));case 6:_u(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=Jo(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=fs(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new us(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),cs.apply(this,arguments)}function ls(){return(ls=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=va(t),e.next=3,ss(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fs(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(m(n),m(t))}function hs(e,t){return ds.apply(this,arguments)}function ds(){return ds=ga(ma().mark((function e(t,n){var r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mu(t,{},ga(ma().mark((function e(){var r,i,a,o,u,s;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ca({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=zu(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Ru.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),ds.apply(this,arguments)}var ps=function(){function e(){Ai(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Ni(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){_u(e.idToken,"internal-error"),_u("undefined"!==typeof e.idToken,"internal-error"),_u("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=ns(e);return _u(t,"internal-error"),_u("undefined"!==typeof t.exp,"internal-error"),_u("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=ga(ma().mark((function e(t){var n,r=arguments;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],_u(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=ga(ma().mark((function e(t,n){var r,i,a,o;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hs(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return xu("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(_u("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(_u("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(_u("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function vs(e,t){_u("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var ms=function(){function e(t){Ai(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Jo(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new os(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?m(a.providerData):[],this.metadata=new us(a.createdAt||void 0,a.lastLoginAt||void 0)}return Ni(e,[{key:"getIdToken",value:function(){var e=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rs(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(_u(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return es.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return ls.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(_u(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){_u(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=ga(ma().mark((function e(t){var n,r,i=arguments;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,ss(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=ga(ma().mark((function e(){var t;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,rs(this,Wu(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;_u(k&&x,t,"internal-error");var S=ps.fromJSON(this.name,x);_u("string"===typeof k,t,"internal-error"),vs(f,t.name),vs(h,t.name),_u("boolean"===typeof b,t,"internal-error"),_u("boolean"===typeof w,t,"internal-error"),vs(d,t.name),vs(p,t.name),vs(v,t.name),vs(m,t.name),vs(y,t.name),vs(g,t.name);var I=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:S,createdAt:y,lastLoginAt:g});return _&&Array.isArray(_)&&(I.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(I._redirectEventId=m),I}},{key:"_fromIdTokenResponse",value:function(){var t=ga(ma().mark((function t(n,r){var i,a,o,u=arguments;return ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new ps).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,ss(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),ys=new Map;function gs(e){Su(e instanceof Function,"Expected a class definition");var t=ys.get(e);return t?(Su(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ys.set(e,t),t)}var ks=function(){function e(){Ai(this,e),this.type="NONE",this.storage={}}return Ni(e,[{key:"_isAvailable",value:function(){var e=ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();ks.type="NONE";var bs=ks;function ws(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var _s=function(){function e(t,n,r){Ai(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=ws(this.userKey,a.apiKey,o),this.fullPersistenceKey=ws("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Ni(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=ga(ma().mark((function e(){var t;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?ms._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=ga(ma().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(gs(bs),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||gs(bs),u=ws(i,n.config.apiKey,n.name),s=null,c=Pi(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=ms._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function xs(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ts(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ss(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(As(t))return"Blackberry";if(Rs(t))return"Webos";if(Is(t))return"Safari";if((t.includes("chrome/")||Es(t))&&!t.includes("edge/"))return"Chrome";if(Cs(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Ss(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xi();return/firefox\//i.test(e)}function Is(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xi()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Es(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xi();return/crios\//i.test(e)}function Ts(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xi();return/iemobile/i.test(e)}function Cs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xi();return/android/i.test(e)}function As(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xi();return/blackberry/i.test(e)}function Rs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xi();return/webos/i.test(e)}function Ns(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xi();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ps(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xi();return Ns(e)||Cs(e)||Rs(e)||As(e)||/windows phone/i.test(e)||Ts(e)}function Os(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=xs(Xi());break;case"Worker":t="".concat(xs(Xi()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(yo,"/").concat(r)}var Ds=function(){function e(t){Ai(this,e),this.auth=t,this.queue=[]}return Ni(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=ga(ma().mark((function e(t){var n,r,i,a,o,u,s;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=Pi(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=Pi(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Ls(e){return Ms.apply(this,arguments)}function Ms(){return Ms=ga(ma().mark((function e(t){var n,r=arguments;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Du(t,"GET","/v2/passwordPolicy",Ou(t,n)));case 2:case"end":return e.stop()}}),e)}))),Ms.apply(this,arguments)}var Fs=function(){function e(t){var n,r,i,a;Ai(this,e);var o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(n=o.minPasswordLength)&&void 0!==n?n:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=t.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(a=t.forceUpgradeOnSignin)&&void 0!==a&&a,this.schemaVersion=t.schemaVersion}return Ni(e,[{key:"validatePassword",value:function(e){var t,n,r,i,a,o,u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=null===(t=u.meetsMinPasswordLength)||void 0===t||t),u.isValid&&(u.isValid=null===(n=u.meetsMaxPasswordLength)||void 0===n||n),u.isValid&&(u.isValid=null===(r=u.containsLowercaseLetter)||void 0===r||r),u.isValid&&(u.isValid=null===(i=u.containsUppercaseLetter)||void 0===i||i),u.isValid&&(u.isValid=null===(a=u.containsNumericCharacter)||void 0===a||a),u.isValid&&(u.isValid=null===(o=u.containsNonAlphanumericCharacter)||void 0===o||o),u}},{key:"validatePasswordLengthOptions",value:function(e,t){var n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}},{key:"validatePasswordCharacterOptions",value:function(e,t){var n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(var r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}},{key:"updatePasswordCharacterOptionsStatuses",value:function(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}]),e}(),Us=function(){function e(t,n,r,i){Ai(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zs(this),this.idTokenSubscription=new zs(this),this.beforeStateQueue=new Ds(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=du,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return Ni(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=gs(t)),this._initializationPromise=this.queue(ga(ma().mark((function r(){var i,a;return ma().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,_s.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=ga(ma().mark((function e(){var t;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=ga(ma().mark((function e(t){var n,r,i,a,o,u,s;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return _u(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ss(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?va(t):null)&&_u(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=ga(ma().mark((function e(t){var n,r=this,i=arguments;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&_u(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(ga(ma().mark((function n(){return ma().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(gs(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"validatePassword",value:function(){var e=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._getPasswordPolicyInternal()){e.next=3;break}return e.next=3,this._updatePasswordPolicy();case 3:if((n=this._getPasswordPolicyInternal()).schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION){e.next=6;break}return e.abrupt("return",Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})));case 6:return e.abrupt("return",n.validatePassword(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getPasswordPolicyInternal",value:function(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}},{key:"_updatePasswordPolicy",value:function(){var e=ga(ma().mark((function e(){var t,n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ls(this);case 2:t=e.sent,n=new Fs(t),null===this.tenantId?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new ra("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"authStateReady",value:function(){var e=this;return new Promise((function(t,n){if(e.currentUser)t();else var r=e.onAuthStateChanged((function(){r(),t()}),n)}))}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=ga(ma().mark((function e(t,n){var r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return _u(n=t&&gs(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,_s.create(this,[gs(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=ga(ma().mark((function e(t){var n,r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=ga(ma().mark((function e(t){var n=this;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(_u(u,this,"internal-error"),u.then((function(){o||a(i.currentUser)})),"function"===typeof t){var s=e.addObserver(t,n,r);return function(){o=!0,s()}}var c=e.addObserver(t);return function(){o=!0,c()}}},{key:"directlySetCurrentUser",value:function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return _u(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Os(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=ga(ma().mark((function e(){var t,n,r,i;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Xe({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=ga(ma().mark((function e(){var t,n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&vu("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Vs(e){return va(e)}var zs=function(){function e(t){var n=this;Ai(this,e),this.auth=t,this.observer=null,this.addObserver=ha((function(e){return n.observer=e}))}return Ni(e,[{key:"next",get:function(){return _u(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function js(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=gu("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Bs(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var qs=function(){function e(t){Ai(this,e),this.type="recaptcha-enterprise",this.auth=Vs(t)}return Ni(e,[{key:"verify",value:function(){var e=ga(ma().mark((function e(){var t,n,r,i,a,o=this,u=arguments;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;su(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=ga(ma().mark((function e(n,r){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Gu(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new cu(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=u.length>0&&void 0!==u[0]?u[0]:"verify",n=u.length>1&&void 0!==u[1]&&u[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&su(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));js("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ks(e,t,n){return Gs.apply(this,arguments)}function Gs(){return Gs=ga(ma().mark((function e(t,n,r){var i,a,o,u,s=arguments;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>3&&void 0!==s[3]&&s[3],a=new qs(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return u=Object.assign({},n),i?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),Gs.apply(this,arguments)}function Hs(e,t,n){var r=Vs(e);_u(r._canInitEmulator,r,"emulator-config-failed"),_u(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Ws(t),o=function(e){var t=Ws(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Qs(r.substr(a.length+1))}}var o=c(r.split(":"),2);return{host:o[0],port:Qs(o[1])}}(t),u=o.host,s=o.port,l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ws(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Qs(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Ys=function(){function e(t,n){Ai(this,e),this.providerId=t,this.signInMethod=n}return Ni(e,[{key:"toJSON",value:function(){return xu("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return xu("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return xu("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return xu("not implemented")}}]),e}();function Xs(e,t){return $s.apply(this,arguments)}function $s(){return $s=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Du(t,"POST","/v1/accounts:resetPassword",Ou(t,n)));case 1:case"end":return e.stop()}}),e)}))),$s.apply(this,arguments)}function Js(e,t){return Zs.apply(this,arguments)}function Zs(){return Zs=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Du(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Zs.apply(this,arguments)}function ec(e,t){return tc.apply(this,arguments)}function tc(){return tc=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Du(t,"POST","/v1/accounts:update",Ou(t,n)));case 1:case"end":return e.stop()}}),e)}))),tc.apply(this,arguments)}function nc(e,t){return rc.apply(this,arguments)}function rc(){return rc=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uu(t,"POST","/v1/accounts:signInWithPassword",Ou(t,n)));case 1:case"end":return e.stop()}}),e)}))),rc.apply(this,arguments)}function ic(e,t){return ac.apply(this,arguments)}function ac(){return ac=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Du(t,"POST","/v1/accounts:sendOobCode",Ou(t,n)));case 1:case"end":return e.stop()}}),e)}))),ac.apply(this,arguments)}function oc(e,t){return uc.apply(this,arguments)}function uc(){return uc=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ic(t,n));case 1:case"end":return e.stop()}}),e)}))),uc.apply(this,arguments)}function sc(e,t){return cc.apply(this,arguments)}function cc(){return cc=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ic(t,n));case 1:case"end":return e.stop()}}),e)}))),cc.apply(this,arguments)}function lc(e,t){return fc.apply(this,arguments)}function fc(){return fc=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ic(t,n));case 1:case"end":return e.stop()}}),e)}))),fc.apply(this,arguments)}function hc(e,t){return dc.apply(this,arguments)}function dc(){return dc=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ic(t,n));case 1:case"end":return e.stop()}}),e)}))),dc.apply(this,arguments)}function pc(e,t){return vc.apply(this,arguments)}function vc(){return vc=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uu(t,"POST","/v1/accounts:signInWithEmailLink",Ou(t,n)));case 1:case"end":return e.stop()}}),e)}))),vc.apply(this,arguments)}function mc(e,t){return yc.apply(this,arguments)}function yc(){return yc=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uu(t,"POST","/v1/accounts:signInWithEmailLink",Ou(t,n)));case 1:case"end":return e.stop()}}),e)}))),yc.apply(this,arguments)}var gc=function(e){Oi(n,e);var t=Mi(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Ai(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return Ni(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=ga(ma().mark((function e(t){var n,r,i;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,Ks(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",nc(t,i));case 11:return e.abrupt("return",nc(t,r).catch(function(){var e=ga(ma().mark((function e(n){var i;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Ks(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",nc(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",pc(t,{email:this._email,oobCode:this._password}));case 13:yu(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Js(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",mc(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:yu(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Ys);function kc(e,t){return bc.apply(this,arguments)}function bc(){return bc=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uu(t,"POST","/v1/accounts:signInWithIdp",Ou(t,n)));case 1:case"end":return e.stop()}}),e)}))),bc.apply(this,arguments)}var wc=function(e){Oi(n,e);var t=Mi(n);function n(){var e;return Ai(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Ni(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return kc(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,kc(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,kc(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ca(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):yu("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Jo(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Ys);function _c(e,t){return xc.apply(this,arguments)}function xc(){return xc=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Du(t,"POST","/v1/accounts:sendVerificationCode",Ou(t,n)));case 1:case"end":return e.stop()}}),e)}))),xc.apply(this,arguments)}function Sc(){return Sc=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uu(t,"POST","/v1/accounts:signInWithPhoneNumber",Ou(t,n)));case 1:case"end":return e.stop()}}),e)}))),Sc.apply(this,arguments)}function Ic(){return Ic=ga(ma().mark((function e(t,n){var r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uu(t,"POST","/v1/accounts:signInWithPhoneNumber",Ou(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Bu(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Ic.apply(this,arguments)}var Ec=Xe({},"USER_NOT_FOUND","user-not-found");function Tc(){return Tc=ga(ma().mark((function e(t,n){var r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Uu(t,"POST","/v1/accounts:signInWithPhoneNumber",Ou(t,r),Ec));case 2:case"end":return e.stop()}}),e)}))),Tc.apply(this,arguments)}var Cc=function(e){Oi(n,e);var t=Mi(n);function n(e){var r;return Ai(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Ni(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Sc.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Ic.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Tc.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Ys);var Ac=function(){function e(t){var n,r,i,a,o,u;Ai(this,e);var s=la(fa(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);_u(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return Ni(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=la(fa(e)).link,n=t?la(fa(t)).deep_link_id:null,r=la(fa(e)).deep_link_id;return(r?la(fa(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var Rc=function(){function e(){Ai(this,e),this.providerId=e.PROVIDER_ID}return Ni(e,null,[{key:"credential",value:function(e,t){return gc._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Ac.parseLink(t);return _u(n,"argument-error"),gc._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Rc.PROVIDER_ID="password",Rc.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Rc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Nc=function(){function e(t){Ai(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Ni(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Pc=function(e){Oi(n,e);var t=Mi(n);function n(){var e;return Ai(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Ni(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return m(this.scopes)}}]),n}(Nc),Oc=function(e){Oi(n,e);var t=Mi(n);function n(){return Ai(this,n),t.apply(this,arguments)}return Ni(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return _u(e.idToken||e.accessToken,"argument-error"),wc._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return _u("providerId"in t&&"signInMethod"in t,"argument-error"),wc._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Pc),Dc=function(e){Oi(n,e);var t=Mi(n);function n(){return Ai(this,n),t.call(this,"facebook.com")}return Ni(n,null,[{key:"credential",value:function(e){return wc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Pc);Dc.FACEBOOK_SIGN_IN_METHOD="facebook.com",Dc.PROVIDER_ID="facebook.com";var Lc=function(e){Oi(n,e);var t=Mi(n);function n(){var e;return Ai(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Ni(n,null,[{key:"credential",value:function(e,t){return wc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(Pc);Lc.GOOGLE_SIGN_IN_METHOD="google.com",Lc.PROVIDER_ID="google.com";var Mc=function(e){Oi(n,e);var t=Mi(n);function n(){return Ai(this,n),t.call(this,"github.com")}return Ni(n,null,[{key:"credential",value:function(e){return wc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Pc);Mc.GITHUB_SIGN_IN_METHOD="github.com",Mc.PROVIDER_ID="github.com";var Fc=function(e){Oi(n,e);var t=Mi(n);function n(e,r){var i;return Ai(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return Ni(n,[{key:"_getIdTokenResponse",value:function(e){return kc(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,kc(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,kc(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Ys),Uc=function(e){Oi(n,e);var t=Mi(n);function n(e){return Ai(this,n),_u(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Ni(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Fc.fromJSON(e);return _u(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Fc._create(r,n)}catch(i){return null}}}]),n}(Nc),Vc=function(e){Oi(n,e);var t=Mi(n);function n(){return Ai(this,n),t.call(this,"twitter.com")}return Ni(n,null,[{key:"credential",value:function(e,t){return wc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(Pc);function zc(e,t){return jc.apply(this,arguments)}function jc(){return jc=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uu(t,"POST","/v1/accounts:signUp",Ou(t,n)));case 1:case"end":return e.stop()}}),e)}))),jc.apply(this,arguments)}Vc.TWITTER_SIGN_IN_METHOD="twitter.com",Vc.PROVIDER_ID="twitter.com";var Bc=function(){function e(t){Ai(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Ni(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=ga(ma().mark((function t(n,r,i){var a,o,u,s,c=arguments;return ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,ms._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=qc(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=ga(ma().mark((function t(n,r,i){var a;return ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=qc(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function qc(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Kc(){return Kc=ga(ma().mark((function e(t){var n,r,i,a;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vs(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Bc({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,zc(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Bc._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Kc.apply(this,arguments)}var Gc=function(e){Oi(n,e);var t=Mi(n);function n(e,r,i,a){var o,u;return Ai(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(Fr(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return Ni(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(na);function Hc(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Gc._fromErrorAndOperation(e,n,t,r);throw n}))}function Wc(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Qc(e,t){return Yc.apply(this,arguments)}function Yc(){return Yc=ga(ma().mark((function e(t,n){var r,i,a,o;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=va(t),e.next=3,Jc(!0,r,n);case 3:return e.t0=Yu,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Wc(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Yc.apply(this,arguments)}function Xc(e,t){return $c.apply(this,arguments)}function $c(){return $c=ga(ma().mark((function e(t,n){var r,i,a=arguments;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=rs,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Bc._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),$c.apply(this,arguments)}function Jc(e,t,n){return Zc.apply(this,arguments)}function Zc(){return Zc=ga(ma().mark((function e(t,n,r){var i,a;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ss(n);case 2:i=Wc(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",_u(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)}))),Zc.apply(this,arguments)}function el(e,t){return tl.apply(this,arguments)}function tl(){return tl=ga(ma().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,rs(t,Hc(i,a,n,t),r);case 6:return _u((o=e.sent).idToken,i,"internal-error"),_u(u=ns(o.idToken),i,"internal-error"),s=u.sub,_u(t.uid===s,i,"user-mismatch"),e.abrupt("return",Bc._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&yu(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),tl.apply(this,arguments)}function nl(e,t){return rl.apply(this,arguments)}function rl(){return rl=ga(ma().mark((function e(t,n){var r,i,a,o,u=arguments;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Hc(t,i,n);case 4:return a=e.sent,e.next=7,Bc._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),rl.apply(this,arguments)}function il(e,t){return al.apply(this,arguments)}function al(){return al=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nl(Vs(t),n));case 1:case"end":return e.stop()}}),e)}))),al.apply(this,arguments)}function ol(e,t){return ul.apply(this,arguments)}function ul(){return(ul=ga(ma().mark((function e(t,n){var r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=va(t),e.next=3,Jc(!1,r,n.providerId);case 3:return e.abrupt("return",Xc(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sl(e,t){return cl.apply(this,arguments)}function cl(){return(cl=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",el(va(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ll(e,t){return fl.apply(this,arguments)}function fl(){return fl=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uu(t,"POST","/v1/accounts:signInWithCustomToken",Ou(t,n)));case 1:case"end":return e.stop()}}),e)}))),fl.apply(this,arguments)}function hl(){return hl=ga(ma().mark((function e(t,n){var r,i,a;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vs(t),e.next=3,ll(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Bc._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),hl.apply(this,arguments)}var dl=function(){function e(t,n){Ai(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Ni(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?pl._fromServerResponse(e,t):"totpInfo"in t?vl._fromServerResponse(e,t):yu(e,"internal-error")}}]),e}(),pl=function(e){Oi(n,e);var t=Mi(n);function n(e){var r;return Ai(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return Ni(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(dl),vl=function(e){Oi(n,e);var t=Mi(n);function n(e){return Ai(this,n),t.call(this,"totp",e)}return Ni(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(dl);function ml(e,t,n){var r;_u((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),_u("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(_u(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(_u(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function yl(e){return gl.apply(this,arguments)}function gl(){return gl=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=Vs(t))._getPasswordPolicyInternal()){e.next=4;break}return e.next=4,n._updatePasswordPolicy();case 4:case"end":return e.stop()}}),e)}))),gl.apply(this,arguments)}function kl(){return kl=ga(ma().mark((function e(t,n,r){var i,a,o,u;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Vs(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,Ks(a,o,"getOobCode",!0);case 5:return u=e.sent,r&&ml(a,u,r),e.next=9,sc(a,u);case 9:e.next=14;break;case 11:return r&&ml(a,o,r),e.next=14,sc(a,o).catch(function(){var e=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,Ks(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&ml(a,n,r),e.next=8,sc(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),kl.apply(this,arguments)}function bl(){return bl=ga(ma().mark((function e(t,n,r){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xs(va(t),{oobCode:n,newPassword:r}).catch(function(){var e=ga(ma().mark((function e(n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw n.code==="auth/".concat("password-does-not-meet-requirements")&&yl(t),n;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),bl.apply(this,arguments)}function wl(){return wl=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ec(va(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),wl.apply(this,arguments)}function _l(e,t){return xl.apply(this,arguments)}function xl(){return xl=ga(ma().mark((function e(t,n){var r,i,a,o;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=va(t),e.next=3,Xs(r,{oobCode:n});case 3:i=e.sent,_u(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return _u(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:_u(i.mfaInfo,r,"internal-error");case 13:_u(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=dl._fromServerResponse(Vs(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),xl.apply(this,arguments)}function Sl(){return Sl=ga(ma().mark((function e(t,n){var r,i;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_l(va(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Sl.apply(this,arguments)}function Il(e,t,n){return El.apply(this,arguments)}function El(){return El=ga(ma().mark((function e(t,n,r){var i,a,o,u,s,c,l;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Vs(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,Ks(a,o,"signUpPassword");case 5:s=e.sent,u=zc(a,s),e.next=10;break;case 9:u=zc(a,o).catch(function(){var e=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=6;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,Ks(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",zc(a,n));case 6:throw t;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,u.catch((function(e){throw e.code==="auth/".concat("password-does-not-meet-requirements")&&yl(t),e}));case 12:return c=e.sent,e.next=15,Bc._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),El.apply(this,arguments)}function Tl(){return Tl=ga(ma().mark((function e(t,n,r){var i,a,o,u,s;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(e,t){_u(t.handleCodeInApp,a,"argument-error"),t&&ml(a,e,t)},a=Vs(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,Ks(a,o,"getOobCode",!0);case 6:return s=e.sent,u(s,r),e.next=10,lc(a,s);case 10:e.next=15;break;case 12:return u(o,r),e.next=15,lc(a,o).catch(function(){var e=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Ks(a,o,"getOobCode",!0);case 4:return n=e.sent,u(n,r),e.next=8,lc(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),Tl.apply(this,arguments)}function Cl(){return Cl=ga(ma().mark((function e(t,n,r){var i,a;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=va(t),_u((a=Rc.credentialWithLink(n,r||Iu()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",il(i,a));case 4:case"end":return e.stop()}}),e)}))),Cl.apply(this,arguments)}function Al(e,t){return Rl.apply(this,arguments)}function Rl(){return Rl=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Du(t,"POST","/v1/accounts:createAuthUri",Ou(t,n)));case 1:case"end":return e.stop()}}),e)}))),Rl.apply(this,arguments)}function Nl(){return Nl=ga(ma().mark((function e(t,n){var r,i,a,o;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Eu()?Iu():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Al(va(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Nl.apply(this,arguments)}function Pl(){return(Pl=ga(ma().mark((function e(t,n){var r,i,a,o;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=va(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&ml(r.auth,a,n),e.next=8,oc(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ol(){return(Ol=ga(ma().mark((function e(t,n,r){var i,a,o,u;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=va(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&ml(i.auth,o,r),e.next=8,hc(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dl(e,t){return Ll.apply(this,arguments)}function Ll(){return Ll=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Du(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Ll.apply(this,arguments)}function Ml(){return(Ml=ga(ma().mark((function e(t,n){var r,i,a,o,u,s,c;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=va(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,rs(a,Dl(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fl(e,t,n){return Ul.apply(this,arguments)}function Ul(){return Ul=ga(ma().mark((function e(t,n,r){var i,a,o,u;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,rs(t,Js(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),Ul.apply(this,arguments)}var Vl=Ni((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ai(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),zl=function(e){Oi(n,e);var t=Mi(n);function n(e,r,i,a){var o;return Ai(this,n),(o=t.call(this,e,r,i)).username=a,o}return Ni(n)}(Vl),jl=function(e){Oi(n,e);var t=Mi(n);function n(e,r){return Ai(this,n),t.call(this,e,"facebook.com",r)}return Ni(n)}(Vl),Bl=function(e){Oi(n,e);var t=Mi(n);function n(e,r){return Ai(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return Ni(n)}(zl),ql=function(e){Oi(n,e);var t=Mi(n);function n(e,r){return Ai(this,n),t.call(this,e,"google.com",r)}return Ni(n)}(Vl),Kl=function(e){Oi(n,e);var t=Mi(n);function n(e,r,i){return Ai(this,n),t.call(this,e,"twitter.com",r,i)}return Ni(n)}(zl);function Gl(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=ns(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Vl(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new jl(a,i);case"github.com":return new Bl(a,i);case"google.com":return new ql(a,i);case"twitter.com":return new Kl(a,i,e.screenName||null);case"custom":case"anonymous":return new Vl(a,null);default:return new Vl(a,r,i)}}(n)}var Hl=function(){function e(t,n,r){Ai(this,e),this.type=t,this.credential=n,this.user=r}return Ni(e,[{key:"toJSON",value:function(){return{multiFactorSession:Xe({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Wl=function(){function e(t,n,r){Ai(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Ni(e,[{key:"resolveSignIn",value:function(){var e=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Vs(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return dl._fromServerResponse(r,e)}));_u(i.mfaPendingCredential,r,"internal-error");var o=Hl._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=ga(ma().mark((function e(t){var a,u,s;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Bc._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return _u(n.user,r,"internal-error"),e.abrupt("return",Bc._forOperation(n.user,n.operationType,u));case 17:yu(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Ql(e,t){return Du(e,"POST","/v2/accounts/mfaEnrollment:start",Ou(e,t))}function Yl(e,t){return Du(e,"POST","/v2/accounts/mfaEnrollment:start",Ou(e,t))}function Xl(e,t){return Du(e,"POST","/v2/accounts/mfaEnrollment:finalize",Ou(e,t))}function $l(e,t){return Du(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Ou(e,t))}var Jl=function(){function e(t){var n=this;Ai(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return dl._fromServerResponse(t.auth,e)})))}))}return Ni(e,[{key:"getSession",value:function(){var e=ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Hl,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=ga(ma().mark((function e(t,n){var r,i,a;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,rs(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=ga(ma().mark((function e(t){var n,r,i;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,rs(this.user,$l(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Zl=new WeakMap;var ef="__sak",tf=function(){function e(t,n){Ai(this,e),this.storageRetriever=t,this.type=n}return Ni(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(ef,"1"),this.storage.removeItem(ef),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var nf=function(e){Oi(n,e);var t=Mi(n);function n(){var e;return Ai(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Xi();return Is(e)||Ns(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Ps(),e._shouldAllowMigration=!0,e}return Ni(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);ea()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=ga(ma().mark((function e(t,r){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$o(Di(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ga(ma().mark((function e(t){var r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$o(Di(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$o(Di(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(tf);nf.type="LOCAL";var rf=nf,af=function(e){Oi(n,e);var t=Mi(n);function n(){return Ai(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Ni(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(tf);af.type="SESSION";var of=af;function uf(e){return Promise.all(e.map(function(){var e=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var sf=function(){function e(t){Ai(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Ni(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=ga(ma().mark((function e(t){var n,r,i,a,o,u,s,c;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,uf(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function cf(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}sf.receivers=[];var lf=function(){function e(t){Ai(this,e),this.target=t,this.handlers=new Set}return Ni(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=ga(ma().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=cf("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function ff(){return window}function hf(e){ff().location.href=e}function df(){return"undefined"!==typeof ff().WorkerGlobalScope&&"function"===typeof ff().importScripts}function pf(){return vf.apply(this,arguments)}function vf(){return(vf=ga(ma().mark((function e(){var t;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function mf(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var yf="firebaseLocalStorageDb",gf="firebaseLocalStorage",kf="fbase_key",bf=function(){function e(t){Ai(this,e),this.request=t}return Ni(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function wf(e,t){return e.transaction([gf],t?"readwrite":"readonly").objectStore(gf)}function _f(){var e=indexedDB.deleteDatabase(yf);return new bf(e).toPromise()}function xf(){var e=indexedDB.open(yf,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(gf,{keyPath:kf})}catch(r){n(r)}})),e.addEventListener("success",ga(ma().mark((function n(){var r;return ma().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(gf)){n.next=12;break}return r.close(),n.next=5,_f();case 5:return n.t0=t,n.next=8,xf();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Sf(e,t,n){return If.apply(this,arguments)}function If(){return If=ga(ma().mark((function e(t,n,r){var i,a;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=wf(t,!0).put((Xe(i={},kf,n),Xe(i,"value",r),i)),e.abrupt("return",new bf(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),If.apply(this,arguments)}function Ef(e,t){return Tf.apply(this,arguments)}function Tf(){return Tf=ga(ma().mark((function e(t,n){var r,i;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wf(t,!1).get(n),e.next=3,new bf(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Tf.apply(this,arguments)}function Cf(e,t){var n=wf(e,!0).delete(t);return new bf(n).toPromise()}var Af=function(){function e(){Ai(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Ni(e,[{key:"_openDb",value:function(){var e=ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,xf();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=ga(ma().mark((function e(t){var n,r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",df()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=ga(ma().mark((function e(){var t=this;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=sf._getInstance(df()?self:null),this.receiver._subscribe("keyChanged",function(){var e=ga(ma().mark((function e(n,r){var i;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=ga(ma().mark((function e(){var t,n,r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pf();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new lf(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&mf()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=ga(ma().mark((function e(){var t;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,xf();case 5:return t=e.sent,e.next=8,Sf(t,ef,"1");case 8:return e.next=10,Cf(t,ef);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ga(ma().mark((function e(t,n){var r=this;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Sf(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Ef(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ga(ma().mark((function e(t){var n=this;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Cf(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=ga(ma().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=wf(e,!1).getAll();return new bf(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Pi(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(ga(ma().mark((function t(){return ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Af.type="LOCAL";var Rf=Af;function Nf(e,t){return Du(e,"POST","/v2/accounts/mfaSignIn:start",Ou(e,t))}function Pf(e,t){return Du(e,"POST","/v2/accounts/mfaSignIn:finalize",Ou(e,t))}var Of=1e12,Df=function(){function e(t){Ai(this,e),this.auth=t,this.counter=Of,this._widgets=new Map}return Ni(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Lf(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Of;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Of;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=ga(ma().mark((function e(t){var n,r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Of,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Lf=function(){function e(t,n,r){var i=this;Ai(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;_u(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Ni(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Mf=Bs("rcb"),Ff=new Cu(3e4,6e4),Uf=function(){function e(){var t;Ai(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=ff().grecaptcha)||void 0===t?void 0:t.render)}return Ni(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return _u(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&uu(ff().grecaptcha)?Promise.resolve(ff().grecaptcha):new Promise((function(r,i){var a=ff().setTimeout((function(){i(gu(e,"network-request-failed"))}),Ff.get());ff()[Mf]=function(){ff().clearTimeout(a),delete ff()[Mf];var o=ff().grecaptcha;if(o&&uu(o)){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(gu(e,"internal-error"))},js("".concat("https://www.google.com/recaptcha/api.js?","?").concat(ca({onload:Mf,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(gu(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=ff().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var Vf=function(){function e(){Ai(this,e)}return Ni(e,[{key:"load",value:function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Df(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),zf="recaptcha",jf={theme:"light",type:"image"},Bf=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},jf);Ai(this,e),this.parameters=r,this.type=zf,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Vs(t),this.isInvisible="invisible"===this.parameters.size,_u("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof n?document.getElementById(n):n;_u(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Vf:new Uf,this.validateStartingState()}return Ni(e,[{key:"verify",value:function(){var e=ga(ma().mark((function e(){var t,n,r,i=this;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){_u(!this.parameters.sitekey,this.auth,"argument-error"),_u(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),_u("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=ff()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){_u(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=ga(ma().mark((function e(){var t,n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=ga(ma().mark((function e(){var t;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _u(Eu()&&!df(),this.auth,"internal-error"),e.next=3,qf();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,qu(this.auth);case 8:_u(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return _u(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function qf(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Kf=function(){function e(t,n){Ai(this,e),this.verificationId=t,this.onConfirmation=n}return Ni(e,[{key:"confirm",value:function(e){var t=Cc._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Gf(){return Gf=ga(ma().mark((function e(t,n,r){var i,a;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Vs(t),e.next=3,Yf(i,n,va(r));case 3:return a=e.sent,e.abrupt("return",new Kf(a,(function(e){return il(i,e)})));case 5:case"end":return e.stop()}}),e)}))),Gf.apply(this,arguments)}function Hf(e,t,n){return Wf.apply(this,arguments)}function Wf(){return(Wf=ga(ma().mark((function e(t,n,r){var i,a;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=va(t),e.next=3,Jc(!1,i,"phone");case 3:return e.next=5,Yf(i.auth,n,va(r));case 5:return a=e.sent,e.abrupt("return",new Kf(a,(function(e){return ol(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qf(){return(Qf=ga(ma().mark((function e(t,n,r){var i,a;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=va(t),e.next=3,Yf(i.auth,n,va(r));case 3:return a=e.sent,e.abrupt("return",new Kf(a,(function(e){return sl(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yf(e,t,n){return Xf.apply(this,arguments)}function Xf(){return Xf=ga(ma().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,_u("string"===typeof a,t,"argument-error"),_u(r.type===zf,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return _u("enroll"===u.type,t,"internal-error"),e.next=13,Ql(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return _u("signin"===u.type,t,"internal-error"),_u(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Nf(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,_c(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Xf.apply(this,arguments)}function $f(){return($f=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xc(va(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Jf=function(){function e(t){Ai(this,e),this.providerId=e.PROVIDER_ID,this.auth=Vs(t)}return Ni(e,[{key:"verifyPhoneNumber",value:function(e,t){return Yf(this.auth,e,va(t))}}],[{key:"credential",value:function(e,t){return Cc._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Cc._fromTokenResponse(n,r):null}}]),e}();function Zf(e,t){return t?gs(t):(_u(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Jf.PROVIDER_ID="phone",Jf.PHONE_SIGN_IN_METHOD="phone";var eh=function(e){Oi(n,e);var t=Mi(n);function n(e){var r;return Ai(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Ni(n,[{key:"_getIdTokenResponse",value:function(e){return kc(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return kc(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return kc(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Ys);function th(e){return nl(e.auth,new eh(e),e.bypassAuthState)}function nh(e){var t=e.auth,n=e.user;return _u(n,t,"internal-error"),el(n,new eh(e),e.bypassAuthState)}function rh(e){return ih.apply(this,arguments)}function ih(){return ih=ga(ma().mark((function e(t){var n,r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,_u(r=t.user,n,"internal-error"),e.abrupt("return",Xc(r,new eh(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),ih.apply(this,arguments)}var ah=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Ai(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Ni(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=ga(ma().mark((function t(n,r){return ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=ga(ma().mark((function e(t){var n,r,i,a,o,u,s;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return th;case"linkViaPopup":case"linkViaRedirect":return rh;case"reauthViaPopup":case"reauthViaRedirect":return nh;default:yu(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Su(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Su(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),oh=new Cu(2e3,1e4);function uh(e,t,n){return sh.apply(this,arguments)}function sh(){return sh=ga(ma().mark((function e(t,n,r){var i,a,o;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Vs(t),bu(t,n,Nc),a=Zf(i,r),o=new hh(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),sh.apply(this,arguments)}function ch(){return ch=ga(ma().mark((function e(t,n,r){var i,a,o;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bu((i=va(t)).auth,n,Nc),a=Zf(i.auth,r),o=new hh(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),ch.apply(this,arguments)}function lh(e,t,n){return fh.apply(this,arguments)}function fh(){return fh=ga(ma().mark((function e(t,n,r){var i,a,o;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bu((i=va(t)).auth,n,Nc),a=Zf(i.auth,r),o=new hh(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),fh.apply(this,arguments)}var hh=function(e){Oi(n,e);var t=Mi(n);function n(e,r,i,a,o){var u;return Ai(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Fr(u),u}return Ni(n,[{key:"executeNotNull",value:function(){var e=ga(ma().mark((function e(){var t;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return _u(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ga(ma().mark((function e(){var t,n=this;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Su(1===this.filter.length,"Popup operations only handle one event"),t=cf(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(gu(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(gu(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(gu(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,oh.get())}()}}]),n}(ah);hh.currentPopupAction=null;var dh="pendingRedirect",ph=new Map,vh=function(e){Oi(n,e);var t=Mi(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ai(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return Ni(n,[{key:"execute",value:function(){var e=ga(ma().mark((function e(){var t,r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ph.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,mh(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,$o(Di(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:ph.set(this.auth._key(),t);case 21:return this.bypassAuthState||ph.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=ga(ma().mark((function e(t){var r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",$o(Di(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",$o(Di(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(ah);function mh(e,t){return yh.apply(this,arguments)}function yh(){return yh=ga(ma().mark((function e(t,n){var r,i,a;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_h(n),i=wh(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),yh.apply(this,arguments)}function gh(e,t){return kh.apply(this,arguments)}function kh(){return kh=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wh(t)._set(_h(n),"true"));case 1:case"end":return e.stop()}}),e)}))),kh.apply(this,arguments)}function bh(e,t){ph.set(e._key(),t)}function wh(e){return gs(e._redirectPersistence)}function _h(e){return ws(dh,e.config.apiKey,e.name)}function xh(e,t,n){return function(e,t,n){return Sh.apply(this,arguments)}(e,t,n)}function Sh(){return Sh=ga(ma().mark((function e(t,n,r){var i,a;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Vs(t),bu(t,n,Nc),e.next=4,i._initializationPromise;case 4:return a=Zf(i,r),e.next=7,gh(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),Sh.apply(this,arguments)}function Ih(e,t,n){return function(e,t,n){return Eh.apply(this,arguments)}(e,t,n)}function Eh(){return Eh=ga(ma().mark((function e(t,n,r){var i,a,o;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bu((i=va(t)).auth,n,Nc),e.next=4,i.auth._initializationPromise;case 4:return a=Zf(i.auth,r),e.next=7,gh(a,i.auth);case 7:return e.next=9,Oh(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)}))),Eh.apply(this,arguments)}function Th(e,t,n){return function(e,t,n){return Ch.apply(this,arguments)}(e,t,n)}function Ch(){return Ch=ga(ma().mark((function e(t,n,r){var i,a,o;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bu((i=va(t)).auth,n,Nc),e.next=4,i.auth._initializationPromise;case 4:return a=Zf(i.auth,r),e.next=7,Jc(!1,i,n.providerId);case 7:return e.next=9,gh(a,i.auth);case 9:return e.next=11,Oh(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)}))),Ch.apply(this,arguments)}function Ah(e,t){return Rh.apply(this,arguments)}function Rh(){return Rh=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vs(t)._initializationPromise;case 2:return e.abrupt("return",Nh(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Rh.apply(this,arguments)}function Nh(e,t){return Ph.apply(this,arguments)}function Ph(){return Ph=ga(ma().mark((function e(t,n){var r,i,a,o,u,s=arguments;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Vs(t),a=Zf(i,n),o=new vh(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Ph.apply(this,arguments)}function Oh(e){return Dh.apply(this,arguments)}function Dh(){return(Dh=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=cf("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Lh=function(){function e(t){Ai(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Ni(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fh(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Fh(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(gu(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mh(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Mh(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Mh(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Fh(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Uh(e){return Vh.apply(this,arguments)}function Vh(){return Vh=ga(ma().mark((function e(t){var n,r=arguments;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Du(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Vh.apply(this,arguments)}var zh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jh=/^https?/;function Bh(){return Bh=ga(ma().mark((function e(t){var n,r,i,a,o;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Uh(t);case 4:n=e.sent,r=n.authorizedDomains,i=Pi(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!qh(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:yu(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Bh.apply(this,arguments)}function qh(e){var t=Iu(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!jh.test(r))return!1;if(zh.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Kh=new Cu(3e4,6e4);function Gh(){var e=ff().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=m(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Hh=null;function Wh(e){return Hh=Hh||function(e){return new Promise((function(t,n){var r,i,a;function o(){Gh(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Gh(),n(gu(e,"network-request-failed"))},timeout:Kh.get()})}if(null===(i=null===(r=ff().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=ff().gapi)||void 0===a?void 0:a.load)){var u=Bs("iframefcb");return ff()[u]=function(){gapi.load?o():n(gu(e,"network-request-failed"))},js("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Hh=null,e}))}(e),Hh}var Qh=new Cu(5e3,15e3),Yh="__/auth/iframe",Xh="emulator/auth/iframe",$h={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Jh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zh(e){var t=e.config;_u(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Au(t,Xh):"https://".concat(e.config.authDomain,"/").concat(Yh),r={apiKey:t.apiKey,appName:e.name,v:yo},i=Jh.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(ca(r).slice(1))}function ed(e){return td.apply(this,arguments)}function td(){return td=ga(ma().mark((function e(t){var n,r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wh(t);case 2:return n=e.sent,_u(r=ff().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Zh(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$h,dontclear:!0},(function(e){return new Promise(function(){var n=ga(ma().mark((function n(r,i){var a,o,u;return ma().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){ff().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=gu(t,"network-request-failed"),o=ff().setTimeout((function(){i(a)}),Qh.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),td.apply(this,arguments)}var nd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rd=function(){function e(t){Ai(this,e),this.window=t,this.associatedEvent=null}return Ni(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function id(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},nd),{width:r.toString(),height:i.toString(),top:a,left:o}),l=Xi().toLowerCase();n&&(u=Es(l)?"_blank":n),Ss(l)&&(t=t||"http://localhost",s.scrollbars="yes");var f=Object.entries(s).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return Ns(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xi())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new rd(null);var h=window.open(t||"",u,f);_u(h,e,"popup-blocked");try{h.focus()}catch(d){}return new rd(h)}var ad="__/auth/handler",od="emulator/auth/handler",ud=encodeURIComponent("fac");function sd(e,t,n,r,i,a){return cd.apply(this,arguments)}function cd(){return cd=ga(ma().mark((function e(t,n,r,i,a,o){var u,s,l,f,h,d,p,v,m,y,g,k,b;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_u(t.config.authDomain,t,"auth-domain-config-required"),_u(t.config.apiKey,t,"invalid-api-key"),u={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:yo,eventId:a},n instanceof Nc)for(n.setDefaultLanguage(t.languageCode),u.providerId=n.providerId||"",oa(n.getCustomParameters())||(u.customParameters=JSON.stringify(n.getCustomParameters())),s=0,l=Object.entries(o||{});s<l.length;s++)f=c(l[s],2),h=f[0],d=f[1],u[h]=d;for(n instanceof Pc&&(p=n.getScopes().filter((function(e){return""!==e}))).length>0&&(u.scopes=p.join(",")),t.tenantId&&(u.tid=t.tenantId),v=u,m=0,y=Object.keys(v);m<y.length;m++)g=y[m],void 0===v[g]&&delete v[g];return e.next=10,t._getAppCheckToken();case 10:return k=e.sent,b=k?"#".concat(ud,"=").concat(encodeURIComponent(k)):"",e.abrupt("return","".concat(ld(t),"?").concat(ca(v).slice(1)).concat(b));case 13:case"end":return e.stop()}}),e)}))),cd.apply(this,arguments)}function ld(e){var t=e.config;return t.emulator?Au(t,od):"https://".concat(t.authDomain,"/").concat(ad)}var fd="webStorageSupport",hd=function(){function e(){Ai(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=of,this._completeRedirectFn=Nh,this._overrideRedirectResult=bh}return Ni(e,[{key:"_openPopup",value:function(){var e=ga(ma().mark((function e(t,n,r,i){var a,o;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Su(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,sd(t,n,r,Iu(),i);case 3:return o=e.sent,e.abrupt("return",id(t,o,cf()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ga(ma().mark((function e(t,n,r,i){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,sd(t,n,r,Iu(),i);case 4:return hf(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Su(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=ga(ma().mark((function e(t){var n,r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ed(t);case 2:return n=e.sent,r=new Lh(t),n.register("authEvent",(function(e){return _u(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(fd,{type:fd},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[fd];void 0!==i&&t(!!i),yu(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Bh.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Ps()||Is()||Ns()}}]),e}(),dd=hd,pd=function(){function e(t){Ai(this,e),this.factorId=t}return Ni(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return xu("unexpected MultiFactorSessionType")}}}]),e}(),vd=function(e){Oi(n,e);var t=Mi(n);function n(e){var r;return Ai(this,n),(r=t.call(this,"phone")).credential=e,r}return Ni(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Du(e,"POST","/v2/accounts/mfaEnrollment:finalize",Ou(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Du(e,"POST","/v2/accounts/mfaSignIn:finalize",Ou(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(pd),md=function(){function e(){Ai(this,e)}return Ni(e,null,[{key:"assertion",value:function(e){return vd._fromCredential(e)}}]),e}();md.FACTOR_ID="phone";var yd=function(){function e(){Ai(this,e)}return Ni(e,null,[{key:"assertionForEnrollment",value:function(e,t){return gd._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return gd._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=ga(ma().mark((function e(t){var n,r,i;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _u("undefined"!==typeof(null===(n=(r=t).user)||void 0===n?void 0:n.auth),"internal-error"),e.next=4,Yl(r.user.auth,{idToken:r.credential,totpEnrollmentInfo:{}});case 4:return i=e.sent,e.abrupt("return",kd._fromStartTotpMfaEnrollmentResponse(i,r.user.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();yd.FACTOR_ID="totp";var gd=function(e){Oi(n,e);var t=Mi(n);function n(e,r,i){var a;return Ai(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return Ni(n,[{key:"_finalizeEnroll",value:function(){var e=ga(ma().mark((function e(t,n,r){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _u("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",Xl(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=ga(ma().mark((function e(t,n){var r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _u(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",Pf(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(pd),kd=function(){function e(t,n,r,i,a,o,u){Ai(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return Ni(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(bd(e)||bd(t))&&(r=!0),r&&(bd(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),bd(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function bd(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var wd="@firebase/auth",_d="1.3.0",xd=function(){function e(t){Ai(this,e),this.auth=t,this.internalListeners=new Map}return Ni(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){_u(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Sd;!function(e){var t;null===(t=Hi())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function Id(){return window}Sd="Browser",co(new ka("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;_u(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:Sd,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Os(Sd)},l=new Us(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gs);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),co(new ka("auth-internal",(function(e){return function(e){return new xd(e)}(Vs(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),xo(wd,_d,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Sd)),xo(wd,_d,"esm2017");var Ed=2e3;function Td(e,t,n){return Cd.apply(this,arguments)}function Cd(){return Cd=ga(ma().mark((function e(t,n,r){var i,a,o,u,s;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Id(),o=a.BuildInfo,Su(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Dd(n.sessionId);case 4:return u=e.sent,s={},Ns()?s.ibi=o.packageName:Cs()?s.apn=o.packageName:yu(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",sd(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Cd.apply(this,arguments)}function Ad(){return Ad=ga(ma().mark((function e(t){var n,r,i;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Id(),r=n.BuildInfo,i={},Ns()?i.iosBundleId=r.packageName:Cs()?i.androidPackageName=r.packageName:yu(t,"operation-not-supported-in-this-environment"),e.next=5,Uh(t,i);case 5:case"end":return e.stop()}}),e)}))),Ad.apply(this,arguments)}function Rd(e){var t=Id().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xi();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Nd(e,t,n){return Pd.apply(this,arguments)}function Pd(){return Pd=ga(ma().mark((function e(t,n,r){var i,a,o;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Id(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(gu(t,"redirect-cancelled-by-user"))}),Ed))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Cs()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Pd.apply(this,arguments)}function Od(e){var t,n,r,i,a,o,u,s,c,l,f=Id();_u("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),_u("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),_u("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_u("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_u("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Dd(e){return Ld.apply(this,arguments)}function Ld(){return(Ld=ga(ma().mark((function e(t){var n,r,i;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Md(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Md(e){if(Su(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Fd=20,Ud=function(e){Oi(n,e);var t=Mi(n);function n(){var e;return Ai(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return Ni(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),$o(Di(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Lh);function Vd(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Kd(),postBody:null,tenantId:e.tenantId,error:gu(e,"no-auth-event")}}function zd(e,t){return Gd()._set(Hd(e),t)}function jd(e){return Bd.apply(this,arguments)}function Bd(){return Bd=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gd()._get(Hd(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Gd()._remove(Hd(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Bd.apply(this,arguments)}function qd(e,t){var n,r,i=function(e){var t=Wd(e),n=t.link?decodeURIComponent(t.link):void 0,r=Wd(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Wd(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Wd(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?gu(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Kd(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<Fd;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function Gd(){return gs(rf)}function Hd(e){return ws("authEvent",e.config.apiKey,e.name)}function Wd(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=Xo(e.split("?"));t[0];return la(t.slice(1).join("?"))}var Qd=function(){function e(){Ai(this,e),this._redirectPersistence=of,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Nh,this._overrideRedirectResult=bh}return Ni(e,[{key:"_initialize",value:function(){var e=ga(ma().mark((function e(t){var n,r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Ud(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){yu(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=ga(ma().mark((function e(t,n,r,i){var a,o,u,s;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Od(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),ph.clear(),e.next=10,this._originValidation(t);case 10:return o=Vd(t,r,i),e.next=13,zd(t,o);case 13:return e.next=15,Td(t,o,n);case 15:return u=e.sent,e.next=18,Rd(u);case 18:return s=e.sent,e.abrupt("return",Nd(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Ad.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Id(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(ga(ma().mark((function n(){return ma().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,jd(e);case 2:t.onEvent(Xd());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=ga(ma().mark((function n(r){var i,a;return ma().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,jd(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=qd(i,r.url)),t.onEvent(a||Xd());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Id().handleOpenURL=function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Yd=Qd;function Xd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:gu("no-auth-event")}}var $d=1e3;function Jd(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Zd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xi();return!("file:"!==Jd()&&"ionic:"!==Jd()&&"capacitor:"!==Jd()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function ep(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xi();return ea()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xi();return/Edge\/\d+/.test(e)}(e)}function tp(){try{var e=self.localStorage,t=cf();if(e)return e.setItem(t,"1"),e.removeItem(t),!ep()||ta()}catch(n){return np()&&ta()}return!1}function np(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function rp(){return("http:"===Jd()||"https:"===Jd()||Ji()||Zd())&&!(Zi()||$i())&&tp()&&!np()}function ip(){return Zd()&&"undefined"!==typeof document}function ap(){return op.apply(this,arguments)}function op(){return(op=ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ip()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),$d);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var up={LOCAL:"local",NONE:"none",SESSION:"session"},sp=_u,cp="persistence";function lp(e,t){sp(Object.values(up).includes(t),e,"invalid-persistence-type"),Zi()?sp(t!==up.SESSION,e,"unsupported-persistence-type"):$i()?sp(t===up.NONE,e,"unsupported-persistence-type"):np()?sp(t===up.NONE||t===up.LOCAL&&ta(),e,"unsupported-persistence-type"):sp(t===up.NONE||tp(),e,"unsupported-persistence-type")}function fp(e){return hp.apply(this,arguments)}function hp(){return hp=ga(ma().mark((function e(t){var n,r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=dp(),r=ws(cp,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),hp.apply(this,arguments)}function dp(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var pp=_u,vp=function(){function e(){Ai(this,e),this.browserResolver=gs(dd),this.cordovaResolver=gs(Yd),this.underlyingResolver=null,this._redirectPersistence=of,this._completeRedirectFn=Nh,this._overrideRedirectResult=bh}return Ni(e,[{key:"_initialize",value:function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=ga(ma().mark((function e(t,n,r,i){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ga(ma().mark((function e(t,n,r,i){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return ip()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return pp(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=ga(ma().mark((function e(){var t;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ap();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function mp(e){return e.unwrap()}function yp(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new _p(e,function(e,t){var n,r=va(e),i=t;return _u(t.customData.operationType,r,"argument-error"),_u(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Wl._fromError(r,i)}(e,t));else if(r){var i=gp(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function gp(e){var t=(e instanceof na?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof na)&&"temporaryProof"in t&&"phoneNumber"in t)return Jf.credentialFromResult(e);var n,r=t.providerId;if(!r||r===eu.PASSWORD)return null;switch(r){case eu.GOOGLE:n=Lc;break;case eu.FACEBOOK:n=Dc;break;case eu.GITHUB:n=Mc;break;case eu.TWITTER:n=Vc;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Fc._create(r,u):wc._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Oc(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof na?n.credentialFromError(e):n.credentialFromResult(e)}function kp(e,t){return t.catch((function(t){throw t instanceof na&&yp(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,gp(t)),additionalUserInfo:Gl(e),user:xp.getOrCreate(r)}}))}function bp(e,t){return wp.apply(this,arguments)}function wp(){return wp=ga(ma().mark((function e(t,n){var r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return kp(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),wp.apply(this,arguments)}var _p=function(){function e(t,n){Ai(this,e),this.resolver=n,this.auth=t.wrapped()}return Ni(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return kp(mp(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),xp=function(){function e(t){Ai(this,e),this._delegate=t,this.multiFactor=function(e){var t=va(e);return Zl.has(t)||Zl.set(t,Jl._fromUser(t)),Zl.get(t)}(t)}return Ni(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kp(this.auth,ol(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bp(this.auth,Hf(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kp(this.auth,lh(this._delegate,t,vp)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fp(Vs(this.auth));case 2:return e.abrupt("return",Th(this._delegate,t,vp));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kp(this.auth,sl(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return bp(this.auth,function(e,t,n){return Qf.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return kp(this.auth,function(e,t,n){return ch.apply(this,arguments)}(this._delegate,e,vp))}},{key:"reauthenticateWithRedirect",value:function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fp(Vs(this.auth));case 2:return e.abrupt("return",Ih(this._delegate,t,vp));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Pl.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qc(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Fl(va(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Fl(va(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return $f.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Ml.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Ol.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();xp.USER_MAP=new WeakMap;var Sp=_u,Ip=function(){function e(t,n){if(Ai(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Sp(r,"invalid-api-key",{appName:t.name}),Sp(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?vp:void 0;this._delegate=n.initialize({options:{persistence:Tp(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(fu),this.linkUnderlyingAuth()}return Ni(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?xp.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Hs(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return wl.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return _l(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return bl.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kp(this._delegate,Il(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Nl.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Ac.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=ga(ma().mark((function e(){var t;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sp(rp(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Ah(this._delegate,vp);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",kp(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Vs(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Ep(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Ep(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Tl.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return kl.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=ga(ma().mark((function e(t){var n,r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:lp(this._delegate,t),e.t0=t,e.next=e.t0===up.SESSION?4:e.t0===up.LOCAL?6:e.t0===up.NONE?11:13;break;case 4:return n=of,e.abrupt("break",14);case 6:return e.next=8,gs(Rf)._isAvailable();case 8:return r=e.sent,n=r?Rf:rf,e.abrupt("break",14);case 11:return n=bs,e.abrupt("break",14);case 13:return e.abrupt("return",yu("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return kp(this._delegate,function(e){return Kc.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return kp(this._delegate,il(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return kp(this._delegate,function(e,t){return hl.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return kp(this._delegate,function(e,t,n){return il(va(e),Rc.credential(t,n)).catch(function(){var t=ga(ma().mark((function t(n){return ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw n.code==="auth/".concat("password-does-not-meet-requirements")&&yl(e),n;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return kp(this._delegate,function(e,t,n){return Cl.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return bp(this._delegate,function(e,t,n){return Gf.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sp(rp(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",kp(this._delegate,uh(this._delegate,t,vp)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sp(rp(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,fp(this._delegate);case 3:return e.abrupt("return",xh(this._delegate,t,vp));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Sl.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Ep(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&xp.getOrCreate(e))},error:t,complete:n}}function Tp(e,t){var n=function(e,t){var n=dp();if(!n)return[];var r=ws(cp,e,t);switch(n.getItem(r)){case up.NONE:return[bs];case up.LOCAL:return[Rf,of];case up.SESSION:return[of];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Rf)||n.push(Rf),"undefined"!==typeof window)for(var r=0,i=[rf,of];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(bs)||n.push(bs),n}Ip.Persistence=up;var Cp=function(){function e(){Ai(this,e),this.providerId="phone",this._delegate=new Jf(mp(Yo.auth()))}return Ni(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Jf.credential(e,t)}}]),e}();Cp.PHONE_SIGN_IN_METHOD=Jf.PHONE_SIGN_IN_METHOD,Cp.PROVIDER_ID=Jf.PROVIDER_ID;var Ap,Rp=_u,Np=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yo.app();Ai(this,e),Rp(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Bf(i.auth(),t,n),this.type=this._delegate.type}return Ni(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Ap=Yo).INTERNAL.registerComponent(new ka("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Ip(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:tu,PASSWORD_RESET:nu,RECOVER_EMAIL:ru,REVERT_SECOND_FACTOR_ADDITION:iu,VERIFY_AND_CHANGE_EMAIL:au,VERIFY_EMAIL:ou}},EmailAuthProvider:Rc,FacebookAuthProvider:Dc,GithubAuthProvider:Mc,GoogleAuthProvider:Lc,OAuthProvider:Oc,SAMLAuthProvider:Uc,PhoneAuthProvider:Cp,PhoneMultiFactorGenerator:md,RecaptchaVerifier:Np,TwitterAuthProvider:Vc,Auth:Ip,AuthCredential:Ys,Error:na}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Ap.registerVersion("@firebase/auth-compat","0.4.6");var Pp,Op="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Dp={},Lp=Lp||{},Mp=Op||self;function Fp(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Up(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Vp="closure_uid_"+(1e9*Math.random()>>>0),zp=0;function jp(e,t,n){return e.call.apply(e.bind,arguments)}function Bp(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function qp(e,t,n){return(qp=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?jp:Bp).apply(null,arguments)}function Kp(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Gp(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Hp(){this.s=this.s,this.o=this.o}Hp.prototype.s=!1,Hp.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Vp)&&e[Vp]||(e[Vp]=++zp))},Hp.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Wp=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Qp(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Yp(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Fp(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Xp(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Xp.prototype.h=function(){this.defaultPrevented=!0};var $p=function(){if(!Mp.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Mp.addEventListener("test",(function(){}),t),Mp.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function Jp(e){return/^[\s\xa0]*$/.test(e)}function Zp(){var e=Mp.navigator;return e&&(e=e.userAgent)?e:""}function ev(e){return-1!=Zp().indexOf(e)}function tv(e){return tv[" "](e),e}tv[" "]=function(){};var nv,rv,iv=ev("Opera"),av=ev("Trident")||ev("MSIE"),ov=ev("Edge"),uv=ov||av,sv=ev("Gecko")&&!(-1!=Zp().toLowerCase().indexOf("webkit")&&!ev("Edge"))&&!(ev("Trident")||ev("MSIE"))&&!ev("Edge"),cv=-1!=Zp().toLowerCase().indexOf("webkit")&&!ev("Edge");function lv(){var e=Mp.document;return e?e.documentMode:void 0}e:{var fv="",hv=function(){var e=Zp();return sv?/rv:([^\);]+)(\)|;)/.exec(e):ov?/Edge\/([\d\.]+)/.exec(e):av?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):cv?/WebKit\/(\S+)/.exec(e):iv?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(hv&&(fv=hv?hv[1]:""),av){var dv=lv();if(null!=dv&&dv>parseFloat(fv)){nv=String(dv);break e}}nv=fv}if(Mp.document&&av){var pv=lv();rv=pv||(parseInt(nv,10)||void 0)}else rv=void 0;var vv=rv;function mv(e,t){if(Xp.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(sv){e:{try{tv(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:yv[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&mv.$.h.call(this)}}Gp(mv,Xp);var yv={2:"touch",3:"pen",4:"mouse"};mv.prototype.h=function(){mv.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var gv="closure_listenable_"+(1e6*Math.random()|0),kv=0;function bv(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++kv,this.fa=this.ia=!1}function wv(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function _v(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function xv(e){var t={};for(var n in e)t[n]=e[n];return t}var Sv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Iv(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Sv.length;a++)n=Sv[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ev(e){this.src=e,this.g={},this.h=0}function Tv(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Wp(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(wv(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Cv(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}Ev.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Cv(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new bv(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Av="closure_lm_"+(1e6*Math.random()|0),Rv={};function Nv(e,t,n,r,i){if(r&&r.once)return Ov(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Nv(e,t[a],n,r,i);return null}return n=zv(n),e&&e[gv]?e.O(t,n,Up(r)?!!r.capture:!!r,i):Pv(e,t,n,!1,r,i)}function Pv(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Up(i)?!!i.capture:!!i,u=Uv(e);if(u||(e[Av]=u=new Ev(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Fv;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)$p||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Mv(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ov(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ov(e,t[a],n,r,i);return null}return n=zv(n),e&&e[gv]?e.P(t,n,Up(r)?!!r.capture:!!r,i):Pv(e,t,n,!0,r,i)}function Dv(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Dv(e,t[a],n,r,i);else r=Up(r)?!!r.capture:!!r,n=zv(n),e&&e[gv]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Cv(a=e.g[t],n,r,i))&&(wv(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Uv(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Cv(t,n,r,i)),(n=-1<e?t[e]:null)&&Lv(n))}function Lv(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[gv])Tv(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Mv(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Uv(t))?(Tv(n,e),0==n.h&&(n.src=null,t[Av]=null)):wv(e)}}}function Mv(e){return e in Rv?Rv[e]:Rv[e]="on"+e}function Fv(e,t){if(e.fa)e=!0;else{t=new mv(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Lv(e),e=n.call(r,t)}return e}function Uv(e){return(e=e[Av])instanceof Ev?e:null}var Vv="__closure_events_fn_"+(1e9*Math.random()>>>0);function zv(e){return"function"===typeof e?e:(e[Vv]||(e[Vv]=function(t){return e.handleEvent(t)}),e[Vv])}function jv(){Hp.call(this),this.i=new Ev(this),this.S=this,this.J=null}function Bv(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Xp(t,e);else if(t instanceof Xp)t.target=t.target||e;else{var i=t;Iv(t=new Xp(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=qv(o,r,!0,t)&&i}if(i=qv(o=t.g=e,r,!0,t)&&i,i=qv(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=qv(o=t.g=n[a],r,!1,t)&&i}function qv(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&Tv(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Gp(jv,Hp),jv.prototype[gv]=!0,jv.prototype.removeEventListener=function(e,t,n,r){Dv(this,e,t,n,r)},jv.prototype.N=function(){if(jv.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)wv(n[r]);delete t.g[e],t.h--}}this.J=null},jv.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},jv.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Kv=Mp.JSON.stringify,Gv=function(){function e(t,n){Ai(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Ni(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function Hv(){var e=em,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Wv=function(){function e(){Ai(this,e),this.h=this.g=null}return Ni(e,[{key:"add",value:function(e,t){var n=Qv.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Qv=new Gv((function(){return new Yv}),(function(e){return e.reset()})),Yv=function(){function e(){Ai(this,e),this.next=this.g=this.h=null}return Ni(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Xv(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function $v(e){Mp.setTimeout((function(){throw e}),0)}var Jv,Zv=!1,em=new Wv,tm=function(){var e=Mp.Promise.resolve(void 0);Jv=function(){e.then(nm)}},nm=function(){for(var e;e=Hv();){try{e.h.call(e.g)}catch(n){$v(n)}var t=Qv;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Zv=!1};function rm(e,t){jv.call(this),this.h=e||1,this.g=t||Mp,this.j=qp(this.qb,this),this.l=Date.now()}function im(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function am(e,t,n){if("function"===typeof e)n&&(e=qp(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=qp(e.handleEvent,e)}return 2147483647<Number(t)?-1:Mp.setTimeout(e,t||0)}function om(e){e.g=am((function(){e.g=null,e.i&&(e.i=!1,om(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Gp(rm,jv),(Pp=rm.prototype).ga=!1,Pp.T=null,Pp.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Bv(this,"tick"),this.ga&&(im(this),this.start()))}},Pp.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Pp.N=function(){rm.$.N.call(this),im(this),delete this.g};var um=function(e){Oi(n,e);var t=Mi(n);function n(e,r){var i;return Ai(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Ni(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:om(this)}},{key:"N",value:function(){$o(Di(n.prototype),"N",this).call(this),this.g&&(Mp.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Hp);function sm(e){Hp.call(this),this.h=e,this.g={}}Gp(sm,Hp);var cm=[];function lm(e,t,n,r){Array.isArray(n)||(n&&(cm[0]=n.toString()),n=cm);for(var i=0;i<n.length;i++){var a=Nv(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function fm(e){_v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Lv(e)}),e),e.g={}}function hm(){this.g=!0}function dm(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Kv(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}sm.prototype.N=function(){sm.$.N.call(this),fm(this)},sm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},hm.prototype.Ea=function(){this.g=!1},hm.prototype.info=function(){};var pm={},vm=null;function mm(){return vm=vm||new jv}function ym(e){Xp.call(this,pm.Ta,e)}function gm(e){var t=mm();Bv(t,new ym(t))}function km(e,t){Xp.call(this,pm.STAT_EVENT,e),this.stat=t}function bm(e){var t=mm();Bv(t,new km(t,e))}function wm(e,t){Xp.call(this,pm.Ua,e),this.size=t}function _m(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Mp.setTimeout((function(){e()}),t)}pm.Ta="serverreachability",Gp(ym,Xp),pm.STAT_EVENT="statevent",Gp(km,Xp),pm.Ua="timingevent",Gp(wm,Xp);var xm={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Sm={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Im(){}function Em(e){return e.h||(e.h=e.i())}function Tm(){}Im.prototype.h=null;var Cm,Am={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Rm(){Xp.call(this,"d")}function Nm(){Xp.call(this,"c")}function Pm(){}function Om(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new sm(this),this.P=Lm,e=uv?125:void 0,this.V=new rm(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Dm}function Dm(){this.i=null,this.g="",this.h=!1}Gp(Rm,Xp),Gp(Nm,Xp),Gp(Pm,Im),Pm.prototype.g=function(){return new XMLHttpRequest},Pm.prototype.i=function(){return{}},Cm=new Pm;var Lm=45e3,Mm={},Fm={};function Um(e,t,n){e.L=1,e.v=ry(Jm(t)),e.s=n,e.S=!0,Vm(e,null)}function Vm(e,t){e.G=Date.now(),qm(e),e.A=Jm(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),my(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Dm,e.g=yg(e.l,n?t:null,!e.s),0<e.O&&(e.M=new um(qp(e.Pa,e,e.g),e.O)),lm(e.U,e.g,"readystatechange",e.nb),t=e.I?xv(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),gm(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function zm(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function jm(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=Bm(e,n))==Fm){4==t&&(e.o=4,bm(14),i=!1),dm(e.j,e.m,null,"[Incomplete Response]");break}if(r==Mm){e.o=4,bm(15),dm(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}dm(e.j,e.m,r,null),Qm(e,r)}zm(e)&&r!=Fm&&r!=Mm&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,bm(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),cg(t),t.M=!0,bm(11))):(dm(e.j,e.m,n,"[Invalid Chunked Response]"),Wm(e),Hm(e))}function Bm(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fm:(n=Number(t.substring(n,r)),isNaN(n)?Mm:(r+=1)+n>t.length?Fm:(t=t.slice(r,r+n),e.C=r+n,t))}function qm(e){e.Y=Date.now()+e.P,Km(e,e.P)}function Km(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=_m(qp(e.lb,e),t)}function Gm(e){e.B&&(Mp.clearTimeout(e.B),e.B=null)}function Hm(e){0==e.l.H||e.J||hg(e.l,e)}function Wm(e){Gm(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,im(e.V),fm(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Qm(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||xy(n.i,e)))if(!e.K&&xy(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;fg(n),tg(n)}sg(n),bm(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=_m(qp(n.ib,n),6e3));if(1>=_y(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else pg(n,11)}else if((e.K||n.g==e)&&fg(n),!Jp(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Sy(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,ny(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=mg(r,r.J?r.pa:null,r.Y),d.K){Iy(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(Gm(p),qm(p)),r.g=d}else ug(r);0<n.j.length&&rg(n)}else"stop"!=a[0]&&"close"!=a[0]||pg(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?pg(n,7):eg(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}gm()}catch(a){}}function Ym(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Fp(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Fp(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Fp(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Pp=Om.prototype).setTimeout=function(e){this.P=e},Pp.nb=function(e){e=e.target;var t=this.M;t&&3==Qy(e)?t.l():this.Pa(e)},Pp.Pa=function(e){try{if(e==this.g)e:{var t=Qy(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||uv||this.g&&(this.h.h||this.g.ja()||Yy(this.g)))){this.J||4!=t||7==n||gm(),Gm(this);var r=this.g.da();this.ca=r;t:if(zm(this)){var i=Yy(this.g);e="";var a=i.length,o=4==Qy(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Wm(this),Hm(this);var u="";break t}this.h.i=new Mp.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jp(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,bm(12),Wm(this),Hm(this);break e}dm(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qm(this,r)}this.S?(jm(this,t,u),uv&&this.i&&3==t&&(lm(this.U,this.V,"tick",this.mb),this.V.start())):(dm(this.j,this.m,u,null),Qm(this,u)),4==t&&Wm(this),this.i&&!this.J&&(4==t?hg(this.l,this):(this.i=!1,qm(this)))}else(function(e){var t={};e=(e.g&&2<=Qy(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!Jp(e[n])){var r=Xv(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.o=3,bm(12)):(this.o=0,bm(13)),Wm(this),Hm(this)}}}catch(t){}},Pp.mb=function(){if(this.g){var e=Qy(this.g),t=this.g.ja();this.C<t.length&&(Gm(this),jm(this,e,t),this.i&&4!=e&&qm(this))}},Pp.cancel=function(){this.J=!0,Wm(this)},Pp.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(gm(),bm(17)),Wm(this),this.o=2,Hm(this)):Km(this,this.Y-e)};var Xm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $m(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof $m){this.h=e.h,Zm(this,e.j),this.s=e.s,this.g=e.g,ey(this,e.m),this.l=e.l;var t=e.i,n=new hy;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ty(this,n),this.o=e.o}else e&&(t=String(e).match(Xm))?(this.h=!1,Zm(this,t[1]||"",!0),this.s=iy(t[2]||""),this.g=iy(t[3]||"",!0),ey(this,t[4]),this.l=iy(t[5]||"",!0),ty(this,t[6]||"",!0),this.o=iy(t[7]||"")):(this.h=!1,this.i=new hy(null,this.h))}function Jm(e){return new $m(e)}function Zm(e,t,n){e.j=n?iy(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ey(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ty(e,t,n){t instanceof hy?(e.i=t,function(e,t){t&&!e.j&&(dy(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(py(this,t),my(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ay(t,ly)),e.i=new hy(t,e.h))}function ny(e,t,n){e.i.set(t,n)}function ry(e){return ny(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function iy(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ay(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,oy),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function oy(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}$m.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ay(t,uy,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ay(t,uy,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ay(n,"/"==n.charAt(0)?cy:sy,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ay(n,fy)),e.join("")};var uy=/[#\/\?@]/g,sy=/[#\?:]/g,cy=/[#\?]/g,ly=/[#\?@]/g,fy=/#/g;function hy(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function dy(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function py(e,t){dy(e),t=yy(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function vy(e,t){return dy(e),t=yy(e,t),e.g.has(t)}function my(e,t,n){py(e,t),0<n.length&&(e.i=null,e.g.set(yy(e,t),Qp(n)),e.h+=n.length)}function yy(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Pp=hy.prototype).add=function(e,t){dy(this),this.i=null,e=yy(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Pp.forEach=function(e,t){dy(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Pp.ta=function(){dy(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Pp.Z=function(e){dy(this);var t=[];if("string"===typeof e)vy(this,e)&&(t=t.concat(this.g.get(yy(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Pp.set=function(e,t){return dy(this),this.i=null,vy(this,e=yy(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Pp.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Pp.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var gy=Ni((function e(t,n){Ai(this,e),this.g=t,this.map=n}));function ky(e){this.l=e||by,Mp.PerformanceNavigationTiming?e=0<(e=Mp.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Mp.g&&Mp.g.Ka&&Mp.g.Ka()&&Mp.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var by=10;function wy(e){return!!e.h||!!e.g&&e.g.size>=e.j}function _y(e){return e.h?1:e.g?e.g.size:0}function xy(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Sy(e,t){e.g?e.g.add(t):e.h=t}function Iy(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ey(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Pi(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return Qp(e.i)}ky.prototype.cancel=function(){if(this.i=Ey(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Pi(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var Ty,Cy=function(){function e(){Ai(this,e)}return Ni(e,[{key:"stringify",value:function(e){return Mp.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return Mp.JSON.parse(e,void 0)}}]),e}();function Ay(){this.g=new Cy}function Ry(e,t,n){var r=n||"";try{Ym(e,(function(e,n){var i=e;Up(e)&&(i=Kv(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ny(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Py(e){this.l=e.ec||null,this.j=e.ob||!1}function Oy(e,t){jv.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Dy,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Gp(Py,Im),Py.prototype.g=function(){return new Oy(this.l,this.j)},Py.prototype.i=(Ty={},function(){return Ty}),Gp(Oy,jv);var Dy=0;function Ly(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function My(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Fy(e)}function Fy(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Pp=Oy.prototype).open=function(e,t){if(this.readyState!=Dy)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Fy(this)},Pp.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Mp).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Pp.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,My(this)),this.readyState=Dy},Pp.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Fy(this)),this.g&&(this.readyState=3,Fy(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Mp.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ly(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Pp.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?My(this):Fy(this),3==this.readyState&&Ly(this)}},Pp.Za=function(e){this.g&&(this.response=this.responseText=e,My(this))},Pp.Ya=function(e){this.g&&(this.response=e,My(this))},Pp.ka=function(){this.g&&My(this)},Pp.setRequestHeader=function(e,t){this.v.append(e,t)},Pp.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Pp.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Oy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Uy=Mp.JSON.parse;function Vy(e){jv.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=zy,this.L=this.M=!1}Gp(Vy,jv);var zy="",jy=/^https?$/i,By=["POST","PUT"];function qy(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ky(e),Hy(e)}function Ky(e){e.F||(e.F=!0,Bv(e,"complete"),Bv(e,"error"))}function Gy(e){if(e.h&&"undefined"!=typeof Lp&&(!e.C[1]||4!=Qy(e)||2!=e.da()))if(e.v&&4==Qy(e))am(e.La,0,e);else if(Bv(e,"readystatechange"),4==Qy(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Xm)[1]||null;!a&&Mp.self&&Mp.self.location&&(a=Mp.self.location.protocol.slice(0,-1)),i=!jy.test(a?a.toLowerCase():"")}t=i}if(t)Bv(e,"complete"),Bv(e,"success");else{e.m=6;try{var o=2<Qy(e)?e.g.statusText:""}catch(u){o=""}e.j=o+" ["+e.da()+"]",Ky(e)}}finally{Hy(e)}}}function Hy(e,t){if(e.g){Wy(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||Bv(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Wy(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Mp.clearTimeout(e.A),e.A=null)}function Qy(e){return e.g?e.g.readyState:0}function Yy(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case zy:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(nk){return null}}function Xy(e){var t="";return _v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function $y(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Xy(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ny(e,t,n))}function Jy(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Zy(e){this.Ga=0,this.j=[],this.l=new hm,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Jy("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Jy("baseRetryDelayMs",5e3,e),this.hb=Jy("retryDelaySeedMs",1e4,e),this.eb=Jy("forwardChannelMaxRetries",2,e),this.xa=Jy("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new ky(e&&e.concurrentRequestLimit),this.Ja=new Ay,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function eg(e){if(ng(e),3==e.H){var t=e.W++,n=Jm(e.I);if(ny(n,"SID",e.K),ny(n,"RID",t),ny(n,"TYPE","terminate"),ag(e,n),(t=new Om(e,e.l,t)).L=2,t.v=ry(Jm(n)),n=!1,Mp.navigator&&Mp.navigator.sendBeacon)try{n=Mp.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Mp.Image&&((new Image).src=t.v,n=!0),n||(t.g=yg(t.l,null),t.g.ha(t.v)),t.G=Date.now(),qm(t)}vg(e)}function tg(e){e.g&&(cg(e),e.g.cancel(),e.g=null)}function ng(e){tg(e),e.u&&(Mp.clearTimeout(e.u),e.u=null),fg(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Mp.clearTimeout(e.m),e.m=null)}function rg(e){if(!wy(e.i)&&!e.m){e.m=!0;var t=e.Na;Jv||tm(),Zv||(Jv(),Zv=!0),em.add(t,e),e.C=0}}function ig(e,t){var n;n=t?t.m:e.W++;var r=Jm(e.I);ny(r,"SID",e.K),ny(r,"RID",n),ny(r,"AID",e.V),ag(e,r),e.o&&e.s&&$y(r,e.o,e.s),n=new Om(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=og(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Sy(e.i,n),Um(n,r,t)}function ag(e,t){e.na&&_v(e.na,(function(e,n){ny(t,n,e)})),e.h&&Ym({},(function(e,n){ny(t,n,e)}))}function og(e,t,n){n=Math.min(e.j.length,n);var r=e.h?qp(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].g,l=i[s].map;if(0>(c-=a))a=Math.max(0,i[s].g-100),u=!1;else try{Ry(l,o,"req"+c+"_")}catch(bb){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function ug(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Jv||tm(),Zv||(Jv(),Zv=!0),em.add(t,e),e.A=0}}function sg(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=_m(qp(e.Ma,e),dg(e,e.A)),e.A++,!0)}function cg(e){null!=e.B&&(Mp.clearTimeout(e.B),e.B=null)}function lg(e){e.g=new Om(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Jm(e.wa);ny(t,"RID","rpc"),ny(t,"SID",e.K),ny(t,"AID",e.V),ny(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&ny(t,"TO",e.qa),ny(t,"TYPE","xmlhttp"),ag(e,t),e.o&&e.s&&$y(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=ry(Jm(t)),n.s=null,n.S=!0,Vm(n,e)}function fg(e){null!=e.v&&(Mp.clearTimeout(e.v),e.v=null)}function hg(e,t){var n=null;if(e.g==t){fg(e),cg(e),e.g=null;var r=2}else{if(!xy(e.i,t))return;n=t.F,Iy(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Bv(r=mm(),new wm(r,n)),rg(e)}else ug(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(_y(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=_m(qp(e.Na,e,t),dg(e,e.C)),e.C++,!0))}(e,t)||2==r&&sg(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:pg(e,5);break;case 4:pg(e,10);break;case 3:pg(e,6);break;default:pg(e,2)}}function dg(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function pg(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=qp(e.pb,e);n||(n=new $m("//www.google.com/images/cleardot.gif"),Mp.location&&"http"==Mp.location.protocol||Zm(n,"https"),ry(n)),function(e,t){var n=new hm;if(Mp.Image){var r=new Image;r.onload=Kp(Ny,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Kp(Ny,n,r,"TestLoadImage: error",!1,t),r.onabort=Kp(Ny,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Kp(Ny,n,r,"TestLoadImage: timeout",!1,t),Mp.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else bm(2);e.H=0,e.h&&e.h.za(t),vg(e),ng(e)}function vg(e){if(e.H=0,e.ma=[],e.h){var t=Ey(e.i);0==t.length&&0==e.j.length||(Yp(e.ma,t),Yp(e.ma,e.j),e.i.i.length=0,Qp(e.j),e.j.length=0),e.h.ya()}}function mg(e,t,n){var r=n instanceof $m?Jm(n):new $m(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ey(r,r.m);else{var i=Mp.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new $m(null);r&&Zm(a,r),t&&(a.g=t),i&&ey(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&ny(r,n,t),ny(r,"VER",e.ra),ag(e,r),r}function yg(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Vy(new Py({ob:!0})):new Vy(e.va)).Oa(e.J),t}function gg(){}function kg(){if(av&&!(10<=Number(vv)))throw Error("Environmental error: no available transport.")}function bg(e,t){jv.call(this),this.g=new Zy(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Jp(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Jp(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new xg(this)}function wg(e){Rm.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function _g(){Nm.call(this),this.status=1}function xg(e){this.g=e}function Sg(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Ig(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Eg(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Pp=Vy.prototype).Oa=function(e){this.M=e},Pp.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Cm.g(),this.C=this.u?Em(this.u):Em(Cm),this.g.onreadystatechange=qp(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void qy(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=Pi(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Mp.FormData&&e instanceof Mp.FormData,!(0<=Wp(By,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,l=Pi(n);try{for(l.s();!(s=l.n()).done;){var f=c(s.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){l.e(p)}finally{l.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Wy(this),0<this.B&&((this.L=function(e){return av&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qp(this.ua,this)):this.A=am(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){qy(this,u)}},Pp.ua=function(){"undefined"!=typeof Lp&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Bv(this,"timeout"),this.abort(8))},Pp.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Bv(this,"complete"),Bv(this,"abort"),Hy(this))},Pp.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hy(this,!0)),Vy.$.N.call(this)},Pp.La=function(){this.s||(this.G||this.v||this.l?Gy(this):this.kb())},Pp.kb=function(){Gy(this)},Pp.isActive=function(){return!!this.g},Pp.da=function(){try{return 2<Qy(this)?this.g.status:-1}catch(Ty){return-1}},Pp.ja=function(){try{return this.g?this.g.responseText:""}catch(Ty){return""}},Pp.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Uy(t)}},Pp.Ia=function(){return this.m},Pp.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Pp=Zy.prototype).ra=8,Pp.H=1,Pp.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new Om(this,this.l,e),n=this.s;if(this.U&&(n?Iv(n=xv(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=og(this,t,r),ny(i=Jm(this.I),"RID",e),ny(i,"CVER",22),this.F&&ny(i,"X-HTTP-Session-Id",this.F),ag(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Xy(n)))+"&"+r:this.o&&$y(i,this.o,n)),Sy(this.i,t),this.bb&&ny(i,"TYPE","init"),this.P?(ny(i,"$req",r),ny(i,"SID","null"),t.aa=!0,Um(t,i,null)):Um(t,i,r),this.H=2}}else 3==this.H&&(e?ig(this,e):0==this.j.length||wy(this.i)||ig(this))},Pp.Ma=function(){if(this.u=null,lg(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=_m(qp(this.jb,this),e)}},Pp.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,bm(10),tg(this),lg(this))},Pp.ib=function(){null!=this.v&&(this.v=null,tg(this),sg(this),bm(19))},Pp.pb=function(e){e?(this.l.info("Successfully pinged google.com"),bm(2)):(this.l.info("Failed to ping google.com"),bm(1))},Pp.isActive=function(){return!!this.h&&this.h.isActive(this)},(Pp=gg.prototype).Ba=function(){},Pp.Aa=function(){},Pp.za=function(){},Pp.ya=function(){},Pp.isActive=function(){return!0},Pp.Va=function(){},kg.prototype.g=function(e,t){return new bg(e,t)},Gp(bg,jv),bg.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;bm(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=mg(e,null,e.Y),rg(e)},bg.prototype.close=function(){eg(this.g)},bg.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Kv(e),e=n);t.j.push(new gy(t.fb++,e)),3==t.H&&rg(t)},bg.prototype.N=function(){this.g.h=null,delete this.j,eg(this.g),delete this.g,bg.$.N.call(this)},Gp(wg,Rm),Gp(_g,Nm),Gp(xg,gg),xg.prototype.Ba=function(){Bv(this.g,"a")},xg.prototype.Aa=function(e){Bv(this.g,new wg(e))},xg.prototype.za=function(e){Bv(this.g,new _g)},xg.prototype.ya=function(){Bv(this.g,"b")},Gp(Sg,(function(){this.blockSize=-1})),Sg.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Sg.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Ig(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Ig(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Ig(this,r),i=0;break}}this.h=i,this.i+=t},Sg.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Tg={};function Cg(e){return-128<=e&&128>e?function(e,t){var n=Tg;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Eg([0|e],0>e?-1:0)})):new Eg([0|e],0>e?-1:0)}function Ag(e){if(isNaN(e)||!isFinite(e))return Ng;if(0>e)return Mg(Ag(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Rg;return new Eg(t,0)}var Rg=4294967296,Ng=Cg(0),Pg=Cg(1),Og=Cg(16777216);function Dg(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Lg(e){return-1==e.h}function Mg(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Eg(n,~e.h).add(Pg)}function Fg(e,t){return e.add(Mg(t))}function Ug(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Vg(e,t){this.g=e,this.h=t}function zg(e,t){if(Dg(t))throw Error("division by zero");if(Dg(e))return new Vg(Ng,Ng);if(Lg(e))return t=zg(Mg(e),t),new Vg(Mg(t.g),Mg(t.h));if(Lg(t))return t=zg(e,Mg(t)),new Vg(Mg(t.g),t.h);if(30<e.g.length){if(Lg(e)||Lg(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Pg,r=t;0>=r.X(e);)n=jg(n),r=jg(r);var i=Bg(n,1),a=Bg(r,1);for(r=Bg(r,2),n=Bg(n,2);!Dg(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=Bg(r,1),n=Bg(n,1)}return t=Fg(e,i.R(t)),new Vg(i,t)}for(i=Ng;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=Ag(n)).R(t);Lg(o)||0<o.X(e);)o=(a=Ag(n-=r)).R(t);Dg(a)&&(a=Pg),i=i.add(a),e=Fg(e,o)}return new Vg(i,e)}function jg(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Eg(n,e.h)}function Bg(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Eg(i,e.h)}(Pp=Eg.prototype).ea=function(){if(Lg(this))return-Mg(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Rg+r)*t,t*=Rg}return e},Pp.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Dg(this))return"0";if(Lg(this))return"-"+Mg(this).toString(e);for(var t=Ag(Math.pow(e,6)),n=this,r="";;){var i=zg(n,t).g,a=((0<(n=Fg(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Dg(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Pp.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Pp.X=function(e){return Lg(e=Fg(this,e))?-1:Dg(e)?0:1},Pp.abs=function(){return Lg(this)?Mg(this):this},Pp.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new Eg(n,-2147483648&n[n.length-1]?-1:0)},Pp.R=function(e){if(Dg(this)||Dg(e))return Ng;if(Lg(this))return Lg(e)?Mg(this).R(Mg(e)):Mg(Mg(this).R(e));if(Lg(e))return Mg(this.R(Mg(e)));if(0>this.X(Og)&&0>e.X(Og))return Ag(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,Ug(n,2*r+2*i),n[2*r+2*i+1]+=a*s,Ug(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,Ug(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,Ug(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Eg(n,0)},Pp.gb=function(e){return zg(this,e).h},Pp.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Eg(n,this.h&e.h)},Pp.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Eg(n,this.h|e.h)},Pp.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Eg(n,this.h^e.h)},kg.prototype.createWebChannel=kg.prototype.g,bg.prototype.send=bg.prototype.u,bg.prototype.open=bg.prototype.m,bg.prototype.close=bg.prototype.close,xm.NO_ERROR=0,xm.TIMEOUT=8,xm.HTTP_ERROR=6,Sm.COMPLETE="complete",Tm.EventType=Am,Am.OPEN="a",Am.CLOSE="b",Am.ERROR="c",Am.MESSAGE="d",jv.prototype.listen=jv.prototype.O,Vy.prototype.listenOnce=Vy.prototype.P,Vy.prototype.getLastError=Vy.prototype.Sa,Vy.prototype.getLastErrorCode=Vy.prototype.Ia,Vy.prototype.getStatus=Vy.prototype.da,Vy.prototype.getResponseJson=Vy.prototype.Wa,Vy.prototype.getResponseText=Vy.prototype.ja,Vy.prototype.send=Vy.prototype.ha,Vy.prototype.setWithCredentials=Vy.prototype.Oa,Sg.prototype.digest=Sg.prototype.l,Sg.prototype.reset=Sg.prototype.reset,Sg.prototype.update=Sg.prototype.j,Eg.prototype.add=Eg.prototype.add,Eg.prototype.multiply=Eg.prototype.R,Eg.prototype.modulo=Eg.prototype.gb,Eg.prototype.compare=Eg.prototype.X,Eg.prototype.toNumber=Eg.prototype.ea,Eg.prototype.toString=Eg.prototype.toString,Eg.prototype.getBits=Eg.prototype.D,Eg.fromNumber=Ag,Eg.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Mg(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Ag(Math.pow(n,8)),i=Ng,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=Ag(Math.pow(n,o)),i=i.R(o).add(Ag(u))):i=(i=i.R(r)).add(Ag(u))}return i};var qg=Dp.createWebChannelTransport=function(){return new kg},Kg=Dp.getStatEventTarget=function(){return mm()},Gg=Dp.ErrorCode=xm,Hg=Dp.EventType=Sm,Wg=Dp.Event=pm,Qg=Dp.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Yg=(Dp.FetchXmlHttpFactory=Py,Dp.WebChannel=Tm),Xg=Dp.XhrIo=Vy,$g=Dp.Md5=Sg,Jg=Dp.Integer=Eg,Zg="@firebase/firestore",ek=function(){function e(t){Ai(this,e),this.uid=t}return Ni(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();ek.UNAUTHENTICATED=new ek(null),ek.GOOGLE_CREDENTIALS=new ek("google-credentials-uid"),ek.FIRST_PARTY=new ek("first-party-uid"),ek.MOCK_USER=new ek("mock-user");var tk="10.4.0",nk=new Na("@firebase/firestore");function rk(){return nk.logLevel}function ik(e){if(nk.logLevel<=Sa.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(uk);nk.debug.apply(nk,["Firestore (".concat(tk,"): ").concat(e)].concat(m(i)))}}function ak(e){if(nk.logLevel<=Sa.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(uk);nk.error.apply(nk,["Firestore (".concat(tk,"): ").concat(e)].concat(m(i)))}}function ok(e){if(nk.logLevel<=Sa.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(uk);nk.warn.apply(nk,["Firestore (".concat(tk,"): ").concat(e)].concat(m(i)))}}function uk(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function sk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(tk,") INTERNAL ASSERTION FAILED: ")+e;throw ak(t),new Error(t)}function ck(e,t){e||sk()}function lk(e,t){return e}var fk={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},hk=function(e){Oi(n,e);var t=Mi(n);function n(e,r){var i;return Ai(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Ni(n)}(na),dk=Ni((function e(){var t=this;Ai(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),pk=Ni((function e(t,n){Ai(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),vk=function(){function e(){Ai(this,e)}return Ni(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ek.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),mk=function(){function e(t){Ai(this,e),this.token=t,this.changeListener=null}return Ni(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),yk=function(){function e(t){Ai(this,e),this.t=t,this.currentUser=ek.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Ni(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new dk;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new dk,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){ik("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(ik("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new dk)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(ik("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(ck("string"==typeof n.accessToken),new pk(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return ck(null===e||"string"==typeof e),new ek(e)}}]),e}(),gk=function(){function e(t,n,r){Ai(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=ek.FIRST_PARTY,this.I=new Map}return Ni(e,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),e}(),kk=function(){function e(t,n,r){Ai(this,e),this.l=t,this.h=n,this.P=r}return Ni(e,[{key:"getToken",value:function(){return Promise.resolve(new gk(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ek.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),bk=Ni((function e(t){Ai(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),wk=function(){function e(t){Ai(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}return Ni(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&ik("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,ik("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){ik("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):ik("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(ck("string"==typeof t.token),e.R=t.token,new bk(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function _k(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var xk=function(){function e(){Ai(this,e)}return Ni(e,null,[{key:"V",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=_k(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function Sk(e,t){return e<t?-1:e>t?1:0}function Ik(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Ek(e){return e+"\0"}var Tk=function(){function e(t,n){if(Ai(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new hk(fk.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new hk(fk.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new hk(fk.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new hk(fk.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Ni(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Sk(this.nanoseconds,e.nanoseconds):Sk(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Ck=function(){function e(t){Ai(this,e),this.timestamp=t}return Ni(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Tk(0,0))}},{key:"max",value:function(){return new e(new Tk(253402300799,999999999))}}]),e}(),Ak=function(){function e(t,n,r){Ai(this,e),void 0===n?n=0:n>t.length&&sk(),void 0===r?r=t.length-n:r>t.length-n&&sk(),this.segments=t,this.offset=n,this.len=r}return Ni(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Rk=function(e){Oi(n,e);var t=Mi(n);function n(){return Ai(this,n),t.apply(this,arguments)}return Ni(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new hk(fk.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,m(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ak),Nk=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Pk=function(e){Oi(n,e);var t=Mi(n);function n(){return Ai(this,n),t.apply(this,arguments)}return Ni(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Nk.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new hk(fk.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new hk(fk.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new hk(fk.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new hk(fk.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ak),Ok=function(){function e(t){Ai(this,e),this.path=t}return Ni(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Rk.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Rk.fromString(t))}},{key:"fromName",value:function(t){return new e(Rk.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Rk.emptyPath())}},{key:"comparator",value:function(e,t){return Rk.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Rk(t.slice()))}}]),e}(),Dk=Ni((function e(t,n,r,i){Ai(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Lk(e){return e.fields.find((function(e){return 2===e.kind}))}function Mk(e){return e.fields.filter((function(e){return 2!==e.kind}))}Dk.UNKNOWN_ID=-1;var Fk=Ni((function e(t,n){Ai(this,e),this.fieldPath=t,this.kind=n}));var Uk=function(){function e(t,n){Ai(this,e),this.sequenceNumber=t,this.offset=n}return Ni(e,null,[{key:"empty",value:function(){return new e(0,jk.min())}}]),e}();function Vk(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ck.fromTimestamp(1e9===r?new Tk(n+1,0):new Tk(n,r));return new jk(i,Ok.empty(),t)}function zk(e){return new jk(e.readTime,e.key,-1)}var jk=function(){function e(t,n,r){Ai(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Ni(e,null,[{key:"min",value:function(){return new e(Ck.min(),Ok.empty(),-1)}},{key:"max",value:function(){return new e(Ck.max(),Ok.empty(),-1)}}]),e}();function Bk(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Ok.comparator(e.documentKey,t.documentKey))?n:Sk(e.largestBatchId,t.largestBatchId)}var qk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Kk=function(){function e(){Ai(this,e),this.onCommittedListeners=[]}return Ni(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Gk(e){return Hk.apply(this,arguments)}function Hk(){return(Hk=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===fk.FAILED_PRECONDITION&&t.message===qk){e.next=2;break}throw t;case 2:ik("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Wk=function(){function e(t){var n=this;Ai(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Ni(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&sk(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Pi(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Qk=function(){function e(t,n){var r=this;Ai(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.m=new dk,this.transaction.oncomplete=function(){r.m.resolve()},this.transaction.onabort=function(){n.error?r.m.reject(new $k(t,n.error)):r.m.resolve()},this.transaction.onerror=function(e){var n=nb(e.target.error);r.m.reject(new $k(t,n))}}return Ni(e,[{key:"g",get:function(){return this.m.promise}},{key:"abort",value:function(e){e&&this.m.reject(e),this.aborted||(ik("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"p",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Zk(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new $k(n,t)}}}]),e}(),Yk=function(){function e(t,n,r){Ai(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(Xi())&&ak("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Ni(e,[{key:"N",value:function(){var e=ga(ma().mark((function e(t){var n=this;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return ik("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new $k(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new hk(fk.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new hk(fk.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new $k(t,n))},i.onupgradeneeded=function(e){ik("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.B(t,i.transaction,e.oldVersion,n.version).next((function(){ik("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.L&&(this.db.onversionchange=function(e){return n.L(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"k",value:function(e){this.L=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=ga(ma().mark((function e(t,n,r,i){var a,o,u,s,c=this;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=ma().mark((function e(){var n,u,s,l;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.N(t);case 4:return c.db=e.sent,n=Qk.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.p(),e})).catch((function(e){return n.abort(e),Wk.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.g;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,ik("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if(!(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return ik("SimpleDb","Removing database:",e),eb(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!ta())return!1;if(e.v())return!0;var t=Xi(),n=e.D(t),r=0<n&&n<10,i=e.F(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"v",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.M)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"F",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Xk=function(){function e(t){Ai(this,e),this.q=t,this.K=!1,this.$=null}return Ni(e,[{key:"isDone",get:function(){return this.K}},{key:"U",get:function(){return this.$}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.K=!0}},{key:"W",value:function(e){this.$=e}},{key:"delete",value:function(){return eb(this.q.delete())}}]),e}(),$k=function(e){Oi(n,e);var t=Mi(n);function n(e,r){var i;return Ai(this,n),(i=t.call(this,fk.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Ni(n)}(hk);function Jk(e){return"IndexedDbTransactionError"===e.name}var Zk=function(){function e(t){Ai(this,e),this.store=t}return Ni(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(ik("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ik("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),eb(n)}},{key:"add",value:function(e){return ik("SimpleDb","ADD",this.store.name,e,e),eb(this.store.add(e))}},{key:"get",value:function(e){var t=this;return eb(this.store.get(e)).next((function(n){return void 0===n&&(n=null),ik("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return ik("SimpleDb","DELETE",this.store.name,e),eb(this.store.delete(e))}},{key:"count",value:function(){return ik("SimpleDb","COUNT",this.store.name),eb(this.store.count())}},{key:"G",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.j(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Wk((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Wk((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){ik("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.j(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.j(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new Wk((function(n,r){t.onerror=function(e){var t=nb(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"j",value:function(e,t){var n=[];return new Wk((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Xk(i),o=t(i.primaryKey,i.value,a);if(o instanceof Wk){var u=o.catch((function(e){return a.done(),Wk.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return Wk.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function eb(e){return new Wk((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=nb(e.target.error);n(t)}}))}var tb=!1;function nb(e){var t=Yk.D(Xi());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new hk("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return tb||(tb=!0,setTimeout((function(){throw r}),0)),r}}return e}var rb=function(){function e(t,n){Ai(this,e),this.asyncQueue=t,this.ee=n,this.task=null}return Ni(e,[{key:"start",value:function(){this.te(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"te",value:function(e){var t=this;ik("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=ik,e.t1="Documents written: ",e.next=6,t.ee.ne();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Jk(e.t4)){e.next=17;break}ik("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Gk(e.t4);case 19:return e.next=21,t.te(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),ib=function(){function e(t,n){Ai(this,e),this.localStore=t,this.persistence=n}return Ni(e,[{key:"ne",value:function(){var e=ga(ma().mark((function e(){var t,n=this,r=arguments;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.re(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"re",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Wk.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return ik("IndexBackiller","Processing collection: ".concat(t)),n.ie(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"ie",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.se(i,n)})).next((function(n){return ik("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"se",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=zk(t);Bk(r,n)>0&&(n=r)})),new jk(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),ab=function(){function e(t,n){var r=this;Ai(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.oe(e)},this._e=function(e){return n.writeSequenceNumber(e)})}return Ni(e,[{key:"oe",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this._e&&this._e(e),e}}]),e}();function ob(e){return null==e}function ub(e){return 0===e&&1/e==-1/0}function sb(e){return"number"==typeof e&&Number.isInteger(e)&&!ub(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function cb(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=fb(t)),t=lb(e.get(n),t);return fb(t)}function lb(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function fb(e){return e+"\x01\x01"}function hb(e){var t=e.length;if(ck(t>=2),2===t)return ck("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Rk.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&sk(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:sk()}a=o+2}return new Rk(r)}ab.ae=-1;var db=["userId","batchId"];function pb(e,t){return[e,cb(t)]}function vb(e,t,n){return[e,cb(t),n]}var mb={},yb=["prefixPath","collectionGroup","readTime","documentId"],gb=["prefixPath","collectionGroup","documentId"],kb=["collectionGroup","readTime","prefixPath","documentId"],bb=["canonicalId","targetId"],wb=["targetId","path"],_b=["path","targetId"],xb=["collectionId","parent"],Sb=["indexId","uid"],Ib=["uid","sequenceNumber"],Eb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Tb=["indexId","uid","orderedDocumentKey"],Cb=["userId","collectionPath","documentId"],Ab=["userId","collectionPath","largestBatchId"],Rb=["userId","collectionGroup","largestBatchId"],Nb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Pb=[].concat(m(Nb),["documentOverlays"]),Ob=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Db=Ob,Lb=[].concat(Db,["indexConfiguration","indexState","indexEntries"]),Mb=function(e){Oi(n,e);var t=Mi(n);function n(e,r){var i;return Ai(this,n),(i=t.call(this)).ue=e,i.currentSequenceNumber=r,i}return Ni(n)}(Kk);function Fb(e,t){var n=lk(e);return Yk.O(n.ue,t)}function Ub(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Vb(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function zb(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var jb=function(){function e(t,n){Ai(this,e),this.comparator=t,this.root=n||qb.EMPTY}return Ni(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,qb.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,qb.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Bb(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Bb(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Bb(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Bb(this.root,e,this.comparator,!0)}}]),e}(),Bb=function(){function e(t,n,r,i){Ai(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Ni(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),qb=function(){function e(t,n,r,i,a){Ai(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Ni(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw sk();if(this.right.isRed())throw sk();var e=this.left.check();if(e!==this.right.check())throw sk();return e+(this.isRed()?0:1)}}]),e}();qb.EMPTY=null,qb.RED=!0,qb.BLACK=!1,qb.EMPTY=new(function(){function e(){Ai(this,e),this.size=0}return Ni(e,[{key:"key",get:function(){throw sk()}},{key:"value",get:function(){throw sk()}},{key:"color",get:function(){throw sk()}},{key:"left",get:function(){throw sk()}},{key:"right",get:function(){throw sk()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new qb(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Kb=function(){function e(t){Ai(this,e),this.comparator=t,this.data=new jb(this.comparator)}return Ni(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Gb(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Gb(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Gb=function(){function e(t){Ai(this,e),this.iter=t}return Ni(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Hb(e){return e.hasNext()?e.getNext():void 0}var Wb=function(){function e(t){Ai(this,e),this.fields=t,t.sort(Pk.comparator)}return Ni(e,[{key:"unionWith",value:function(t){var n,r=new Kb(Pk.comparator),i=Pi(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=Pi(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=Pi(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ik(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Qb=function(e){Oi(n,e);var t=Mi(n);function n(){var e;return Ai(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return Ni(n)}(Ui(Error));var Yb=function(e){function t(e){Ai(this,t),this.binaryString=e}return Ni(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Sk(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Qb("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Yb.EMPTY_BYTE_STRING=new Yb("");var Xb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $b(e){if(ck(!!e),"string"==typeof e){var t=0,n=Xb.exec(e);if(ck(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Jb(e.seconds),nanos:Jb(e.nanos)}}function Jb(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Zb(e){return"string"==typeof e?Yb.fromBase64String(e):Yb.fromUint8Array(e)}function ew(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function tw(e){var t=e.mapValue.fields.__previous_value__;return ew(t)?tw(t):t}function nw(e){var t=$b(e.mapValue.fields.__local_write_time__.timestampValue);return new Tk(t.seconds,t.nanos)}var rw=Ni((function e(t,n,r,i,a,o,u,s,c){Ai(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),iw=function(){function e(t,n){Ai(this,e),this.projectId=t,this.database=n||"(default)"}return Ni(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),aw={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ow={nullValue:"NULL_VALUE"};function uw(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ew(e)?4:ww(e)?9007199254740991:10:sk()}function sw(e,t){if(e===t)return!0;var n=uw(e);if(n!==uw(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return nw(e).isEqual(nw(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=$b(e.timestampValue),r=$b(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Zb(e.bytesValue).isEqual(Zb(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Jb(e.geoPointValue.latitude)===Jb(t.geoPointValue.latitude)&&Jb(e.geoPointValue.longitude)===Jb(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Jb(e.integerValue)===Jb(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Jb(e.doubleValue),r=Jb(t.doubleValue);return n===r?ub(n)===ub(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ik(e.arrayValue.values||[],t.arrayValue.values||[],sw);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ub(n)!==Ub(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!sw(n[i],r[i])))return!1;return!0}(e,t);default:return sk()}}function cw(e,t){return void 0!==(e.values||[]).find((function(e){return sw(e,t)}))}function lw(e,t){if(e===t)return 0;var n=uw(e),r=uw(t);if(n!==r)return Sk(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Sk(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Jb(e.integerValue||e.doubleValue),r=Jb(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return fw(e.timestampValue,t.timestampValue);case 4:return fw(nw(e),nw(t));case 5:return Sk(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Zb(e),r=Zb(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Sk(n[i],r[i]);if(0!==a)return a}return Sk(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Sk(Jb(e.latitude),Jb(t.latitude));return 0!==n?n:Sk(Jb(e.longitude),Jb(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=lw(n[i],r[i]);if(a)return a}return Sk(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===aw.mapValue&&t===aw.mapValue)return 0;if(e===aw.mapValue)return 1;if(t===aw.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Sk(r[o],a[o]);if(0!==u)return u;var s=lw(n[r[o]],i[a[o]]);if(0!==s)return s}return Sk(r.length,a.length)}(e.mapValue,t.mapValue);default:throw sk()}}function fw(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Sk(e,t);var n=$b(e),r=$b(t),i=Sk(n.seconds,r.seconds);return 0!==i?i:Sk(n.nanos,r.nanos)}function hw(e){return dw(e)}function dw(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=$b(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Zb(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ok.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Pi(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=dw(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Pi(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(dw(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):sk()}function pw(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function vw(e){return!!e&&"integerValue"in e}function mw(e){return!!e&&"arrayValue"in e}function yw(e){return!!e&&"nullValue"in e}function gw(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function kw(e){return!!e&&"mapValue"in e}function bw(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Vb(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=bw(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=bw(e.arrayValue.values[r]);return n}return Object.assign({},e)}function ww(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function _w(e){return"nullValue"in e?ow:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?pw(iw.empty(),Ok.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:sk()}function xw(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?pw(iw.empty(),Ok.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?aw:sk()}function Sw(e,t){var n=lw(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Iw(e,t){var n=lw(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Ew=function(){function e(t){Ai(this,e),this.value=t}return Ni(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!kw(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bw(t)}},{key:"setAll",value:function(e){var t=this,n=Pk.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=bw(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());kw(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return sw(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];kw(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Vb(t,(function(t,n){return e[t]=n}));var r,i=Pi(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(bw(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Tw(e){var t=[];return Vb(e.fields,(function(e,n){var r=new Pk([e]);if(kw(n)){var i=Tw(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Pi(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Wb(t)}var Cw=function(){function e(t,n,r,i,a,o,u){Ai(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return Ni(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Ck.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Ew.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Ew.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Ck.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Ck.min(),Ck.min(),Ck.min(),Ew.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Ck.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Ck.min(),Ck.min(),Ew.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Ck.min(),Ck.min(),Ew.empty(),2)}}]),e}(),Aw=Ni((function e(t,n){Ai(this,e),this.position=t,this.inclusive=n}));function Rw(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Ok.comparator(Ok.fromName(o.referenceValue),n.key):lw(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Nw(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!sw(e.position[n],t.position[n]))return!1;return!0}var Pw=Ni((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Ai(this,e),this.field=t,this.dir=n}));function Ow(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Dw=Ni((function e(){Ai(this,e)})),Lw=function(e){Oi(n,e);var t=Mi(n);function n(e,r,i){var a;return Ai(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Ni(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(lw(t,this.value)):null!==t&&uw(this.value)===uw(t)&&this.matchesComparison(lw(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return sk()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Gw(e,t,r):"array-contains"===t?new Yw(e,r):"in"===t?new Xw(e,r):"not-in"===t?new $w(e,r):"array-contains-any"===t?new Jw(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Hw(e,n):new Ww(e,n)}}]),n}(Dw),Mw=function(e){Oi(n,e);var t=Mi(n);function n(e,r){var i;return Ai(this,n),(i=t.call(this)).filters=e,i.op=r,i.ce=null,i}return Ni(n,[{key:"matches",value:function(e){return Fw(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ce||(this.ce=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ce}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.le((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"le",value:function(e){var t,n=Pi(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Dw);function Fw(e){return"and"===e.op}function Uw(e){return"or"===e.op}function Vw(e){return zw(e)&&Fw(e)}function zw(e){var t,n=Pi(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Mw)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function jw(e){if(e instanceof Lw)return e.field.canonicalString()+e.op.toString()+hw(e.value);if(Vw(e))return e.filters.map((function(e){return jw(e)})).join(",");var t=e.filters.map((function(e){return jw(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Bw(e,t){return e instanceof Lw?function(e,t){return t instanceof Lw&&e.op===t.op&&e.field.isEqual(t.field)&&sw(e.value,t.value)}(e,t):e instanceof Mw?function(e,t){return t instanceof Mw&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Bw(n,t.filters[r])}),!0)}(e,t):void sk()}function qw(e,t){var n=e.filters.concat(t);return Mw.create(n,e.op)}function Kw(e){return e instanceof Lw?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(hw(e.value))}(e):e instanceof Mw?function(e){return e.op.toString()+" {"+e.getFilters().map(Kw).join(" ,")+"}"}(e):"Filter"}var Gw=function(e){Oi(n,e);var t=Mi(n);function n(e,r,i){var a;return Ai(this,n),(a=t.call(this,e,r,i)).key=Ok.fromName(i.referenceValue),a}return Ni(n,[{key:"matches",value:function(e){var t=Ok.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Lw),Hw=function(e){Oi(n,e);var t=Mi(n);function n(e,r){var i;return Ai(this,n),(i=t.call(this,e,"in",r)).keys=Qw("in",r),i}return Ni(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Lw),Ww=function(e){Oi(n,e);var t=Mi(n);function n(e,r){var i;return Ai(this,n),(i=t.call(this,e,"not-in",r)).keys=Qw("not-in",r),i}return Ni(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Lw);function Qw(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Ok.fromName(e.referenceValue)}))}var Yw=function(e){Oi(n,e);var t=Mi(n);function n(e,r){return Ai(this,n),t.call(this,e,"array-contains",r)}return Ni(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return mw(t)&&cw(t.arrayValue,this.value)}}]),n}(Lw),Xw=function(e){Oi(n,e);var t=Mi(n);function n(e,r){return Ai(this,n),t.call(this,e,"in",r)}return Ni(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&cw(this.value.arrayValue,t)}}]),n}(Lw),$w=function(e){Oi(n,e);var t=Mi(n);function n(e,r){return Ai(this,n),t.call(this,e,"not-in",r)}return Ni(n,[{key:"matches",value:function(e){if(cw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!cw(this.value.arrayValue,t)}}]),n}(Lw),Jw=function(e){Oi(n,e);var t=Mi(n);function n(e,r){return Ai(this,n),t.call(this,e,"array-contains-any",r)}return Ni(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!mw(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return cw(t.value.arrayValue,e)}))}}]),n}(Lw),Zw=Ni((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Ai(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.he=null}));function e_(e){return new Zw(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function t_(e){var t=lk(e);if(null===t.he){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return jw(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),ob(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return hw(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return hw(e)})).join(",")),t.he=n}return t.he}function n_(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Ow(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Bw(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Nw(e.startAt,t.startAt)&&Nw(e.endAt,t.endAt)}function r_(e){return Ok.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function i_(e,t){return e.filters.filter((function(e){return e instanceof Lw&&e.field.isEqual(t)}))}function a_(e,t,n){var r,i=ow,a=!0,o=Pi(i_(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=ow,c=!0;switch(u.op){case"<":case"<=":s=_w(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=ow}Sw({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Sw({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function o_(e,t,n){var r,i=aw,a=!0,o=Pi(i_(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=aw,c=!0;switch(u.op){case">=":case">":s=xw(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=aw}Iw({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Iw({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var u_=Ni((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Ai(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.Pe=null,this.Ie=null,this.de=null,this.startAt,this.endAt}));function s_(e,t,n,r,i,a,o,u){return new u_(e,t,n,r,i,a,o,u)}function c_(e){return new u_(e)}function l_(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function f_(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function h_(e){var t,n=Pi(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function d_(e){return null!==e.collectionGroup}function p_(e){var t=lk(e);if(null===t.Pe){t.Pe=[];var n=h_(t),r=f_(t);if(null!==n&&null===r)n.isKeyField()||t.Pe.push(new Pw(n)),t.Pe.push(new Pw(Pk.keyField(),"asc"));else{var i,a=!1,o=Pi(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.Pe.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.Pe.push(new Pw(Pk.keyField(),s))}}}return t.Pe}function v_(e){var t=lk(e);return t.Ie||(t.Ie=m_(t,p_(e))),t.Ie}function m_(e,t){if("F"===e.limitType)return e_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);t=t.map((function(e){var t="desc"===e.dir?"asc":"desc";return new Pw(e.field,t)}));var n=e.endAt?new Aw(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Aw(e.startAt.position,e.startAt.inclusive):null;return e_(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}function y_(e,t){t.getFirstInequalityField(),h_(e);var n=e.filters.concat([t]);return new u_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function g_(e,t,n){return new u_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function k_(e,t){return n_(v_(e),v_(t))&&e.limitType===t.limitType}function b_(e){return"".concat(t_(v_(e)),"|lt:").concat(e.limitType)}function w_(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Kw(e)})).join(", "),"]")),ob(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return hw(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return hw(e)})).join(",")),"Target(".concat(t,")")}(v_(e)),"; limitType=").concat(e.limitType,")")}function __(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ok.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Pi(p_(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Pi(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Rw(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,p_(e),t))&&!(e.endAt&&!function(e,t,n){var r=Rw(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,p_(e),t))}(e,t)}function x_(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function S_(e){return function(t,n){var r,i=!1,a=Pi(p_(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=I_(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function I_(e,t,n){var r=e.field.isKeyField()?Ok.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?lw(r,i):sk()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return sk()}}var E_=function(){function e(t,n){Ai(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Ni(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Pi(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Vb(this.inner,(function(t,n){var r,i=Pi(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return zb(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),T_=new jb(Ok.comparator);function C_(){return T_}var A_=new jb(Ok.comparator);function R_(){for(var e=A_,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function N_(e){var t=A_;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function P_(){return D_()}function O_(){return D_()}function D_(){return new E_((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var L_=new jb(Ok.comparator),M_=new Kb(Ok.comparator);function F_(){for(var e=M_,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var U_=new Kb(Sk);function V_(){return U_}function z_(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ub(t)?"-0":t}}function j_(e){return{integerValue:""+e}}function B_(e,t){return sb(t)?j_(t):z_(e,t)}var q_=Ni((function e(){Ai(this,e),this._=void 0}));function K_(e,t,n){return e instanceof W_?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ew(t)&&(t=tw(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Q_?Y_(e,t):e instanceof X_?$_(e,t):function(e,t){var n=H_(e,t),r=Z_(n)+Z_(e.Te);return vw(n)&&vw(e.Te)?j_(r):z_(e.serializer,r)}(e,t)}function G_(e,t,n){return e instanceof Q_?Y_(e,t):e instanceof X_?$_(e,t):n}function H_(e,t){return e instanceof J_?function(e){return vw(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var W_=function(e){Oi(n,e);var t=Mi(n);function n(){return Ai(this,n),t.apply(this,arguments)}return Ni(n)}(q_),Q_=function(e){Oi(n,e);var t=Mi(n);function n(e){var r;return Ai(this,n),(r=t.call(this)).elements=e,r}return Ni(n)}(q_);function Y_(e,t){var n,r=ex(t),i=Pi(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return sw(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var X_=function(e){Oi(n,e);var t=Mi(n);function n(e){var r;return Ai(this,n),(r=t.call(this)).elements=e,r}return Ni(n)}(q_);function $_(e,t){var n,r=ex(t),i=Pi(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!sw(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var J_=function(e){Oi(n,e);var t=Mi(n);function n(e,r){var i;return Ai(this,n),(i=t.call(this)).serializer=e,i.Te=r,i}return Ni(n)}(q_);function Z_(e){return Jb(e.integerValue||e.doubleValue)}function ex(e){return mw(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var tx=Ni((function e(t,n){Ai(this,e),this.field=t,this.transform=n}));var nx=Ni((function e(t,n){Ai(this,e),this.version=t,this.transformResults=n})),rx=function(){function e(t,n){Ai(this,e),this.updateTime=t,this.exists=n}return Ni(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function ix(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var ax=Ni((function e(){Ai(this,e)}));function ox(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new gx(e.key,rx.none()):new fx(e.key,e.data,rx.none());var n,r=e.data,i=Ew.empty(),a=new Kb(Pk.comparator),o=Pi(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new hx(e.key,i,new Wb(a.toArray()),rx.none())}function ux(e,t,n){e instanceof fx?function(e,t,n){var r=e.value.clone(),i=px(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof hx?function(e,t,n){if(ix(e.precondition,t)){var r=px(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(dx(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function sx(e,t,n,r){return e instanceof fx?function(e,t,n,r){if(!ix(e.precondition,t))return n;var i=e.value.clone(),a=vx(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof hx?function(e,t,n,r){if(!ix(e.precondition,t))return n;var i=vx(e.fieldTransforms,r,t),a=t.data;return a.setAll(dx(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return ix(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function cx(e,t){var n,r=null,i=Pi(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=H_(a.transform,o||null);null!=u&&(null===r&&(r=Ew.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function lx(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ik(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Q_&&t instanceof Q_||e instanceof X_&&t instanceof X_?Ik(e.elements,t.elements,sw):e instanceof J_&&t instanceof J_?sw(e.Te,t.Te):e instanceof W_&&t instanceof W_}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var fx=function(e){Oi(n,e);var t=Mi(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Ai(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Ni(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ax),hx=function(e){Oi(n,e);var t=Mi(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Ai(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Ni(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(ax);function dx(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function px(e,t,n){var r=new Map;ck(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,G_(o,u,n[i]))}return r}function vx(e,t,n){var r,i=new Map,a=Pi(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,K_(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var mx,yx,gx=function(e){Oi(n,e);var t=Mi(n);function n(e,r){var i;return Ai(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Ni(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ax),kx=function(e){Oi(n,e);var t=Mi(n);function n(e,r){var i;return Ai(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Ni(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ax),bx=function(){function e(t,n,r,i){Ai(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Ni(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&ux(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=Pi(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=sx(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=Pi(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=sx(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=O_();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=ox(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Ck.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),F_())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ik(this.mutations,e.mutations,(function(e,t){return lx(e,t)}))&&Ik(this.baseMutations,e.baseMutations,(function(e,t){return lx(e,t)}))}}]),e}(),wx=function(){function e(t,n,r,i){Ai(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Ni(e,null,[{key:"from",value:function(t,n,r){ck(t.mutations.length===r.length);for(var i=L_,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),_x=function(){function e(t,n){Ai(this,e),this.largestBatchId=t,this.mutation=n}return Ni(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),xx=Ni((function e(t,n){Ai(this,e),this.count=t,this.unchangedNames=n}));function Sx(e){switch(e){default:return sk();case fk.CANCELLED:case fk.UNKNOWN:case fk.DEADLINE_EXCEEDED:case fk.RESOURCE_EXHAUSTED:case fk.INTERNAL:case fk.UNAVAILABLE:case fk.UNAUTHENTICATED:return!1;case fk.INVALID_ARGUMENT:case fk.NOT_FOUND:case fk.ALREADY_EXISTS:case fk.PERMISSION_DENIED:case fk.FAILED_PRECONDITION:case fk.ABORTED:case fk.OUT_OF_RANGE:case fk.UNIMPLEMENTED:case fk.DATA_LOSS:return!0}}function Ix(e){if(void 0===e)return ak("GRPC error has no .code"),fk.UNKNOWN;switch(e){case mx.OK:return fk.OK;case mx.CANCELLED:return fk.CANCELLED;case mx.UNKNOWN:return fk.UNKNOWN;case mx.DEADLINE_EXCEEDED:return fk.DEADLINE_EXCEEDED;case mx.RESOURCE_EXHAUSTED:return fk.RESOURCE_EXHAUSTED;case mx.INTERNAL:return fk.INTERNAL;case mx.UNAVAILABLE:return fk.UNAVAILABLE;case mx.UNAUTHENTICATED:return fk.UNAUTHENTICATED;case mx.INVALID_ARGUMENT:return fk.INVALID_ARGUMENT;case mx.NOT_FOUND:return fk.NOT_FOUND;case mx.ALREADY_EXISTS:return fk.ALREADY_EXISTS;case mx.PERMISSION_DENIED:return fk.PERMISSION_DENIED;case mx.FAILED_PRECONDITION:return fk.FAILED_PRECONDITION;case mx.ABORTED:return fk.ABORTED;case mx.OUT_OF_RANGE:return fk.OUT_OF_RANGE;case mx.UNIMPLEMENTED:return fk.UNIMPLEMENTED;case mx.DATA_LOSS:return fk.DATA_LOSS;default:return sk()}}(yx=mx||(mx={}))[yx.OK=0]="OK",yx[yx.CANCELLED=1]="CANCELLED",yx[yx.UNKNOWN=2]="UNKNOWN",yx[yx.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yx[yx.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yx[yx.NOT_FOUND=5]="NOT_FOUND",yx[yx.ALREADY_EXISTS=6]="ALREADY_EXISTS",yx[yx.PERMISSION_DENIED=7]="PERMISSION_DENIED",yx[yx.UNAUTHENTICATED=16]="UNAUTHENTICATED",yx[yx.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yx[yx.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yx[yx.ABORTED=10]="ABORTED",yx[yx.OUT_OF_RANGE=11]="OUT_OF_RANGE",yx[yx.UNIMPLEMENTED=12]="UNIMPLEMENTED",yx[yx.INTERNAL=13]="INTERNAL",yx[yx.UNAVAILABLE=14]="UNAVAILABLE",yx[yx.DATA_LOSS=15]="DATA_LOSS";var Ex=null;function Tx(){return new TextEncoder}var Cx=new Jg([4294967295,4294967295],0);function Ax(e){var t=Tx().encode(e),n=new $g;return n.update(t),new Uint8Array(n.digest())}function Rx(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Jg([n,r],0),new Jg([i,a],0)]}var Nx=function(){function e(t,n,r){if(Ai(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Px("Invalid padding: ".concat(n));if(r<0)throw new Px("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new Px("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new Px("Invalid padding when bitmap length is 0: ".concat(n));this.Ae=8*t.length-n,this.Re=Jg.fromNumber(this.Ae)}return Ni(e,[{key:"Ve",value:function(e,t,n){var r=e.add(t.multiply(Jg.fromNumber(n)));return 1===r.compare(Cx)&&(r=new Jg([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Re).toNumber()}},{key:"me",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.Ae)return!1;for(var t=c(Rx(Ax(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Ve(n,r,i);if(!this.me(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.Ae)for(var t=c(Rx(Ax(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Ve(n,r,i);this.fe(a)}}},{key:"fe",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),Px=function(e){Oi(n,e);var t=Mi(n);function n(){var e;return Ai(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return Ni(n)}(Ui(Error)),Ox=function(){function e(t,n,r,i,a){Ai(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Ni(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Dx.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Ck.min(),i,new jb(Sk),C_(),F_())}}]),e}(),Dx=function(){function e(t,n,r,i,a){Ai(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Ni(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,F_(),F_(),F_())}}]),e}(),Lx=Ni((function e(t,n,r,i){Ai(this,e),this.ge=t,this.removedTargetIds=n,this.key=r,this.pe=i})),Mx=Ni((function e(t,n){Ai(this,e),this.targetId=t,this.ye=n})),Fx=Ni((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yb.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Ai(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Ux=function(){function e(){Ai(this,e),this.we=0,this.Se=jx(),this.be=Yb.EMPTY_BYTE_STRING,this.De=!1,this.Ce=!0}return Ni(e,[{key:"current",get:function(){return this.De}},{key:"resumeToken",get:function(){return this.be}},{key:"ve",get:function(){return 0!==this.we}},{key:"Fe",get:function(){return this.Ce}},{key:"Me",value:function(e){e.approximateByteSize()>0&&(this.Ce=!0,this.be=e)}},{key:"xe",value:function(){var e=F_(),t=F_(),n=F_();return this.Se.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:sk()}})),new Dx(this.be,this.De,e,t,n)}},{key:"Oe",value:function(){this.Ce=!1,this.Se=jx()}},{key:"Ne",value:function(e,t){this.Ce=!0,this.Se=this.Se.insert(e,t)}},{key:"Be",value:function(e){this.Ce=!0,this.Se=this.Se.remove(e)}},{key:"Le",value:function(){this.we+=1}},{key:"ke",value:function(){this.we-=1}},{key:"qe",value:function(){this.Ce=!0,this.De=!0}}]),e}(),Vx=function(){function e(t){Ai(this,e),this.Qe=t,this.Ke=new Map,this.$e=C_(),this.Ue=zx(),this.We=new jb(Sk)}return Ni(e,[{key:"Ge",value:function(e){var t,n=Pi(e.ge);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.pe&&e.pe.isFoundDocument()?this.ze(r,e.pe):this.je(r,e.key,e.pe)}}catch(u){n.e(u)}finally{n.f()}var i,a=Pi(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.je(o,e.key,e.pe)}}catch(u){a.e(u)}finally{a.f()}}},{key:"He",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Je(n);switch(e.state){case 0:t.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.ve||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.ve||t.removeTarget(n);break;case 3:t.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:t.Ye(n)&&(t.Ze(n),r.Me(e.resumeToken));break;default:sk()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ke.forEach((function(e,r){n.Ye(r)&&t(r)}))}},{key:"Xe",value:function(e){var t=e.targetId,n=e.ye.count,r=this.et(t);if(r){var i=r.target;if(r_(i))if(0===n){var a=new Ok(i.path);this.je(t,a,Cw.newNoDocument(a,Ck.min()))}else ck(1===n);else{var o=this.tt(t);if(o!==n){var u=this.nt(e),s=u?this.rt(u,e,o):1;if(0!==s){this.Ze(t);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(t,c)}null==Ex||Ex.it(function(e,t,n,r,i){var a,o,u,s,c,l,f={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(f.bloomFilter={applied:0===i,hashCount:null!==(a=null==h?void 0:h.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(s=null===(u=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===u?void 0:u.length)&&void 0!==s?s:0,padding:null!==(l=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:function(e){var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),f}(o,e.ye,this.Qe.st(),u,s))}}}}},{key:"nt",value:function(e){var t=e.ye.unchangedNames;if(!t||!t.bits)return null;var n,r,i=t.bits,a=i.bitmap,o=void 0===a?"":a,u=i.padding,s=void 0===u?0:u,c=t.hashCount,l=void 0===c?0:c;try{n=Zb(o).toUint8Array()}catch(e){if(e instanceof Qb)return ok("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new Nx(n,s,l)}catch(e){return ok(e instanceof Px?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===r.Ae?null:r}},{key:"rt",value:function(e,t,n){return t.ye.count===n-this.ot(e,t.targetId)?0:2}},{key:"ot",value:function(e,t){var n=this,r=this.Qe.getRemoteKeysForTarget(t),i=0;return r.forEach((function(r){var a=n.Qe.st(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());e.mightContain(o)||(n.je(t,r,null),i++)})),i}},{key:"_t",value:function(e){var t=this,n=new Map;this.Ke.forEach((function(r,i){var a=t.et(i);if(a){if(r.current&&r_(a.target)){var o=new Ok(a.target.path);null!==t.$e.get(o)||t.ut(i,o)||t.je(i,o,Cw.newNoDocument(o,e))}r.Fe&&(n.set(i,r.xe()),r.Oe())}}));var r=F_();this.Ue.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.et(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$e.forEach((function(t,n){return n.setReadTime(e)}));var i=new Ox(e,n,this.We,this.$e,r);return this.$e=C_(),this.Ue=zx(),this.We=new jb(Sk),i}},{key:"ze",value:function(e,t){if(this.Ye(e)){var n=this.ut(e,t.key)?2:0;this.Je(e).Ne(t.key,n),this.$e=this.$e.insert(t.key,t),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}}},{key:"je",value:function(e,t,n){if(this.Ye(e)){var r=this.Je(e);this.ut(e,t)?r.Ne(t,1):r.Be(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),n&&(this.$e=this.$e.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ke.delete(e)}},{key:"tt",value:function(e){var t=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Le",value:function(e){this.Je(e).Le()}},{key:"Je",value:function(e){var t=this.Ke.get(e);return t||(t=new Ux,this.Ke.set(e,t)),t}},{key:"ct",value:function(e){var t=this.Ue.get(e);return t||(t=new Kb(Sk),this.Ue=this.Ue.insert(e,t)),t}},{key:"Ye",value:function(e){var t=null!==this.et(e);return t||ik("WatchChangeAggregator","Detected inactive target",e),t}},{key:"et",value:function(e){var t=this.Ke.get(e);return t&&t.ve?null:this.Qe.lt(e)}},{key:"Ze",value:function(e){var t=this;this.Ke.set(e,new Ux),this.Qe.getRemoteKeysForTarget(e).forEach((function(n){t.je(e,n,null)}))}},{key:"ut",value:function(e,t){return this.Qe.getRemoteKeysForTarget(e).has(t)}}]),e}();function zx(){return new jb(Ok.comparator)}function jx(){return new jb(Ok.comparator)}var Bx={asc:"ASCENDING",desc:"DESCENDING"},qx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kx={and:"AND",or:"OR"},Gx=Ni((function e(t,n){Ai(this,e),this.databaseId=t,this.useProto3Json=n}));function Hx(e,t){return e.useProto3Json||ob(t)?t:{value:t}}function Wx(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Qx(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Yx(e,t){return Wx(e,t.toTimestamp())}function Xx(e){return ck(!!e),Ck.fromTimestamp(function(e){var t=$b(e);return new Tk(t.seconds,t.nanos)}(e))}function $x(e,t){return function(e){return new Rk(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Jx(e){var t=Rk.fromString(e);return ck(wS(t)),t}function Zx(e,t){return $x(e.databaseId,t.path)}function eS(e,t){var n=Jx(t);if(n.get(1)!==e.databaseId.projectId)throw new hk(fk.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new hk(fk.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ok(iS(n))}function tS(e,t){return $x(e.databaseId,t)}function nS(e){var t=Jx(e);return 4===t.length?Rk.emptyPath():iS(t)}function rS(e){return new Rk(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function iS(e){return ck(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function aS(e,t,n){return{name:Zx(e,t),fields:n.value.mapValue.fields}}function oS(e,t,n){var r=eS(e,t.name),i=Xx(t.updateTime),a=t.createTime?Xx(t.createTime):Ck.min(),o=new Ew({mapValue:{fields:t.fields}}),u=Cw.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function uS(e,t){return"found"in t?function(e,t){ck(!!t.found),t.found.name,t.found.updateTime;var n=eS(e,t.found.name),r=Xx(t.found.updateTime),i=t.found.createTime?Xx(t.found.createTime):Ck.min(),a=new Ew({mapValue:{fields:t.found.fields}});return Cw.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){ck(!!t.missing),ck(!!t.readTime);var n=eS(e,t.missing),r=Xx(t.readTime);return Cw.newNoDocument(n,r)}(e,t):sk()}function sS(e,t){var n;if(t instanceof fx)n={update:aS(e,t.key,t.value)};else if(t instanceof gx)n={delete:Zx(e,t.key)};else if(t instanceof hx)n={update:aS(e,t.key,t.data),updateMask:bS(t.fieldMask)};else{if(!(t instanceof kx))return sk();n={verify:Zx(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof W_)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Q_)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof X_)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof J_)return{fieldPath:t.field.canonicalString(),increment:n.Te};throw sk()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Yx(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:sk()}(e,t.precondition)),n}function cS(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?rx.updateTime(Xx(e.updateTime)):void 0!==e.exists?rx.exists(e.exists):rx.none()}(t.currentDocument):rx.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)ck("REQUEST_TIME"===t.setToServerValue),n=new W_;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Q_(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new X_(i)}else"increment"in t?n=new J_(e,t.increment):sk();var a=Pk.fromServerFormat(t.fieldPath);return new tx(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=eS(e,t.update.name),a=new Ew({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Wb(t.map((function(e){return Pk.fromServerFormat(e)})))}(t.updateMask);return new hx(i,a,o,n,r)}return new fx(i,a,n,r)}if(t.delete){var u=eS(e,t.delete);return new gx(u,n)}if(t.verify){var s=eS(e,t.verify);return new kx(s,n)}return sk()}function lS(e,t){return{documents:[tS(e,t.path)]}}function fS(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=tS(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=tS(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return kS(Mw.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:yS(e.field),direction:pS(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=Hx(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function hS(e){var t=nS(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ck(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=dS(e);return t instanceof Mw&&Vw(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=function(e){return e.map((function(e){return function(e){return new Pw(gS(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var s=null;n.limit&&(s=function(e){var t;return ob(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Aw(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Aw(n,t)}(n.endAt)),s_(t,i,u,o,s,"F",c,l)}function dS(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=gS(e.unaryFilter.field);return Lw.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=gS(e.unaryFilter.field);return Lw.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=gS(e.unaryFilter.field);return Lw.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=gS(e.unaryFilter.field);return Lw.create(i,"!=",{nullValue:"NULL_VALUE"});default:return sk()}}(e):void 0!==e.fieldFilter?function(e){return Lw.create(gS(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return sk()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Mw.create(e.compositeFilter.filters.map((function(e){return dS(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return sk()}}(e.compositeFilter.op))}(e):sk()}function pS(e){return Bx[e]}function vS(e){return qx[e]}function mS(e){return Kx[e]}function yS(e){return{fieldPath:e.canonicalString()}}function gS(e){return Pk.fromServerFormat(e.fieldPath)}function kS(e){return e instanceof Lw?function(e){if("=="===e.op){if(gw(e.value))return{unaryFilter:{field:yS(e.field),op:"IS_NAN"}};if(yw(e.value))return{unaryFilter:{field:yS(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(gw(e.value))return{unaryFilter:{field:yS(e.field),op:"IS_NOT_NAN"}};if(yw(e.value))return{unaryFilter:{field:yS(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yS(e.field),op:vS(e.op),value:e.value}}}(e):e instanceof Mw?function(e){var t=e.getFilters().map((function(e){return kS(e)}));return 1===t.length?t[0]:{compositeFilter:{op:mS(e.op),filters:t}}}(e):sk()}function bS(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function wS(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var _S=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ck.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ck.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Yb.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Ai(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return Ni(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),xS=Ni((function e(t){Ai(this,e),this.ht=t}));function SS(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:IS(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Zx(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Wx(e,t.version.toTimestamp()),createTime:Wx(e,t.createTime.toTimestamp())}}(e.ht,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ES(t.version)};else{if(!t.isUnknownDocument())return sk();r.unknownDocument={path:n.path.toArray(),version:ES(t.version)}}return r}function IS(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ES(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function TS(e){var t=new Tk(e.seconds,e.nanoseconds);return Ck.fromTimestamp(t)}function CS(e,t){for(var n=(t.baseMutations||[]).map((function(t){return cS(e.ht,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return cS(e.ht,t)})),u=Tk.fromMillis(t.localWriteTimeMs);return new bx(t.batchId,u,n,o)}function AS(e){var t,n=TS(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?TS(e.lastLimboFreeSnapshotVersion):Ck.min();return t=function(e){return void 0!==e.documents}(e.query)?function(e){return ck(1===e.documents.length),v_(c_(nS(e.documents[0])))}(e.query):function(e){return v_(hS(e))}(e.query),new _S(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,n,r,Yb.fromBase64String(e.resumeToken))}function RS(e,t){var n,r=ES(t.snapshotVersion),i=ES(t.lastLimboFreeSnapshotVersion);n=r_(t.target)?lS(e.ht,t.target):fS(e.ht,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:t_(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function NS(e){var t=hS({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?g_(t,t.limit,"L"):t}function PS(e,t){return new _x(t.largestBatchId,cS(e.ht,t.overlayMutation))}function OS(e,t){var n=t.path.lastSegment();return[e,cb(t.path.popLast()),n]}function DS(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:ES(r.readTime),documentKey:cb(r.documentKey.path),largestBatchId:r.largestBatchId}}var LS=function(){function e(){Ai(this,e)}return Ni(e,[{key:"getBundleMetadata",value:function(e,t){return MS(e).get(t).next((function(e){if(e)return function(e){return{id:e.bundleId,createTime:TS(e.createTime),version:e.version}}(e)}))}},{key:"saveBundleMetadata",value:function(e,t){return MS(e).put(function(e){return{bundleId:e.id,createTime:ES(Xx(e.createTime)),version:e.version}}(t))}},{key:"getNamedQuery",value:function(e,t){return FS(e).get(t).next((function(e){if(e)return function(e){return{name:e.name,query:NS(e.bundledQuery),readTime:TS(e.readTime)}}(e)}))}},{key:"saveNamedQuery",value:function(e,t){return FS(e).put(function(e){return{name:e.name,readTime:ES(Xx(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function MS(e){return Fb(e,"bundles")}function FS(e){return Fb(e,"namedQueries")}var US=function(){function e(t,n){Ai(this,e),this.serializer=t,this.userId=n}return Ni(e,[{key:"getOverlay",value:function(e,t){var n=this;return VS(e).get(OS(this.userId,t)).next((function(e){return e?PS(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=P_();return Wk.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new _x(t,a);i.push(r.It(e,o))})),Wk.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(cb(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(VS(e).J("collectionPathOverlayIndex",i))})),Wk.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=P_(),a=cb(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return VS(e).G("collectionPathOverlayIndex",o).next((function(e){var t,n=Pi(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=PS(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=P_(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return VS(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=PS(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"It",value:function(e,t){return VS(e).put(function(e,t,n){var r=c(OS(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:sS(e.ht,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"Pt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function VS(e){return Fb(e,"documentOverlays")}var zS=function(){function e(){Ai(this,e)}return Ni(e,[{key:"dt",value:function(e,t){this.Tt(e,t),t.Et()}},{key:"Tt",value:function(e,t){if("nullValue"in e)this.At(t,5);else if("booleanValue"in e)this.At(t,10),t.Rt(e.booleanValue?1:0);else if("integerValue"in e)this.At(t,15),t.Rt(Jb(e.integerValue));else if("doubleValue"in e){var n=Jb(e.doubleValue);isNaN(n)?this.At(t,13):(this.At(t,15),ub(n)?t.Rt(0):t.Rt(n))}else if("timestampValue"in e){var r=e.timestampValue;this.At(t,20),"string"==typeof r?t.Vt(r):(t.Vt("".concat(r.seconds||"")),t.Rt(r.nanos||0))}else if("stringValue"in e)this.ft(e.stringValue,t),this.gt(t);else if("bytesValue"in e)this.At(t,30),t.yt(Zb(e.bytesValue)),this.gt(t);else if("referenceValue"in e)this.wt(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.At(t,45),t.Rt(i.latitude||0),t.Rt(i.longitude||0)}else"mapValue"in e?ww(e)?this.At(t,Number.MAX_SAFE_INTEGER):(this.St(e.mapValue,t),this.gt(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.gt(t)):sk()}},{key:"ft",value:function(e,t){this.At(t,25),this.Dt(e,t)}},{key:"Dt",value:function(e,t){t.Vt(e)}},{key:"St",value:function(e,t){var n=e.fields||{};this.At(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.ft(a,t),this.Tt(n[a],t)}}},{key:"bt",value:function(e,t){var n=e.values||[];this.At(t,50);var r,i=Pi(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.Tt(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"wt",value:function(e,t){var n=this;this.At(t,37),Ok.fromName(e).path.forEach((function(e){n.At(t,60),n.Dt(e,t)}))}},{key:"At",value:function(e,t){e.Rt(t)}},{key:"gt",value:function(e){e.Rt(2)}}]),e}();function jS(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function BS(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=jS(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}zS.Ct=new zS;var qS=function(){function e(){Ai(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Ni(e,[{key:"vt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ft(n.value),n=t.next();this.Mt()}},{key:"xt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ot(n.value),n=t.next();this.Nt()}},{key:"Bt",value:function(e){var t,n=Pi(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{var a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Mt()}},{key:"Lt",value:function(e){var t,n=Pi(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{var a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Nt()}},{key:"kt",value:function(e){var t=this.qt(e),n=BS(t);this.Qt(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Kt",value:function(e){var t=this.qt(e),n=BS(t);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"$t",value:function(){this.Ut(255),this.Ut(255)}},{key:"Wt",value:function(){this.Gt(255),this.Gt(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"zt",value:function(){return this.buffer.slice(0,this.position)}},{key:"qt",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ft",value:function(e){var t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}},{key:"Ot",value:function(e){var t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}},{key:"Mt",value:function(){this.Ut(0),this.Ut(1)}},{key:"Nt",value:function(){this.Gt(0),this.Gt(1)}},{key:"Ut",value:function(e){this.Qt(1),this.buffer[this.position++]=e}},{key:"Gt",value:function(e){this.Qt(1),this.buffer[this.position++]=~e}},{key:"Qt",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),KS=function(){function e(t){Ai(this,e),this.jt=t}return Ni(e,[{key:"yt",value:function(e){this.jt.vt(e)}},{key:"Vt",value:function(e){this.jt.Bt(e)}},{key:"Rt",value:function(e){this.jt.kt(e)}},{key:"Et",value:function(){this.jt.$t()}}]),e}(),GS=function(){function e(t){Ai(this,e),this.jt=t}return Ni(e,[{key:"yt",value:function(e){this.jt.xt(e)}},{key:"Vt",value:function(e){this.jt.Lt(e)}},{key:"Rt",value:function(e){this.jt.Kt(e)}},{key:"Et",value:function(){this.jt.Wt()}}]),e}(),HS=function(){function e(){Ai(this,e),this.jt=new qS,this.Ht=new KS(this.jt),this.Jt=new GS(this.jt)}return Ni(e,[{key:"seed",value:function(e){this.jt.seed(e)}},{key:"Yt",value:function(e){return 0===e?this.Ht:this.Jt}},{key:"zt",value:function(){return this.jt.zt()}},{key:"reset",value:function(){this.jt.reset()}}]),e}(),WS=function(){function e(t,n,r,i){Ai(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return Ni(e,[{key:"Zt",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function QS(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=YS(e.arrayValue,t.arrayValue))?n:0!==(n=YS(e.directionalValue,t.directionalValue))?n:Ok.comparator(e.documentKey,t.documentKey)}function YS(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var XS=function(){function e(t){Ai(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Xt=t.orderBy,this.en=[];var n,r=Pi(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.tn=i:this.en.push(i)}}catch(a){r.e(a)}finally{r.f()}}return Ni(e,[{key:"nn",value:function(e){ck(e.collectionGroup===this.collectionId);var t=Lk(e);if(void 0!==t&&!this.rn(t))return!1;for(var n=Mk(e),r=new Set,i=0,a=0;i<n.length&&this.rn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.tn){if(!r.has(this.tn.field.canonicalString())){var o=n[i];if(!this.sn(this.tn,o)||!this.on(this.Xt[a++],o))return!1}++i}for(;i<n.length;++i){var u=n[i];if(a>=this.Xt.length||!this.on(this.Xt[a++],u))return!1}return!0}},{key:"_n",value:function(){var e,t=new Kb(Pk.comparator),n=[],r=Pi(this.en);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(!i.field.isKeyField())if("array-contains"===i.op||"array-contains-any"===i.op)n.push(new Fk(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),n.push(new Fk(i.field,0))}}}catch(s){r.e(s)}finally{r.f()}var a,o=Pi(this.Xt);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||t.has(u.field)||(t=t.add(u.field),n.push(new Fk(u.field,"asc"===u.dir?0:1)))}}catch(s){o.e(s)}finally{o.f()}return new Dk(Dk.UNKNOWN_ID,this.collectionId,n,Uk.empty())}},{key:"rn",value:function(e){var t,n=Pi(this.en);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.sn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"sn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"on",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function $S(e){var t,n;if(ck(e instanceof Lw||e instanceof Mw),e instanceof Lw){if(e instanceof Xw){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Lw.create(e.field,"==",t)})))||[];return Mw.create(r,"or")}return e}var i=e.filters.map((function(e){return $S(e)}));return Mw.create(i,e.op)}function JS(e){if(0===e.getFilters().length)return[];var t=nI($S(e));return ck(tI(t)),ZS(t)||eI(t)?[t]:t.getFilters()}function ZS(e){return e instanceof Lw}function eI(e){return e instanceof Mw&&Vw(e)}function tI(e){return ZS(e)||eI(e)||function(e){if(e instanceof Mw&&Uw(e)){var t,n=Pi(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!ZS(r)&&!eI(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function nI(e){if(ck(e instanceof Lw||e instanceof Mw),e instanceof Lw)return e;if(1===e.filters.length)return nI(e.filters[0]);var t=e.filters.map((function(e){return nI(e)})),n=Mw.create(t,e.op);return tI(n=aI(n))?n:(ck(n instanceof Mw),ck(Fw(n)),ck(n.filters.length>1),n.filters.reduce((function(e,t){return rI(e,t)})))}function rI(e,t){var n;return ck(e instanceof Lw||e instanceof Mw),ck(t instanceof Lw||t instanceof Mw),n=e instanceof Lw?t instanceof Lw?function(e,t){return Mw.create([e,t],"and")}(e,t):iI(e,t):t instanceof Lw?iI(t,e):function(e,t){if(ck(e.filters.length>0&&t.filters.length>0),Fw(e)&&Fw(t))return qw(e,t.getFilters());var n=Uw(e)?e:t,r=Uw(e)?t:e,i=n.filters.map((function(e){return rI(e,r)}));return Mw.create(i,"or")}(e,t),aI(n)}function iI(e,t){if(Fw(t))return qw(t,e.getFilters());var n=t.filters.map((function(t){return rI(e,t)}));return Mw.create(n,"or")}function aI(e){if(ck(e instanceof Lw||e instanceof Mw),e instanceof Lw)return e;var t=e.getFilters();if(1===t.length)return aI(t[0]);if(zw(e))return e;var n=t.map((function(e){return aI(e)})),r=[];return n.forEach((function(t){t instanceof Lw?r.push(t):t instanceof Mw&&(t.op===e.op?r.push.apply(r,m(t.filters)):r.push(t))})),1===r.length?r[0]:Mw.create(r,e.op)}var oI=function(){function e(){Ai(this,e),this.an=new uI}return Ni(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.an.add(t),Wk.resolve()}},{key:"getCollectionParents",value:function(e,t){return Wk.resolve(this.an.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Wk.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Wk.resolve()}},{key:"deleteAllFieldIndexes",value:function(e){return Wk.resolve()}},{key:"createTargetIndexes",value:function(e,t){return Wk.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Wk.resolve(null)}},{key:"getIndexType",value:function(e,t){return Wk.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Wk.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Wk.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Wk.resolve(jk.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Wk.resolve(jk.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Wk.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Wk.resolve()}}]),e}(),uI=function(){function e(){Ai(this,e),this.index={}}return Ni(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Kb(Rk.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Kb(Rk.comparator)).toArray()}}]),e}(),sI=new Uint8Array(0),cI=function(){function e(t,n){Ai(this,e),this.user=t,this.databaseId=n,this.un=new uI,this.cn=new E_((function(e){return t_(e)}),(function(e,t){return n_(e,t)})),this.uid=t.uid||""}return Ni(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.un.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.un.add(t)}));var a={collectionId:r,parent:cb(i)};return lI(e).put(a)}return Wk.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Ek(t),""],!1,!0);return lI(e).G(r).next((function(e){var r,i=Pi(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(hb(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=hI(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=dI(e);return a.next((function(e){o.put(DS(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=hI(e),r=dI(e),i=fI(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"deleteAllFieldIndexes",value:function(e){var t=hI(e),n=fI(e),r=dI(e);return t.J().next((function(){return n.J()})).next((function(){return r.J()}))}},{key:"createTargetIndexes",value:function(e,t){var n=this;return Wk.forEach(this.ln(t),(function(t){return n.getIndexType(e,t).next((function(r){if(0===r||1===r){var i=new XS(t);return n.addFieldIndex(e,i._n())}}))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=fI(e),i=!0,a=new Map;return Wk.forEach(this.ln(t),(function(t){return n.hn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=F_(),o=[];return Wk.forEach(a,(function(i,a){ik("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(","))}(i)," to execute ").concat(t_(t)));var u=function(e,t){var n=Lk(t);if(void 0===n)return null;var r,i=Pi(i_(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),s=function(e,t){var n,r=new Map,i=Pi(Mk(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=Pi(i_(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=[],i=!0,a=Pi(Mk(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?a_(e,o.fieldPath,e.startAt):o_(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Aw(r,i)}(a,i),l=function(e,t){var n,r=[],i=!0,a=Pi(Mk(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?o_(e,o.fieldPath,e.endAt):a_(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Aw(r,i)}(a,i),f=n.Pn(i,a,c),h=n.Pn(i,a,l),d=n.In(i,a,s),p=n.dn(i.indexId,u,f,c.inclusive,h,l.inclusive,d);return Wk.forEach(p,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=Ok.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Wk.resolve(null)}))}},{key:"ln",value:function(e){var t=this.cn.get(e);return t||(t=0===e.filters.length?[e]:JS(Mw.create(e.filters,"and")).map((function(t){return e_(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.cn.set(e,t),t)}},{key:"dn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.Tn(t[h/c]):sI,f=u.En(e,s,n[h%c],r),d=u.An(e,s,i[h%c],a),p=o.map((function(t){return u.En(e,s,t,!0)}));l.push.apply(l,m(u.createRange(f,d,p)))},h=0;h<s;++h)f();return l}},{key:"En",value:function(e,t,n,r){var i=new WS(e,Ok.empty(),t,n);return r?i:i.Zt()}},{key:"An",value:function(e,t,n,r){var i=new WS(e,Ok.empty(),t,n);return r?i.Zt():i}},{key:"hn",value:function(e,t){var n=new XS(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=Pi(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.nn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.ln(t);return Wk.forEach(i,(function(t){return n.hn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Kb(Pk.comparator),r=!1,i=Pi(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=Pi(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=Pi(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"Rn",value:function(e,t){var n,r=new HS,i=Pi(Mk(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Yt(a.kind);zS.Ct.dt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.zt()}},{key:"Tn",value:function(e){var t=new HS;return zS.Ct.dt(e,t.Yt(0)),t.zt()}},{key:"Vn",value:function(e,t){var n=new HS;return zS.Ct.dt(pw(this.databaseId,t),n.Yt(function(e){var t=Mk(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.zt()}},{key:"In",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new HS);var i,a=0,o=Pi(Mk(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=Pi(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.mn(t,s.fieldPath)&&mw(c))r=this.fn(r,s,c);else{var h=f.Yt(s.kind);zS.Ct.dt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.gn(r)}},{key:"Pn",value:function(e,t,n){return this.In(e,t,n.position)}},{key:"gn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].zt();return t}},{key:"fn",value:function(e,t,n){var r,i=m(e),a=[],o=Pi(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=Pi(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new HS;f.seed(l.zt()),zS.Ct.dt(s,f.Yt(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"mn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Lw&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=hI(e),i=dI(e);return(t?r.G("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.G()).next((function(e){var t=[];return Wk.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Uk(t.sequenceNumber,new jk(TS(t.readTime),new Ok(hb(t.documentKey)),t.largestBatchId)):Uk.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new Fk(Pk.fromServerFormat(n),r)}));return new Dk(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Sk(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=hI(e),a=dI(e);return this.pn(e).next((function(e){return i.G("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Wk.forEach(t,(function(t){return a.put(DS(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Wk.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Wk.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Wk.forEach(a,(function(r){return n.yn(e,t,r).next((function(t){var a=n.wn(i,r);return t.isEqual(a)?Wk.resolve():n.Sn(e,i,r,t,a)}))}))}))}))}},{key:"bn",value:function(e,t,n,r){return fI(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Vn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Dn",value:function(e,t,n,r){return fI(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Vn(n,t.key),t.key.path.toArray()])}},{key:"yn",value:function(e,t,n){var r=fI(e),i=new Kb(QS);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Vn(n,t)])},(function(e,r){i=i.add(new WS(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"wn",value:function(e,t){var n=new Kb(QS),r=this.Rn(t,e);if(null==r)return n;var i=Lk(t);if(null!=i){var a=e.data.field(i.fieldPath);if(mw(a)){var o,u=Pi(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new WS(t.indexId,e.key,this.Tn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new WS(t.indexId,e.key,sI,r));return n}},{key:"Sn",value:function(e,t,n,r,i){var a=this;ik("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Hb(a),s=Hb(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Hb(o)):l?(i(u),u=Hb(a)):(u=Hb(a),s=Hb(o))}}(r,i,QS,(function(r){o.push(a.bn(e,t,n,r))}),(function(r){o.push(a.Dn(e,t,n,r))})),Wk.waitFor(o)}},{key:"pn",value:function(e){var t=1;return dI(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return QS(e,t)})).filter((function(e,t,n){return!t||0!==QS(e,n[t-1])}));var r=[];r.push(e);var i,a=Pi(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=QS(o,e),s=QS(o,t);if(0===u)r[0]=e.Zt();else if(u>0&&s<0)r.push(o),r.push(o.Zt());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Cn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,sI,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,sI,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Cn",value:function(e,t){return QS(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(pI)}},{key:"getMinOffset",value:function(e,t){var n=this;return Wk.mapArray(this.ln(t),(function(t){return n.hn(e,t).next((function(e){return e||sk()}))})).next(pI)}}]),e}();function lI(e){return Fb(e,"collectionParents")}function fI(e){return Fb(e,"indexEntries")}function hI(e){return Fb(e,"indexConfiguration")}function dI(e){return Fb(e,"indexState")}function pI(e){ck(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Bk(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new jk(t.readTime,t.documentKey,n)}var vI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mI=function(){function e(t,n,r){Ai(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Ni(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function yI(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){ck(1===u)})));var c,l=[],f=Pi(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=vb(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Wk.waitFor(a).next((function(){return l}))}function gI(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw sk();t=e.noDocument}return JSON.stringify(t).length}mI.DEFAULT_COLLECTION_PERCENTILE=10,mI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mI.DEFAULT=new mI(41943040,mI.DEFAULT_COLLECTION_PERCENTILE,mI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mI.DISABLED=new mI(-1,0,0);var kI=function(){function e(t,n,r,i){Ai(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.vn={}}return Ni(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return wI(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=_I(e),o=wI(e);return o.add({}).next((function(u){ck("number"==typeof u);var s,c=new bx(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return sS(e.ht,t)})),i=n.mutations.map((function(t){return sS(e.ht,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new Kb((function(e,t){return Sk(e.canonicalString(),t.canonicalString())})),d=Pi(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=vb(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,mb))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.vn[u]=c.keys()})),Wk.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return wI(e).get(t).next((function(e){return e?(ck(e.userId===n.userId),CS(n.serializer,e)):null}))}},{key:"Fn",value:function(e,t){var n=this;return this.vn[t]?Wk.resolve(this.vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return wI(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(ck(t.batchId>=r),a=CS(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return wI(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return wI(e).G("userMutationsIndex",n).next((function(e){return e.map((function(e){return CS(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=pb(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return _I(e).Z({range:i},(function(r,i,o){var u=c(r,3),s=u[0],l=u[1],f=u[2],h=hb(l);if(s===n.userId&&t.path.isEqual(h))return wI(e).get(f).next((function(e){if(!e)throw sk();ck(e.userId===n.userId),a.push(CS(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Kb(Sk),i=[];return t.forEach((function(t){var a=pb(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=_I(e).Z({range:o},(function(e,i,a){var o=c(e,3),u=o[0],s=o[1],l=o[2],f=hb(s);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),Wk.waitFor(i).next((function(){return n.Mn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=pb(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Kb(Sk);return _I(e).Z({range:o},(function(e,t,a){var o=c(e,3),s=o[0],l=o[1],f=o[2],h=hb(l);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.Mn(e,u)}))}},{key:"Mn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(wI(e).get(t).next((function(e){if(null===e)throw sk();ck(e.userId===n.userId),r.push(CS(n.serializer,e))})))})),Wk.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return yI(e.ue,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.xn(t.batchId)})),Wk.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"xn",value:function(e){delete this.vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Wk.resolve();var r=IDBKeyRange.lowerBound(function(e){return[e]}(t.userId)),i=[];return _I(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=hb(e[1]);i.push(a)}else r.done()})).next((function(){ck(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return bI(e,this.userId,t)}},{key:"On",value:function(e){var t=this;return xI(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Pt",value:function(t,n,r,i){return ck(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function bI(e,t,n){var r=pb(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return _I(e).Z({range:a,Y:!0},(function(e,n,r){var a=c(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function wI(e){return Fb(e,"mutations")}function _I(e){return Fb(e,"documentMutations")}function xI(e){return Fb(e,"mutationQueues")}var SI=function(){function e(t){Ai(this,e),this.Nn=t}return Ni(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"Bn",value:function(){return new e(0)}},{key:"Ln",value:function(){return new e(-1)}}]),e}(),II=function(){function e(t,n){Ai(this,e),this.referenceDelegate=t,this.serializer=n}return Ni(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.kn(e).next((function(n){var r=new SI(n.highestTargetId);return n.highestTargetId=r.next(),t.qn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.kn(e).next((function(e){return Ck.fromTimestamp(new Tk(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.kn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.kn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.qn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Qn(e,t).next((function(){return n.kn(e).next((function(r){return r.targetCount+=1,n.Kn(t,r),n.qn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Qn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return EI(e).delete(t.targetId)})).next((function(){return n.kn(e)})).next((function(t){return ck(t.targetCount>0),t.targetCount-=1,n.qn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return EI(e).Z((function(o,u){var s=AS(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Wk.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return EI(e).Z((function(e,n){var r=AS(n);t(r)}))}},{key:"kn",value:function(e){return TI(e).get("targetGlobalKey").next((function(e){return ck(null!==e),e}))}},{key:"qn",value:function(e,t){return TI(e).put("targetGlobalKey",t)}},{key:"Qn",value:function(e,t){return EI(e).put(RS(this.serializer,t))}},{key:"Kn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.kn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=t_(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return EI(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=AS(n);n_(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=CI(e);return t.forEach((function(t){var o=cb(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Wk.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=CI(e);return Wk.forEach(t,(function(t){var a=cb(t.path);return Wk.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=CI(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=CI(e),i=F_();return r.Z({range:n,Y:!0},(function(e,t,n){var r=hb(e[1]),a=new Ok(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=cb(t.path),r=IDBKeyRange.bound([n],[Ek(n)],!1,!0),i=0;return CI(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"lt",value:function(e,t){return EI(e).get(t).next((function(e){return e?AS(e):null}))}}]),e}();function EI(e){return Fb(e,"targets")}function TI(e){return Fb(e,"targetGlobal")}function CI(e){return Fb(e,"targetDocuments")}function AI(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],u=a[1],s=Sk(r,o);return 0===s?Sk(i,u):s}var RI=function(){function e(t){Ai(this,e),this.$n=t,this.buffer=new Kb(AI),this.Un=0}return Ni(e,[{key:"Wn",value:function(){return++this.Un}},{key:"Gn",value:function(e){var t=[e,this.Wn()];if(this.buffer.size<this.$n)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();AI(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),NI=function(){function e(t,n,r){Ai(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.zn=null}return Ni(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.jn(6e4)}},{key:"stop",value:function(){this.zn&&(this.zn.cancel(),this.zn=null)}},{key:"started",get:function(){return null!==this.zn}},{key:"jn",value:function(e){var t=this;ik("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.zn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.zn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Jk(e.t0)){e.next=12;break}ik("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Gk(e.t0);case 14:return e.next=16,t.jn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),PI=function(){function e(t,n){Ai(this,e),this.Hn=t,this.params=n}return Ni(e,[{key:"calculateTargetCount",value:function(e,t){return this.Hn.Jn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Wk.resolve(ab.ae);var r=new RI(t);return this.Hn.forEachTarget(e,(function(e){return r.Gn(e.sequenceNumber)})).next((function(){return n.Hn.Yn(e,(function(e){return r.Gn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Hn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Hn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(ik("LruGarbageCollector","Garbage collection skipped; disabled"),Wk.resolve(vI)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(ik("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),vI):n.Zn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Hn.getCacheSize(e)}},{key:"Zn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(ik("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),rk()<=Sa.DEBUG&&ik("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Wk.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function OI(e,t){return new PI(e,t)}var DI=function(){function e(t,n){Ai(this,e),this.db=t,this.garbageCollector=OI(this,n)}return Ni(e,[{key:"Jn",value:function(e){var t=this.Xn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Xn",value:function(e){var t=0;return this.Yn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Yn",value:function(e,t){return this.er(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return LI(e,n)}},{key:"removeReference",value:function(e,t,n){return LI(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return LI(e,t)}},{key:"tr",value:function(e,t){return function(e,t){var n=!1;return xI(e).X((function(r){return bI(e,r,t).next((function(e){return e&&(n=!0),Wk.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.er(e,(function(o,u){if(u<=t){var s=n.tr(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Ck.min()),CI(e).delete(function(e){return[0,cb(e.path)]}(o))}))}));i.push(s)}})).next((function(){return Wk.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return LI(e,t)}},{key:"er",value:function(e,t){var n,r=CI(e),i=ab.ae;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==ab.ae&&t(new Ok(hb(n)),i),i=s,n=u):i=ab.ae})).next((function(){i!==ab.ae&&t(new Ok(hb(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function LI(e,t){return CI(e).put(function(e,t){return{targetId:0,path:cb(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var MI=function(){function e(){Ai(this,e),this.changes=new E_((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Ni(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Cw.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Wk.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),FI=function(){function e(t){Ai(this,e),this.serializer=t}return Ni(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return jI(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return jI(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],IS(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.nr(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Cw.newInvalidDocument(t);return jI(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(BI(t))},(function(e,i){r=n.rr(t,i)})).next((function(){return r}))}},{key:"ir",value:function(e,t){var n=this,r={size:0,document:Cw.newInvalidDocument(t)};return jI(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(BI(t))},(function(e,i){r={document:n.rr(t,i),size:gI(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=C_();return this.sr(e,t,(function(e,t){var i=n.rr(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"_r",value:function(e,t){var n=this,r=C_(),i=new jb(Ok.comparator);return this.sr(e,t,(function(e,t){var a=n.rr(e,t);r=r.insert(e,a),i=i.insert(e,gI(t))})).next((function(){return{documents:r,ar:i}}))}},{key:"sr",value:function(e,t,n){if(t.isEmpty())return Wk.resolve();var r=new Kb(KI);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(BI(r.first()),BI(r.last())),a=r.getIterator(),o=a.getNext();return jI(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Ok.fromSegments([].concat(m(t.prefixPath),[t.collectionGroup,t.documentId]));o&&KI(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.W(BI(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r,i){var a=this,o=t.path,u=[o.popLast().toArray(),o.lastSegment(),IS(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return jI(e).G(IDBKeyRange.bound(u,s,!0)).next((function(e){null==i||i.incrementDocumentReadCount(e.length);var n,o=C_(),u=Pi(e);try{for(u.s();!(n=u.n()).done;){var s=n.value,c=a.rr(Ok.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);c.isFoundDocument()&&(__(t,c)||r.has(c.key))&&(o=o.insert(c.key,c))}}catch(l){u.e(l)}finally{u.f()}return o}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=C_(),o=qI(t,n),u=qI(t,jk.max());return jI(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.rr(Ok.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new VI(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return zI(e).get("remoteDocumentGlobalKey").next((function(e){return ck(!!e),e}))}},{key:"nr",value:function(e,t){return zI(e).put("remoteDocumentGlobalKey",t)}},{key:"rr",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=oS(e.ht,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Ok.fromSegments(t.noDocument.path),i=TS(t.noDocument.readTime);n=Cw.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return sk();var a=Ok.fromSegments(t.unknownDocument.path),o=TS(t.unknownDocument.version);n=Cw.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Tk(e[0],e[1]);return Ck.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(Ck.min()))return n}return Cw.newInvalidDocument(e)}}]),e}();function UI(e){return new FI(e)}var VI=function(e){Oi(n,e);var t=Mi(n);function n(e,r){var i;return Ai(this,n),(i=t.call(this)).ur=e,i.trackRemovals=r,i.cr=new E_((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Ni(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Kb((function(e,t){return Sk(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.cr.get(a);if(n.push(t.ur.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=SS(t.ur.serializer,o);i=i.add(a.path.popLast());var c=gI(s);r+=c-u.size,n.push(t.ur.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=SS(t.ur.serializer,o.convertToNoDocument(Ck.min()));n.push(t.ur.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.ur.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.ur.updateMetadata(e,r)),Wk.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.ur.ir(e,t).next((function(e){return n.cr.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.ur._r(e,t).next((function(e){var t=e.documents;return e.ar.forEach((function(e,r){n.cr.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(MI);function zI(e){return Fb(e,"remoteDocumentGlobal")}function jI(e){return Fb(e,"remoteDocumentsV14")}function BI(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function qI(e,t){var n=t.documentKey.path.toArray();return[e,IS(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function KI(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Sk(n[a],r[a]))return i;return(i=Sk(n.length,r.length))||((i=Sk(n[n.length-2],r[r.length-2]))||Sk(n[n.length-1],r[r.length-1]))}var GI=Ni((function e(t,n){Ai(this,e),this.overlayedDocument=t,this.mutatedFields=n})),HI=function(){function e(t,n,r,i){Ai(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return Ni(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&sx(r.mutation,e,Wb.empty(),Tk.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,F_()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F_(),i=P_();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=R_();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=P_();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,F_())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=C_(),a=D_(),o=D_();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof hx)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),sx(o.mutation,t,o.mutation.getFieldMask(),Tk.now())):a.set(t.key,Wb.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new GI(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=D_(),i=new jb((function(e,t){return e-t})),a=F_();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=Pi(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Wb.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||F_()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=O_();c.forEach((function(e){if(!a.has(e)){var n=ox(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Wk.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){return function(e){return Ok.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):d_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Wk.resolve(P_()),u=-1,s=a;return o.next((function(t){return Wk.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Wk.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,F_())})).next((function(e){return{batchId:u,changes:N_(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Ok(t)).next((function(e){var t=R_();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n,r){var i=this,a=t.collectionGroup,o=R_();return this.indexManager.getCollectionParents(e,a).next((function(u){return Wk.forEach(u,(function(u){var s=function(e,t){return new u_(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,u.child(a));return i.getDocumentsMatchingCollectionQuery(e,s,n,r).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n,r){var i,a=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(o){return i=o,a.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)})).next((function(e){i.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Cw.newInvalidDocument(r)))}));var n=R_();return e.forEach((function(e,r){var a=i.get(e);void 0!==a&&sx(a.mutation,r,Wb.empty(),Tk.now()),__(t,r)&&(n=n.insert(e,r))})),n}))}}]),e}(),WI=function(){function e(t){Ai(this,e),this.serializer=t,this.lr=new Map,this.hr=new Map}return Ni(e,[{key:"getBundleMetadata",value:function(e,t){return Wk.resolve(this.lr.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Xx(e.createTime)}}(t)),Wk.resolve()}},{key:"getNamedQuery",value:function(e,t){return Wk.resolve(this.hr.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hr.set(t.name,function(e){return{name:e.name,query:NS(e.bundledQuery),readTime:Xx(e.readTime)}}(t)),Wk.resolve()}}]),e}(),QI=function(){function e(){Ai(this,e),this.overlays=new jb(Ok.comparator),this.Pr=new Map}return Ni(e,[{key:"getOverlay",value:function(e,t){return Wk.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=P_();return Wk.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.It(e,t,i)})),Wk.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Pr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Pr.delete(n)),Wk.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=P_(),i=t.length+1,a=new Ok(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Wk.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new jb((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=P_(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=P_(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Wk.resolve(s)}},{key:"It",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Pr.get(r.largestBatchId).delete(n.key);this.Pr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new _x(t,n));var a=this.Pr.get(t);void 0===a&&(a=F_(),this.Pr.set(t,a)),this.Pr.set(t,a.add(n.key))}}]),e}(),YI=function(){function e(){Ai(this,e),this.Ir=new Kb(XI.dr),this.Tr=new Kb(XI.Er)}return Ni(e,[{key:"isEmpty",value:function(){return this.Ir.isEmpty()}},{key:"addReference",value:function(e,t){var n=new XI(e,t);this.Ir=this.Ir.add(n),this.Tr=this.Tr.add(n)}},{key:"Ar",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Rr(new XI(e,t))}},{key:"Vr",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"mr",value:function(e){var t=this,n=new Ok(new Rk([])),r=new XI(n,e),i=new XI(n,e+1),a=[];return this.Tr.forEachInRange([r,i],(function(e){t.Rr(e),a.push(e.key)})),a}},{key:"gr",value:function(){var e=this;this.Ir.forEach((function(t){return e.Rr(t)}))}},{key:"Rr",value:function(e){this.Ir=this.Ir.delete(e),this.Tr=this.Tr.delete(e)}},{key:"pr",value:function(e){var t=new Ok(new Rk([])),n=new XI(t,e),r=new XI(t,e+1),i=F_();return this.Tr.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new XI(e,0),n=this.Ir.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),XI=function(){function e(t,n){Ai(this,e),this.key=t,this.yr=n}return Ni(e,null,[{key:"dr",value:function(e,t){return Ok.comparator(e.key,t.key)||Sk(e.yr,t.yr)}},{key:"Er",value:function(e,t){return Sk(e.yr,t.yr)||Ok.comparator(e.key,t.key)}}]),e}(),$I=function(){function e(t,n){Ai(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.wr=1,this.Sr=new Kb(XI.dr)}return Ni(e,[{key:"checkEmpty",value:function(e){return Wk.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new bx(i,t,n,r);this.mutationQueue.push(a);var o,u=Pi(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Sr=this.Sr.add(new XI(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Wk.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Wk.resolve(this.br(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Dr(n),i=r<0?0:r;return Wk.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Wk.resolve(0===this.mutationQueue.length?-1:this.wr-1)}},{key:"getAllMutationBatches",value:function(e){return Wk.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new XI(t,0),i=new XI(t,Number.POSITIVE_INFINITY),a=[];return this.Sr.forEachInRange([r,i],(function(e){var t=n.br(e.yr);a.push(t)})),Wk.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Kb(Sk);return t.forEach((function(e){var t=new XI(e,0),i=new XI(e,Number.POSITIVE_INFINITY);n.Sr.forEachInRange([t,i],(function(e){r=r.add(e.yr)}))})),Wk.resolve(this.Cr(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Ok.isDocumentKey(i)||(i=i.child(""));var a=new XI(new Ok(i),0),o=new Kb(Sk);return this.Sr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.yr)),!0)}),a),Wk.resolve(this.Cr(o))}},{key:"Cr",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.br(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;ck(0===this.vr(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Sr;return Wk.forEach(t.mutations,(function(i){var a=new XI(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Sr=r}))}},{key:"xn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new XI(t,0),r=this.Sr.firstAfterOrEqual(n);return Wk.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Wk.resolve()}},{key:"vr",value:function(e,t){return this.Dr(e)}},{key:"Dr",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"br",value:function(e){var t=this.Dr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),JI=function(){function e(t){Ai(this,e),this.Fr=t,this.docs=new jb(Ok.comparator),this.size=0}return Ni(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Fr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Wk.resolve(n?n.document.mutableCopy():Cw.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=C_();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Cw.newInvalidDocument(e))})),Wk.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=C_(),a=t.path,o=new Ok(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Bk(zk(l),n)<=0||(r.has(l.key)||__(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Wk.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){sk()}},{key:"Mr",value:function(e,t){return Wk.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new ZI(this)}},{key:"getSize",value:function(e){return Wk.resolve(this.size)}}]),e}(),ZI=function(e){Oi(n,e);var t=Mi(n);function n(e){var r;return Ai(this,n),(r=t.call(this)).ur=e,r}return Ni(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.ur.addEntry(e,i)):t.ur.removeEntry(r)})),Wk.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.ur.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.ur.getEntries(e,t)}}]),n}(MI),eE=function(){function e(t){Ai(this,e),this.persistence=t,this.Or=new E_((function(e){return t_(e)}),n_),this.lastRemoteSnapshotVersion=Ck.min(),this.highestTargetId=0,this.Nr=0,this.Br=new YI,this.targetCount=0,this.Lr=SI.Bn()}return Ni(e,[{key:"forEachTarget",value:function(e,t){return this.Or.forEach((function(e,n){return t(n)})),Wk.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Wk.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Wk.resolve(this.Nr)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Lr.next(),Wk.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Nr&&(this.Nr=t),Wk.resolve()}},{key:"Qn",value:function(e){this.Or.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Lr=new SI(t),this.highestTargetId=t),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Qn(t),this.targetCount+=1,Wk.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Qn(t),Wk.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Or.delete(t.target),this.Br.mr(t.targetId),this.targetCount-=1,Wk.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Or.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Or.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Wk.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Wk.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Or.get(t)||null;return Wk.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Br.Ar(t,n),Wk.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Br.Vr(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Wk.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Br.mr(t),Wk.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Br.pr(t);return Wk.resolve(n)}},{key:"containsKey",value:function(e,t){return Wk.resolve(this.Br.containsKey(t))}}]),e}(),tE=function(){function e(t,n){var r=this;Ai(this,e),this.kr={},this.overlays={},this.qr=new ab(0),this.Qr=!1,this.Qr=!0,this.referenceDelegate=t(this),this.Kr=new eE(this),this.indexManager=new oI,this.remoteDocumentCache=function(e){return new JI(e)}((function(e){return r.referenceDelegate.$r(e)})),this.serializer=new xS(n),this.Ur=new WI(this.serializer)}return Ni(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Qr=!1,Promise.resolve()}},{key:"started",get:function(){return this.Qr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new QI,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.kr[e.toKey()];return n||(n=new $I(t,this.referenceDelegate),this.kr[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ur}},{key:"runTransaction",value:function(e,t,n){var r=this;ik("MemoryPersistence","Starting transaction:",e);var i=new nE(this.qr.next());return this.referenceDelegate.Wr(),n(i).next((function(e){return r.referenceDelegate.Gr(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"zr",value:function(e,t){return Wk.or(Object.values(this.kr).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),nE=function(e){Oi(n,e);var t=Mi(n);function n(e){var r;return Ai(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Ni(n)}(Kk),rE=function(){function e(t){Ai(this,e),this.persistence=t,this.jr=new YI,this.Hr=null}return Ni(e,[{key:"Yr",get:function(){if(this.Hr)return this.Hr;throw sk()}},{key:"addReference",value:function(e,t,n){return this.jr.addReference(n,t),this.Yr.delete(n.toString()),Wk.resolve()}},{key:"removeReference",value:function(e,t,n){return this.jr.removeReference(n,t),this.Yr.add(n.toString()),Wk.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Yr.add(t.toString()),Wk.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.jr.mr(t.targetId).forEach((function(e){return n.Yr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Yr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Wr",value:function(){this.Hr=new Set}},{key:"Gr",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Wk.forEach(this.Yr,(function(r){var i=Ok.fromPath(r);return t.Zr(e,i).next((function(e){e||n.removeEntry(i,Ck.min())}))})).next((function(){return t.Hr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zr(e,t).next((function(e){e?n.Yr.delete(t.toString()):n.Yr.add(t.toString())}))}},{key:"$r",value:function(e){return 0}},{key:"Zr",value:function(e,t){var n=this;return Wk.or([function(){return Wk.resolve(n.jr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zr(e,t)}])}}],[{key:"Jr",value:function(t){return new e(t)}}]),e}(),iE=function(){function e(t){Ai(this,e),this.serializer=t}return Ni(e,[{key:"B",value:function(e,t,n,r){var i=this,a=new Qk("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",db,{unique:!0}),e.createObjectStore("documentMutations")}(e),aE(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Wk.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),aE(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ck.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").G().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",db,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Wk.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.ei(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.ti(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.ni(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ri(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ii(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Cb});t.createIndex("collectionPathOverlayIndex",Ab,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Rb,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:yb});t.createIndex("documentKeyIndex",gb),t.createIndex("collectionGroupIndex",kb)}(e)})).next((function(){return i.si(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.oi(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Sb}).createIndex("sequenceNumberIndex",Ib,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Eb}).createIndex("documentKeyIndex",Tb,{unique:!1})}(e)}))),o}},{key:"ti",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=gI(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"ei",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.G().next((function(n){return Wk.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.G("userMutationsIndex",i).next((function(r){return Wk.forEach(r,(function(r){ck(r.userId===n.userId);var i=CS(t.serializer,r);return yI(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"ni",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new Rk(n),o=function(e){return[0,cb(e)]}(a);r.push(t.get(o).next((function(n){return n?Wk.resolve():function(n){return t.put({targetId:0,path:cb(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Wk.waitFor(r)}))}))}},{key:"ri",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:xb});var n=t.store("collectionParents"),r=new uI,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:cb(i)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new Rk(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],hb(r));return i(a.popLast())}))}))}},{key:"ii",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=AS(r),a=RS(t.serializer,i);return n.put(a)}))}},{key:"si",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i=t.store("remoteDocumentsV14"),a=function(e){return e.document?new Ok(Rk.fromString(e.document.name).popFirst(5)):e.noDocument?Ok.fromSegments(e.noDocument.path):e.unknownDocument?Ok.fromSegments(e.unknownDocument.path):sk()}(n).path.toArray(),o={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((function(){return Wk.waitFor(r)}))}},{key:"oi",value:function(e,t){var n=this,r=t.store("mutations"),i=UI(this.serializer),a=new tE(rE.Jr,this.serializer.ht);return r.G().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:F_();CS(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Wk.forEach(r,(function(e,r){var o=new ek(r),u=US.Pt(n.serializer,o),s=a.getIndexManager(o),c=kI.Pt(o,n.serializer,s,a.referenceDelegate);return new HI(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Mb(t,ab.ae),e).next()}))}))}}]),e}();function aE(e){e.createObjectStore("targetDocuments",{keyPath:wb}).createIndex("documentTargetsIndex",_b,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",bb,{unique:!0}),e.createObjectStore("targetGlobal")}var oE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",uE=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(Ai(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this._i=a,this.window=o,this.document=u,this.ai=c,this.ui=l,this.ci=f,this.qr=null,this.Qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.li=null,this.inForeground=!1,this.hi=null,this.Pi=null,this.Ii=Number.NEGATIVE_INFINITY,this.di=function(e){return Promise.resolve()},!e.C())throw new hk(fk.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new DI(this,i),this.Ti=n+"main",this.serializer=new xS(s),this.Ei=new Yk(this.Ti,this.ci,new iE(this.serializer)),this.Kr=new II(this.referenceDelegate,this.serializer),this.remoteDocumentCache=UI(this.serializer),this.Ur=new LS,this.window&&this.window.localStorage?this.Ai=this.window.localStorage:(this.Ai=null,!1===l&&ak("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Ni(e,[{key:"start",value:function(){var e=this;return this.Ri().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new hk(fk.FAILED_PRECONDITION,oE);return e.Vi(),e.mi(),e.fi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Kr.getHighestSequenceNumber(t)}))})).then((function(t){e.qr=new ab(t,e.ai)})).then((function(){e.Qr=!0})).catch((function(t){return e.Ei&&e.Ei.close(),Promise.reject(t)}))}},{key:"gi",value:function(e){var t=this;return this.di=function(){var n=ga(ma().mark((function n(r){return ma().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ei.k(function(){var t=ga(ma().mark((function t(n){return ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this._i.enqueueAndForget(ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ri();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return cE(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.pi(t).next((function(t){t||(e.isPrimary=!1,e._i.enqueueRetryable((function(){return e.di(!1)})))}))})).next((function(){return e.yi(t)})).next((function(n){return e.isPrimary&&!n?e.wi(t).next((function(){return!1})):!!n&&e.Si(t).next((function(){return!0}))}))})).catch((function(t){if(Jk(t))return ik("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return ik("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e._i.enqueueRetryable((function(){return e.di(t)})),e.isPrimary=t}))}},{key:"pi",value:function(e){var t=this;return sE(e).get("owner").next((function(e){return Wk.resolve(t.bi(e))}))}},{key:"Di",value:function(e){return cE(e).delete(this.clientId)}},{key:"Ci",value:function(){var e=ga(ma().mark((function e(){var t,n,r,i,a=this;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.vi(this.Ii,18e5)){e.next=6;break}return this.Ii=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Fb(e,"clientMetadata");return t.G().next((function(e){var n=a.Fi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Wk.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Ai){n=Pi(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Ai.removeItem(this.Mi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fi",value:function(){var e=this;this.Pi=this._i.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ri().then((function(){return e.Ci()})).then((function(){return e.fi()}))}))}},{key:"bi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"yi",value:function(e){var t=this;return this.ui?Wk.resolve(!0):sE(e).get("owner").next((function(n){if(null!==n&&t.vi(n.leaseTimestampMs,5e3)&&!t.xi(n.ownerId)){if(t.bi(n)&&t.networkEnabled)return!0;if(!t.bi(n)){if(!n.allowTabSynchronization)throw new hk(fk.FAILED_PRECONDITION,oE);return!1}}return!(!t.networkEnabled||!t.inForeground)||cE(e).G().next((function(e){return void 0===t.Fi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&ik("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=ga(ma().mark((function e(){var t=this;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Qr=!1,this.Oi(),this.Pi&&(this.Pi.cancel(),this.Pi=null),this.Ni(),this.Bi(),e.next=7,this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Mb(e,ab.ae);return t.wi(n).next((function(){return t.Di(n)}))}));case 7:this.Ei.close(),this.Li();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fi",value:function(e,t){var n=this;return e.filter((function(e){return n.vi(e.updateTimeMs,t)&&!n.xi(e.clientId)}))}},{key:"ki",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return cE(t).G().next((function(t){return e.Fi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Qr}},{key:"getMutationQueue",value:function(e,t){return kI.Pt(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new cI(e,this.serializer.ht.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return US.Pt(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.Ur}},{key:"runTransaction",value:function(e,t,n){var r=this;ik("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite",o=function(e){return 15===e?Lb:14===e?Db:13===e?Ob:12===e?Pb:11===e?Nb:void sk()}(this.ci);return this.Ei.runTransaction(e,a,o,(function(a){return i=new Mb(a,r.qr?r.qr.next():ab.ae),"readwrite-primary"===t?r.pi(i).next((function(e){return!!e||r.yi(i)})).next((function(t){if(!t)throw ak("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r._i.enqueueRetryable((function(){return r.di(!1)})),new hk(fk.FAILED_PRECONDITION,qk);return n(i)})).next((function(e){return r.Si(i).next((function(){return e}))})):r.qi(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"qi",value:function(e){var t=this;return sE(e).get("owner").next((function(e){if(null!==e&&t.vi(e.leaseTimestampMs,5e3)&&!t.xi(e.ownerId)&&!t.bi(e)&&!(t.ui||t.allowTabSynchronization&&e.allowTabSynchronization))throw new hk(fk.FAILED_PRECONDITION,oE)}))}},{key:"Si",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sE(e).put("owner",t)}},{key:"wi",value:function(e){var t=this,n=sE(e);return n.get("owner").next((function(e){return t.bi(e)?(ik("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Wk.resolve()}))}},{key:"vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(ak("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"Vi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.hi=function(){e._i.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ri()}))},this.document.addEventListener("visibilitychange",this.hi),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.hi&&(this.document.removeEventListener("visibilitychange",this.hi),this.hi=null)}},{key:"mi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.li=function(){t.Oi();var e=/(?:Version|Mobile)\/1[456]/;!$i()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t._i.enterRestrictedMode(!0),t._i.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.li))}},{key:"Bi",value:function(){this.li&&(this.window.removeEventListener("pagehide",this.li),this.li=null)}},{key:"xi",value:function(e){var t;try{var n=null!==(null===(t=this.Ai)||void 0===t?void 0:t.getItem(this.Mi(e)));return ik("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return ak("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Oi",value:function(){if(this.Ai)try{this.Ai.setItem(this.Mi(this.clientId),String(Date.now()))}catch(e){ak("Failed to set zombie client id.",e)}}},{key:"Li",value:function(){if(this.Ai)try{this.Ai.removeItem(this.Mi(this.clientId))}catch(e){}}},{key:"Mi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return Yk.C()}}]),e}();function sE(e){return Fb(e,"owner")}function cE(e){return Fb(e,"clientMetadata")}function lE(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var fE=function(){function e(t,n,r,i){Ai(this,e),this.targetId=t,this.fromCache=n,this.Qi=r,this.Ki=i}return Ni(e,null,[{key:"$i",value:function(t,n){var r,i=F_(),a=F_(),o=Pi(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),hE=function(){function e(){Ai(this,e),this._documentReadCount=0}return Ni(e,[{key:"documentReadCount",get:function(){return this._documentReadCount}},{key:"incrementDocumentReadCount",value:function(e){this._documentReadCount+=e}}]),e}(),dE=function(){function e(){Ai(this,e),this.Ui=!1,this.Wi=!1,this.Gi=100,this.zi=8}return Ni(e,[{key:"initialize",value:function(e,t){this.ji=e,this.indexManager=t,this.Ui=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a={result:null};return this.Hi(e,t).next((function(e){a.result=e})).next((function(){if(!a.result)return i.Ji(e,t,r,n).next((function(e){a.result=e}))})).next((function(){if(!a.result){var n=new hE;return i.Yi(e,t,n).next((function(r){if(a.result=r,i.Wi)return i.Zi(e,t,n,r.size)}))}})).next((function(){return a.result}))}},{key:"Zi",value:function(e,t,n,r){return n.documentReadCount<this.Gi?(rk()<=Sa.DEBUG&&ik("QueryEngine","SDK will not create cache indexes for query:",w_(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Gi,"documents"),Wk.resolve()):(rk()<=Sa.DEBUG&&ik("QueryEngine","Query:",w_(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.zi*r?(rk()<=Sa.DEBUG&&ik("QueryEngine","The SDK decides to create cache indexes for query:",w_(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,v_(t))):Wk.resolve())}},{key:"Hi",value:function(e,t){var n=this;if(l_(t))return Wk.resolve(null);var r=v_(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=g_(t,null,"F"),r=v_(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=F_.apply(void 0,m(i));return n.ji.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Xi(t,i);return n.es(t,o,a,r.readTime)?n.Hi(e,g_(t,null,"F")):n.ts(e,o,t,r)}))}))})))}))}},{key:"Ji",value:function(e,t,n,r){var i=this;return l_(t)||r.isEqual(Ck.min())?Wk.resolve(null):this.ji.getDocuments(e,n).next((function(a){var o=i.Xi(t,a);return i.es(t,o,n,r)?Wk.resolve(null):(rk()<=Sa.DEBUG&&ik("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),w_(t)),i.ts(e,o,t,Vk(r,-1)).next((function(e){return e})))}))}},{key:"Xi",value:function(e,t){var n=new Kb(S_(e));return t.forEach((function(t,r){__(e,r)&&(n=n.add(r))})),n}},{key:"es",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Yi",value:function(e,t,n){return rk()<=Sa.DEBUG&&ik("QueryEngine","Using full collection scan to execute query:",w_(t)),this.ji.getDocumentsMatchingQuery(e,t,jk.min(),n)}},{key:"ts",value:function(e,t,n,r){return this.ji.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),pE=function(){function e(t,n,r,i){Ai(this,e),this.persistence=t,this.ns=n,this.serializer=i,this.rs=new jb(Sk),this.ss=new E_((function(e){return t_(e)}),n_),this.os=new Map,this._s=t.getRemoteDocumentCache(),this.Kr=t.getTargetCache(),this.Ur=t.getBundleCache(),this.us(r)}return Ni(e,[{key:"us",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HI(this._s,this.mutationQueue,this.documentOverlayCache,this.indexManager),this._s.setIndexManager(this.indexManager),this.ns.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.rs)}))}}]),e}();function vE(e,t,n,r){return new pE(e,t,n,r)}function mE(e,t){return yE.apply(this,arguments)}function yE(){return yE=ga(ma().mark((function e(t,n){var r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lk(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.us(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=F_(),s=Pi(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=Pi(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Pi(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=Pi(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{cs:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),yE.apply(this,arguments)}function gE(e,t){var n=lk(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n._s.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Wk.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);ck(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=F_(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function kE(e){var t=lk(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Kr.getLastRemoteSnapshotVersion(e)}))}function bE(e,t){var n=lk(e),r=t.snapshotVersion,i=n.rs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n._s.newChangeBuffer({trackRemovals:!0});i=n.rs;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Kr.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Kr.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(Yb.EMPTY_BYTE_STRING,Ck.min()).withLastLimboFreeSnapshotVersion(Ck.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Kr.updateTargetData(e,c))}}));var u=C_(),s=F_();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(wE(e,a,t.documentUpdates).next((function(e){u=e.ls,s=e.hs}))),!r.isEqual(Ck.min())){var c=n.Kr.getLastRemoteSnapshotVersion(e).next((function(t){return n.Kr.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Wk.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.rs=i,e}))}function wE(e,t,n){var r=F_(),i=F_();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=C_();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Ck.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):ik("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{ls:r,hs:i}}))}function _E(e,t){var n=lk(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function xE(e,t){var n=lk(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Kr.getTargetData(e,t).next((function(i){return i?(r=i,Wk.resolve(r)):n.Kr.allocateTargetId(e).next((function(i){return r=new _S(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Kr.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.rs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.rs=n.rs.insert(e.targetId,e),n.ss.set(t,e.targetId)),e}))}function SE(e,t,n){return IE.apply(this,arguments)}function IE(){return IE=ga(ma().mark((function e(t,n,r){var i,a,o;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=lk(t),a=i.rs.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Jk(e.t1)){e.next=12;break}throw e.t1;case 12:ik("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.rs=i.rs.remove(n),i.ss.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),IE.apply(this,arguments)}function EE(e,t,n){var r=lk(e),i=Ck.min(),a=F_();return r.persistence.runTransaction("Execute query","readwrite",(function(e){return function(e,t,n){var r=lk(e),i=r.ss.get(n);return void 0!==i?Wk.resolve(r.rs.get(i)):r.Kr.getTargetData(t,n)}(r,e,v_(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Kr.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.ns.getDocumentsMatchingQuery(e,t,n?i:Ck.min(),n?a:F_())})).next((function(e){return AE(r,x_(t),e),{documents:e,Ps:a}}))}))}function TE(e,t){var n=lk(e),r=lk(n.Kr),i=n.rs.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.lt(e,t).next((function(e){return e?e.target:null}))}))}function CE(e,t){var n=lk(e),r=n.os.get(t)||Ck.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n._s.getAllFromCollectionGroup(e,t,Vk(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return AE(n,t,e),e}))}function AE(e,t,n){var r=e.os.get(t)||Ck.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.os.set(t,r)}function RE(e,t,n,r){return NE.apply(this,arguments)}function NE(){return NE=ga(ma().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=lk(t),o=F_(),u=C_(),s=Pi(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Is(l.metadata.name),l.document&&(o=o.add(f)),(h=n.ds(l)).setReadTime(n.Ts(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a._s.newChangeBuffer({trackRemovals:!0}),e.next=7,xE(a,function(e){return v_(c_(Rk.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return wE(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Kr.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Kr.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.ls,t.hs)})).next((function(){return t.ls}))}))})));case 9:case"end":return e.stop()}}),e)}))),NE.apply(this,arguments)}function PE(e,t){return OE.apply(this,arguments)}function OE(){return OE=ga(ma().mark((function e(t,n){var r,i,a,o=arguments;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:F_(),e.next=3,xE(t,v_(NS(n.bundledQuery)));case 3:return i=e.sent,a=lk(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Xx(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ur.saveNamedQuery(e,n);var o=i.withResumeToken(Yb.EMPTY_BYTE_STRING,t);return a.rs=a.rs.insert(o.targetId,o),a.Kr.updateTargetData(e,o).next((function(){return a.Kr.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Kr.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ur.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),OE.apply(this,arguments)}function DE(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function LE(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function ME(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var FE=function(){function e(t,n,r,i){Ai(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Ni(e,[{key:"As",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Es",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new hk(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(ak("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),UE=function(){function e(t,n,r){Ai(this,e),this.targetId=t,this.state=n,this.error=r}return Ni(e,[{key:"As",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Es",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new hk(i.error.code,i.error.message))),a?new e(t,i.state,r):(ak("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),VE=function(){function e(t,n){Ai(this,e),this.clientId=t,this.activeTargetIds=n}return Ni(e,null,[{key:"Es",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=V_(),o=0;i&&o<r.activeTargetIds.length;++o)i=sb(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(ak("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),zE=function(){function e(t,n){Ai(this,e),this.clientId=t,this.onlineState=n}return Ni(e,null,[{key:"Es",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(ak("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),jE=function(){function e(){Ai(this,e),this.activeTargetIds=V_()}return Ni(e,[{key:"Rs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Vs",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"As",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),BE=function(){function e(t,n,r,i,a){Ai(this,e),this.window=t,this._i=n,this.persistenceKey=r,this.fs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.gs=this.ps.bind(this),this.ys=new jb(Sk),this.started=!1,this.ws=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Ss=DE(this.persistenceKey,this.fs),this.bs=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ys=this.ys.insert(this.fs,new jE),this.Ds=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Cs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.vs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Fs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Ms=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.gs)}return Ni(e,[{key:"start",value:function(){var e=ga(ma().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.ki();case 2:t=e.sent,n=Pi(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.fs){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(DE(this.persistenceKey,i)))&&(o=VE.Es(i,a))&&(this.ys=this.ys.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.xs(),(u=this.storage.getItem(this.Fs))&&(s=this.Os(u))&&this.Ns(s),c=Pi(this.ws);try{for(c.s();!(l=c.n()).done;)f=l.value,this.ps(f)}catch(d){c.e(d)}finally{c.f()}this.ws=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.bs,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Bs(this.ys)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ys.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Ls(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ls(e,t,n),this.ks(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(ME(this.persistenceKey,e));if(n){var r=UE.Es(e,n);r&&(t=r.state)}}return this.qs.Rs(e),this.xs(),t}},{key:"removeLocalQueryTarget",value:function(e){this.qs.Vs(e),this.xs()}},{key:"isLocalQueryTarget",value:function(e){return this.qs.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(ME(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Qs(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.ks(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Ks(e)}},{key:"notifyBundleLoaded",value:function(e){this.$s(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.gs),this.removeItem(this.Ss),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return ik("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){ik("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){ik("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ps",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(ik("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ss)return void ak("Received WebStorage notification for local change. Another client might have garbage-collected our state");this._i.enqueueRetryable(ga(ma().mark((function e(){var r,i,a,o,u,s,c;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Ds.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Us(n.key),e.abrupt("return",t.Ws(r,null));case 6:if(!(i=t.Gs(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Ws(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Cs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.zs(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.js(a));case 16:e.next=41;break;case 18:if(!t.vs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Hs(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Js(o));case 23:e.next=41;break;case 25:if(n.key!==t.Fs){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Os(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ns(u));case 30:e.next=41;break;case 32:if(n.key!==t.bs){e.next=37;break}s=function(e){var t=ab.ae;if(null!=e)try{var n=JSON.parse(e);ck("number"==typeof n),t=n}catch(e){ak("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==ab.ae&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.Ms){e.next=41;break}return c=t.Ys(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Zs(e)})));case 41:e.next=44;break;case 43:t.ws.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"qs",get:function(){return this.ys.get(this.fs)}},{key:"xs",value:function(){this.setItem(this.Ss,this.qs.As())}},{key:"Ls",value:function(e,t,n){var r=new FE(this.currentUser,e,t,n),i=LE(this.persistenceKey,this.currentUser,e);this.setItem(i,r.As())}},{key:"ks",value:function(e){var t=LE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Ks",value:function(e){var t={clientId:this.fs,onlineState:e};this.storage.setItem(this.Fs,JSON.stringify(t))}},{key:"Qs",value:function(e,t,n){var r=ME(this.persistenceKey,e),i=new UE(e,t,n);this.setItem(r,i.As())}},{key:"$s",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Ms,t)}},{key:"Us",value:function(e){var t=this.Ds.exec(e);return t?t[1]:null}},{key:"Gs",value:function(e,t){var n=this.Us(e);return VE.Es(n,t)}},{key:"zs",value:function(e,t){var n=this.Cs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return FE.Es(new ek(i),r,t)}},{key:"Hs",value:function(e,t){var n=this.vs.exec(e),r=Number(n[1]);return UE.Es(r,t)}},{key:"Os",value:function(e){return zE.Es(e)}},{key:"Ys",value:function(e){return JSON.parse(e)}},{key:"js",value:function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Xs(t.batchId,t.state,t.error));case 2:ik("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Js",value:function(e){return this.syncEngine.eo(e.targetId,e.state,e.error)}},{key:"Ws",value:function(e,t){var n=this,r=t?this.ys.insert(e,t):this.ys.remove(e),i=this.Bs(this.ys),a=this.Bs(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.no(o,u).then((function(){n.ys=r}))}},{key:"Ns",value:function(e){this.ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Bs",value:function(e){var t=V_();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),qE=function(){function e(){Ai(this,e),this.ro=new jE,this.io={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Ni(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.ro.Rs(e),this.io[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.io[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.ro.Vs(e)}},{key:"isLocalQueryTarget",value:function(e){return this.ro.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.io[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.ro.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.ro.activeTargetIds.has(e)}},{key:"start",value:function(){return this.ro=new jE,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),KE=function(){function e(){Ai(this,e)}return Ni(e,[{key:"so",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),GE=function(){function e(){var t=this;Ai(this,e),this.oo=function(){return t._o()},this.ao=function(){return t.uo()},this.co=[],this.lo()}return Ni(e,[{key:"so",value:function(e){this.co.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.oo),window.removeEventListener("offline",this.ao)}},{key:"lo",value:function(){window.addEventListener("online",this.oo),window.addEventListener("offline",this.ao)}},{key:"_o",value:function(){ik("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Pi(this.co);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"uo",value:function(){ik("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Pi(this.co);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),HE=null;function WE(){return null===HE?HE=268435456+Math.round(2147483648*Math.random()):HE++,"0x"+HE.toString(16)}var QE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},YE=function(){function e(t){Ai(this,e),this.ho=t.ho,this.Po=t.Po}return Ni(e,[{key:"Io",value:function(e){this.To=e}},{key:"Eo",value:function(e){this.Ao=e}},{key:"onMessage",value:function(e){this.Ro=e}},{key:"close",value:function(){this.Po()}},{key:"send",value:function(e){this.ho(e)}},{key:"Vo",value:function(){this.To()}},{key:"mo",value:function(e){this.Ao(e)}},{key:"fo",value:function(e){this.Ro(e)}}]),e}(),XE="WebChannelConnection",$E=function(e){Oi(n,e);var t=Mi(n);function n(e){var r;return Ai(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return Ni(n,[{key:"vo",value:function(e,t,n,r){var i=WE();return new Promise((function(a,o){var u=new Xg;u.setWithCredentials(!0),u.listenOnce(Hg.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case Gg.NO_ERROR:var t=u.getResponseJson();ik(XE,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Gg.TIMEOUT:ik(XE,"RPC '".concat(e,"' ").concat(i," timed out")),o(new hk(fk.DEADLINE_EXCEEDED,"Request time out"));break;case Gg.HTTP_ERROR:var n=u.getStatus();if(ik(XE,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(fk).indexOf(t)>=0?t:fk.UNKNOWN}(s.status);o(new hk(c,s.message))}else o(new hk(fk.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new hk(fk.UNAVAILABLE,"Connection failed."));break;default:sk()}}finally{ik(XE,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);ik(XE,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Mo",value:function(e,t,n){var r=WE(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=qg(),o=Kg(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Co(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");ik(XE,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new YE({ho:function(t){h?ik(XE,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(ik(XE,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),ik(XE,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},Po:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,Yg.EventType.OPEN,(function(){h||ik(XE,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,Yg.EventType.CLOSE,(function(){h||(h=!0,ik(XE,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.mo())})),p(l,Yg.EventType.ERROR,(function(t){h||(h=!0,ok(XE,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.mo(new hk(fk.UNAVAILABLE,"The operation could not be completed")))})),p(l,Yg.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];ck(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){ik(XE,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=mx[e];if(void 0!==t)return Ix(t)}(u),c=o.message;void 0===s&&(s=fk.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.mo(new hk(s,c)),l.close()}else ik(XE,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.fo(i)}})),p(o,Wg.STAT_EVENT,(function(t){t.stat===Qg.PROXY?ik(XE,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Qg.NOPROXY&&ik(XE,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.Vo()}),0),d}}]),n}(function(){function e(t){Ai(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo="projects/".concat(r,"/databases/").concat(i),this.wo="(default)"===this.databaseId.database?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(i)}return Ni(e,[{key:"So",get:function(){return!1}},{key:"bo",value:function(e,t,n,r,i){var a=WE(),o=this.Do(e,t);ik("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Co(u,r,i),this.vo(e,o,u,n).then((function(t){return ik("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw ok("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"Fo",value:function(e,t,n,r,i,a){return this.bo(e,t,n,r,i)}},{key:"Co",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+tk,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Do",value:function(e,t){var n=QE[e];return"".concat(this.po,"/v1/").concat(t,":").concat(n)}}]),e}());function JE(){return"undefined"!=typeof window?window:null}function ZE(){return"undefined"!=typeof document?document:null}function eT(e){return new Gx(e,!0)}var tT=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Ai(this,e),this._i=t,this.timerId=n,this.xo=r,this.Oo=i,this.No=a,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}return Ni(e,[{key:"reset",value:function(){this.Bo=0}},{key:"qo",value:function(){this.Bo=this.No}},{key:"Qo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Bo+this.Ko()),r=Math.max(0,Date.now()-this.ko),i=Math.max(0,n-r);i>0&&ik("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Bo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Lo=this._i.enqueueAfterDelay(this.timerId,i,(function(){return t.ko=Date.now(),e()})),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}},{key:"$o",value:function(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}},{key:"cancel",value:function(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"Ko",value:function(){return(Math.random()-.5)*this.Bo}}]),e}(),nT=function(){function e(t,n,r,i,a,o,u,s){Ai(this,e),this._i=t,this.Uo=r,this.Wo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Go=0,this.zo=null,this.jo=null,this.stream=null,this.Ho=new tT(t,n)}return Ni(e,[{key:"Jo",value:function(){return 1===this.state||5===this.state||this.Yo()}},{key:"Yo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Zo()}},{key:"stop",value:function(){var e=ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Jo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Xo",value:function(){this.state=0,this.Ho.reset()}},{key:"e_",value:function(){var e=this;this.Yo()&&null===this.zo&&(this.zo=this._i.enqueueAfterDelay(this.Uo,6e4,(function(){return e.t_()})))}},{key:"n_",value:function(e){this.r_(),this.stream.send(e)}},{key:"t_",value:function(){var e=ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Yo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"r_",value:function(){this.zo&&(this.zo.cancel(),this.zo=null)}},{key:"i_",value:function(){this.jo&&(this.jo.cancel(),this.jo=null)}},{key:"close",value:function(){var e=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.r_(),this.i_(),this.Ho.cancel(),this.Go++,4!==t?this.Ho.reset():n&&n.code===fk.RESOURCE_EXHAUSTED?(ak(n.toString()),ak("Using maximum backoff delay to prevent overloading the backend."),this.Ho.qo()):n&&n.code===fk.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.s_(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Eo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"s_",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.o_(this.Go),n=this.Go;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.Go===n&&e.__(i,a)}),(function(n){t((function(){var t=new hk(fk.UNKNOWN,"Fetching auth token failed: "+n.message);return e.a_(t)}))}))}},{key:"__",value:function(e,t){var n=this,r=this.o_(this.Go);this.stream=this.u_(e,t),this.stream.Io((function(){r((function(){return n.state=2,n.jo=n._i.enqueueAfterDelay(n.Wo,1e4,(function(){return n.Yo()&&(n.state=3),Promise.resolve()})),n.listener.Io()}))})),this.stream.Eo((function(e){r((function(){return n.a_(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Zo",value:function(){var e=this;this.state=5,this.Ho.Qo(ga(ma().mark((function t(){return ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"a_",value:function(e){return ik("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"o_",value:function(e){var t=this;return function(n){t._i.enqueueAndForget((function(){return t.Go===e?n():(ik("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),rT=function(e){Oi(n,e);var t=Mi(n);function n(e,r,i,a,o,u){var s;return Ai(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return Ni(n,[{key:"u_",value:function(e,t){return this.connection.Mo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Ho.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:sk()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(ck(void 0===t||"string"==typeof t),Yb.fromBase64String(t||"")):(ck(void 0===t||t instanceof Uint8Array),Yb.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?fk.UNKNOWN:Ix(e.code);return new hk(t,e.message||"")}(o);n=new Fx(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=eS(e,s.document.name),l=Xx(s.document.updateTime),f=s.document.createTime?Xx(s.document.createTime):Ck.min(),h=new Ew({mapValue:{fields:s.document.fields}}),d=Cw.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new Lx(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=eS(e,m.document),g=m.readTime?Xx(m.readTime):Ck.min(),k=Cw.newNoDocument(y,g),b=m.removedTargetIds||[];n=new Lx([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=eS(e,w.document),x=w.removedTargetIds||[];n=new Lx([],x,_,null)}else{if(!("filter"in t))return sk();t.filter;var S=t.filter;S.targetId;var I=S.count,E=void 0===I?0:I,T=S.unchangedNames,C=new xx(E,T),A=S.targetId;n=new Mx(A,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ck.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Ck.min():t.readTime?Xx(t.readTime):Ck.min()}(e);return this.listener.c_(t,n)}},{key:"l_",value:function(e){var t={};t.database=rS(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=r_(r)?{documents:lS(e,r)}:{query:fS(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Qx(e,t.resumeToken);var i=Hx(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Ck.min())>0){n.readTime=Wx(e,t.snapshotVersion.toTimestamp());var a=Hx(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return sk()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.n_(t)}},{key:"h_",value:function(e){var t={};t.database=rS(this.serializer),t.removeTarget=e,this.n_(t)}}]),n}(nT),iT=function(e){Oi(n,e);var t=Mi(n);function n(e,r,i,a,o,u){var s;return Ai(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.P_=!1,s}return Ni(n,[{key:"I_",get:function(){return this.P_}},{key:"start",value:function(){this.P_=!1,this.lastStreamToken=void 0,$o(Di(n.prototype),"start",this).call(this)}},{key:"s_",value:function(){this.P_&&this.d_([])}},{key:"u_",value:function(e,t){return this.connection.Mo("Write",e,t)}},{key:"onMessage",value:function(e){if(ck(!!e.streamToken),this.lastStreamToken=e.streamToken,this.P_){this.Ho.reset();var t=function(e,t){return e&&e.length>0?(ck(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Xx(e.updateTime):Xx(t);return n.isEqual(Ck.min())&&(n=Xx(t)),new nx(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Xx(e.commitTime);return this.listener.T_(n,t)}return ck(!e.writeResults||0===e.writeResults.length),this.P_=!0,this.listener.E_()}},{key:"A_",value:function(){var e={};e.database=rS(this.serializer),this.n_(e)}},{key:"d_",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return sS(t.serializer,e)}))};this.n_(n)}}]),n}(nT),aT=function(e){Oi(n,e);var t=Mi(n);function n(e,r,i,a){var o;return Ai(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.R_=!1,o}return Ni(n,[{key:"V_",value:function(){if(this.R_)throw new hk(fk.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"bo",value:function(e,t,n){var r=this;return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.connection.bo(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===fk.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new hk(fk.UNKNOWN,e.toString())}))}},{key:"Fo",value:function(e,t,n,r){var i=this;return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=c(a,2),u=o[0],s=o[1];return i.connection.Fo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===fk.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new hk(fk.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.R_=!0}}]),n}(Ni((function e(){Ai(this,e)})));var oT=function(){function e(t,n){Ai(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.f_=0,this.g_=null,this.p_=!0}return Ni(e,[{key:"y_",value:function(){var e=this;0===this.f_&&(this.w_("Unknown"),this.g_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.g_=null,e.S_("Backend didn't respond within 10 seconds."),e.w_("Offline"),Promise.resolve()})))}},{key:"b_",value:function(e){"Online"===this.state?this.w_("Unknown"):(this.f_++,this.f_>=1&&(this.D_(),this.S_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.w_("Offline")))}},{key:"set",value:function(e){this.D_(),this.f_=0,"Online"===e&&(this.p_=!1),this.w_(e)}},{key:"w_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"S_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.p_?(ak(t),this.p_=!1):ik("OnlineStateTracker",t)}},{key:"D_",value:function(){null!==this.g_&&(this.g_.cancel(),this.g_=null)}}]),e}(),uT=Ni((function e(t,n,r,i,a){var o=this;Ai(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.C_=[],this.v_=new Map,this.F_=new Set,this.M_=[],this.x_=a,this.x_.so((function(e){r.enqueueAndForget(ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=gT(o),!e.t0){e.next=5;break}return ik("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=lk(t)).F_.add(4),e.next=4,lT(n);case 4:return n.O_.set("Unknown"),n.F_.delete(4),e.next=8,sT(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.O_=new oT(r,i)}));function sT(e){return cT.apply(this,arguments)}function cT(){return(cT=ga(ma().mark((function e(t){var n,r,i;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!gT(t)){e.next=18;break}n=Pi(t.M_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function lT(e){return fT.apply(this,arguments)}function fT(){return(fT=ga(ma().mark((function e(t){var n,r,i;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Pi(t.M_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function hT(e,t){var n=lk(e);n.v_.has(t.targetId)||(n.v_.set(t.targetId,t),yT(n)?mT(n):WT(n).Yo()&&pT(n,t))}function dT(e,t){var n=lk(e),r=WT(n);n.v_.delete(t),r.Yo()&&vT(n,t),0===n.v_.size&&(r.Yo()?r.e_():gT(n)&&n.O_.set("Unknown"))}function pT(e,t){if(e.N_.Le(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ck.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}WT(e).l_(t)}function vT(e,t){e.N_.Le(t),WT(e).h_(t)}function mT(e){e.N_=new Vx({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.v_.get(t)||null},st:function(){return e.datastore.serializer.databaseId}}),WT(e).start(),e.O_.y_()}function yT(e){return gT(e)&&!WT(e).Jo()&&e.v_.size>0}function gT(e){return 0===lk(e).F_.size}function kT(e){e.N_=void 0}function bT(e){return wT.apply(this,arguments)}function wT(){return(wT=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.v_.forEach((function(e,n){pT(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _T(e,t){return xT.apply(this,arguments)}function xT(){return(xT=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:kT(t),yT(t)?(t.O_.b_(n),mT(t)):t.O_.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ST(e,t,n){return IT.apply(this,arguments)}function IT(){return IT=ga(ma().mark((function e(t,n,r){var i;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.O_.set("Online"),!(n instanceof Fx&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=ga(ma().mark((function e(t,n){var r,i,a,o;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Pi(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.v_.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.v_.delete(o),t.N_.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),ik("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,ET(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Lx?t.N_.Ge(n):n instanceof Mx?t.N_.Xe(n):t.N_.He(n),r.isEqual(Ck.min())){e.next=29;break}return e.prev=14,e.next=17,kE(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.N_._t(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.v_.get(r);i&&e.v_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.v_.get(t);if(r){e.v_.set(t,r.withResumeToken(Yb.EMPTY_BYTE_STRING,r.snapshotVersion)),vT(e,t);var i=new _S(r.target,t,n,r.sequenceNumber);pT(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),ik("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,ET(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),IT.apply(this,arguments)}function ET(e,t,n){return TT.apply(this,arguments)}function TT(){return(TT=ga(ma().mark((function e(t,n,r){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Jk(n)){e.next=2;break}throw n;case 2:return t.F_.add(1),e.next=5,lT(t);case 5:t.O_.set("Offline"),r||(r=function(){return kE(t.localStore)}),t.asyncQueue.enqueueRetryable(ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ik("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.F_.delete(1),e.next=6,sT(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function CT(e,t){return t().catch((function(n){return ET(e,n,t)}))}function AT(e){return RT.apply(this,arguments)}function RT(){return RT=ga(ma().mark((function e(t){var n,r,i,a;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=lk(t),r=QT(n),i=n.C_.length>0?n.C_[n.C_.length-1].batchId:-1;case 2:if(!NT(n)){e.next=19;break}return e.prev=3,e.next=6,_E(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.C_.length&&r.e_(),e.abrupt("break",19);case 10:i=a.batchId,PT(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,ET(n,e.t0);case 17:e.next=2;break;case 19:OT(n)&&DT(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),RT.apply(this,arguments)}function NT(e){return gT(e)&&e.C_.length<10}function PT(e,t){e.C_.push(t);var n=QT(e);n.Yo()&&n.I_&&n.d_(t.mutations)}function OT(e){return gT(e)&&!QT(e).Jo()&&e.C_.length>0}function DT(e){QT(e).start()}function LT(e){return MT.apply(this,arguments)}function MT(){return(MT=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:QT(t).A_();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function FT(e){return UT.apply(this,arguments)}function UT(){return(UT=ga(ma().mark((function e(t){var n,r,i,a;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=QT(t),r=Pi(t.C_);try{for(r.s();!(i=r.n()).done;)a=i.value,n.d_(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function VT(e,t,n){return zT.apply(this,arguments)}function zT(){return zT=ga(ma().mark((function e(t,n,r){var i,a;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.C_.shift(),a=wx.from(i,n,r),e.next=3,CT(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,AT(t);case 5:case"end":return e.stop()}}),e)}))),zT.apply(this,arguments)}function jT(e,t){return BT.apply(this,arguments)}function BT(){return BT=ga(ma().mark((function e(t,n){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&QT(t).I_,!e.t0){e.next=4;break}return e.next=4,function(){var e=ga(ma().mark((function e(t,n){var r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return Sx(e)&&e!==fk.ABORTED}(n.code)){e.next=7;break}return r=t.C_.shift(),QT(t).Xo(),e.next=5,CT(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,AT(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:OT(t)&&DT(t);case 5:case"end":return e.stop()}}),e)}))),BT.apply(this,arguments)}function qT(e,t){return KT.apply(this,arguments)}function KT(){return KT=ga(ma().mark((function e(t,n){var r,i;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=lk(t)).asyncQueue.verifyOperationInProgress(),ik("RemoteStore","RemoteStore received new credentials"),i=gT(r),r.F_.add(3),e.next=6,lT(r);case 6:return i&&r.O_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.F_.delete(3),e.next=12,sT(r);case 12:case"end":return e.stop()}}),e)}))),KT.apply(this,arguments)}function GT(e,t){return HT.apply(this,arguments)}function HT(){return(HT=ga(ma().mark((function e(t,n){var r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=lk(t),!n){e.next=7;break}return r.F_.delete(2),e.next=5,sT(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.F_.add(2),e.next=12,lT(r);case 12:r.O_.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function WT(e){return e.B_||(e.B_=function(e,t,n){var r=lk(e);return r.V_(),new rT(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Io:bT.bind(null,e),Eo:_T.bind(null,e),c_:ST.bind(null,e)}),e.M_.push(function(){var t=ga(ma().mark((function t(n){return ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.B_.Xo(),yT(e)?mT(e):e.O_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.B_.stop();case 6:kT(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.B_}function QT(e){return e.L_||(e.L_=function(e,t,n){var r=lk(e);return r.V_(),new iT(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Io:LT.bind(null,e),Eo:jT.bind(null,e),E_:FT.bind(null,e),T_:VT.bind(null,e)}),e.M_.push(function(){var t=ga(ma().mark((function t(n){return ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.L_.Xo(),t.next=4,AT(e);case 4:t.next=9;break;case 6:return t.next=8,e.L_.stop();case 8:e.C_.length>0&&(ik("RemoteStore","Stopping write stream with ".concat(e.C_.length," pending writes")),e.C_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.L_}var YT=function(){function e(t,n,r,i,a){Ai(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new dk,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Ni(e,[{key:"promise",get:function(){return this.deferred.promise}},{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new hk(fk.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function XT(e,t){if(ak("AsyncQueue","".concat(t,": ").concat(e)),Jk(e))return new hk(fk.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var $T=function(){function e(t){Ai(this,e),this.comparator=t?function(e,n){return t(e,n)||Ok.comparator(e.key,n.key)}:function(e,t){return Ok.comparator(e.key,t.key)},this.keyedMap=R_(),this.sortedSet=new jb(this.comparator)}return Ni(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),JT=function(){function e(){Ai(this,e),this.k_=new jb(Ok.comparator)}return Ni(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.k_.get(t);n?0!==e.type&&3===n.type?this.k_=this.k_.insert(t,e):3===e.type&&1!==n.type?this.k_=this.k_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.k_=this.k_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.k_=this.k_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.k_=this.k_.remove(t):1===e.type&&2===n.type?this.k_=this.k_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.k_=this.k_.insert(t,{type:2,doc:e.doc}):sk():this.k_=this.k_.insert(t,e)}},{key:"q_",value:function(){var e=[];return this.k_.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),ZT=function(){function e(t,n,r,i,a,o,u,s,c){Ai(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return Ni(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&k_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,$T.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),eC=Ni((function e(){Ai(this,e),this.Q_=void 0,this.listeners=[]})),tC=Ni((function e(){Ai(this,e),this.queries=new E_((function(e){return b_(e)}),k_),this.onlineState="Unknown",this.K_=new Set}));function nC(e,t){return rC.apply(this,arguments)}function rC(){return rC=ga(ma().mark((function e(t,n){var r,i,a,o,u;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=lk(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new eC),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Q_=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=XT(e.t0,"Initialization of query '".concat(w_(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.U_(r.onlineState),o.Q_&&n.W_(o.Q_)&&sC(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),rC.apply(this,arguments)}function iC(e,t){return aC.apply(this,arguments)}function aC(){return aC=ga(ma().mark((function e(t,n){var r,i,a,o,u;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=lk(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),aC.apply(this,arguments)}function oC(e,t){var n,r=lk(e),i=!1,a=Pi(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Pi(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.W_(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Q_=o}}}catch(f){a.e(f)}finally{a.f()}i&&sC(r)}function uC(e,t,n){var r=lk(e),i=r.queries.get(t);if(i){var a,o=Pi(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function sC(e){e.K_.forEach((function(e){e.next()}))}var cC=function(){function e(t,n,r){Ai(this,e),this.query=t,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}return Ni(e,[{key:"W_",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Pi(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new ZT(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.z_?this.H_(e)&&(this.G_.next(e),a=!0):this.J_(e,this.onlineState)&&(this.Y_(e),a=!0),this.j_=e,a}},{key:"onError",value:function(e){this.G_.error(e)}},{key:"U_",value:function(e){this.onlineState=e;var t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}},{key:"J_",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"H_",value:function(e){if(e.docChanges.length>0)return!0;var t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Y_",value:function(e){e=ZT.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}]),e}(),lC=function(){function e(t,n){Ai(this,e),this.X_=t,this.byteLength=n}return Ni(e,[{key:"ea",value:function(){return"metadata"in this.X_}}]),e}(),fC=function(){function e(t){Ai(this,e),this.serializer=t}return Ni(e,[{key:"Is",value:function(e){return eS(this.serializer,e)}},{key:"ds",value:function(e){return e.metadata.exists?oS(this.serializer,e.document,!1):Cw.newNoDocument(this.Is(e.metadata.name),this.Ts(e.metadata.readTime))}},{key:"Ts",value:function(e){return Xx(e)}}]),e}(),hC=function(){function e(t,n,r){Ai(this,e),this.ta=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=dC(t)}return Ni(e,[{key:"na",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;var n=Rk.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ra",value:function(e){var t,n=new Map,r=new fC(this.serializer),i=Pi(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Is(a.metadata.name),s=Pi(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||F_()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=ga(ma().mark((function e(){var t,n,r,i,a;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,RE(this.localStore,new fC(this.serializer),this.documents,this.ta.id);case 2:t=e.sent,n=this.ra(this.documents),r=Pi(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,PE(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function dC(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var pC=Ni((function e(t){Ai(this,e),this.key=t})),vC=Ni((function e(t){Ai(this,e),this.key=t})),mC=function(){function e(t,n){Ai(this,e),this.query=t,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=F_(),this.mutatedKeys=F_(),this.ua=S_(t),this.ca=new $T(this.ua)}return Ni(e,[{key:"la",get:function(){return this.oa}},{key:"ha",value:function(e,t){var n=this,r=t?t.Pa:new JT,i=t?t.ca:this.ca,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=__(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Ia(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.ua(f,s)>0||c&&n.ua(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ca:o,Pa:r,es:u,mutatedKeys:a}}},{key:"Ia",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;var a=e.Pa.q_();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return sk()}};return n(e)-n(t)}(e.type,t.type)||r.ua(e.doc,t.doc)})),this.da(n);var o=t?this.Ta():[],u=0===this.aa.size&&this.current?1:0,s=u!==this._a;return this._a=u,0!==a.length||s?{snapshot:new ZT(this.query,e.ca,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ea:o}:{Ea:o}}},{key:"U_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new JT,mutatedKeys:this.mutatedKeys,es:!1},!1)):{Ea:[]}}},{key:"Aa",value:function(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}},{key:"da",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.oa=t.oa.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.oa=t.oa.delete(e)})),this.current=e.current)}},{key:"Ta",value:function(){var e=this;if(!this.current)return[];var t=this.aa;this.aa=F_(),this.ca.forEach((function(t){e.Aa(t.key)&&(e.aa=e.aa.add(t.key))}));var n=[];return t.forEach((function(t){e.aa.has(t)||n.push(new vC(t))})),this.aa.forEach((function(e){t.has(e)||n.push(new pC(e))})),n}},{key:"Ra",value:function(e){this.oa=e.Ps,this.aa=F_();var t=this.ha(e.documents);return this.applyChanges(t,!0)}},{key:"Va",value:function(){return ZT.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}]),e}(),yC=Ni((function e(t,n,r){Ai(this,e),this.query=t,this.targetId=n,this.view=r})),gC=Ni((function e(t){Ai(this,e),this.key=t,this.ma=!1})),kC=function(){function e(t,n,r,i,a,o){Ai(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new E_((function(e){return b_(e)}),k_),this.pa=new Map,this.ya=new Set,this.wa=new jb(Ok.comparator),this.Sa=new Map,this.ba=new YI,this.Da={},this.Ca=new Map,this.va=SI.Ln(),this.onlineState="Unknown",this.Fa=void 0}return Ni(e,[{key:"isPrimaryClient",get:function(){return!0===this.Fa}}]),e}();function bC(e,t){return wC.apply(this,arguments)}function wC(){return wC=ga(ma().mark((function e(t,n){var r,i,a,o,u,s;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=dA(t),!(o=r.ga.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Va(),e.next=15;break;case 6:return e.next=8,xE(r.localStore,v_(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,_C(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&hT(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),wC.apply(this,arguments)}function _C(e,t,n,r,i){return xC.apply(this,arguments)}function xC(){return xC=ga(ma().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Ma=function(e,n,r){return function(){var e=ga(ma().mark((function e(t,n,r,i){var a,o,u;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.ha(r),e.t0=a.es,!e.t0){e.next=6;break}return e.next=5,EE(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.ha(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(qC(t,n.targetId,u.Ea),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,EE(t.localStore,n,!0);case 3:return o=e.sent,u=new mC(n,o.Ps),s=u.ha(o.documents),c=Dx.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),qC(t,r,l.Ea),f=new yC(n,r,u),e.abrupt("return",(t.ga.set(n,f),t.pa.has(r)?t.pa.get(r).push(n):t.pa.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),xC.apply(this,arguments)}function SC(e,t){return IC.apply(this,arguments)}function IC(){return IC=ga(ma().mark((function e(t,n){var r,i,a;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=lk(t),i=r.ga.get(n),!((a=r.pa.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.pa.set(i.targetId,a.filter((function(e){return!k_(e,n)}))),void r.ga.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,SE(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),dT(r.remoteStore,i.targetId),jC(r,i.targetId)})).catch(Gk);case 9:e.next=14;break;case 11:return jC(r,i.targetId),e.next=14,SE(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),IC.apply(this,arguments)}function EC(e,t,n){return TC.apply(this,arguments)}function TC(){return TC=ga(ma().mark((function e(t,n,r){var i,a,o;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pA(t),e.prev=1,e.next=4,function(e,t){var n,r,i=lk(e),a=Tk.now(),o=t.reduce((function(e,t){return e.add(t.key)}),F_());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=C_(),s=F_();return i._s.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=Pi(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=cx(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new hx(c.key,l,Tw(l.value.mapValue),rx.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:N_(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Da[e.currentUser.toKey()];r||(r=new jb(Sk)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,HC(i,a.changes);case 9:return e.next=11,AT(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=XT(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),TC.apply(this,arguments)}function CC(e,t){return AC.apply(this,arguments)}function AC(){return AC=ga(ma().mark((function e(t,n){var r,i;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lk(t),e.prev=1,e.next=4,bE(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Sa.get(t);n&&(ck(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ma=!0:e.modifiedDocuments.size>0?ck(n.ma):e.removedDocuments.size>0&&(ck(n.ma),n.ma=!1))})),e.next=8,HC(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Gk(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),AC.apply(this,arguments)}function RC(e,t,n){var r=lk(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ga.forEach((function(e,n){var r=n.view.U_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=lk(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Pi(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.U_(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&sC(n)}(r.eventManager,t),i.length&&r.fa.c_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function NC(e,t,n){return PC.apply(this,arguments)}function PC(){return PC=ga(ma().mark((function e(t,n,r){var i,a,o,u,s,c;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=lk(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Sa.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new jb(Ok.comparator)).insert(o,Cw.newNoDocument(o,Ck.min())),s=F_().add(o),c=new Ox(Ck.min(),new Map,new jb(Sk),u,s),e.next=9,CC(i,c);case 9:i.wa=i.wa.remove(o),i.Sa.delete(n),GC(i),e.next=16;break;case 14:return e.next=16,SE(i.localStore,n,!1).then((function(){return jC(i,n,r)})).catch(Gk);case 16:case"end":return e.stop()}}),e)}))),PC.apply(this,arguments)}function OC(e,t){return DC.apply(this,arguments)}function DC(){return DC=ga(ma().mark((function e(t,n){var r,i,a;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lk(t),i=n.batch.batchId,e.prev=1,e.next=4,gE(r.localStore,n);case 4:return a=e.sent,zC(r,i,null),VC(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,HC(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Gk(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),DC.apply(this,arguments)}function LC(e,t,n){return MC.apply(this,arguments)}function MC(){return MC=ga(ma().mark((function e(t,n,r){var i,a;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lk(t),e.prev=1,e.next=4,function(e,t){var n=lk(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return ck(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,zC(i,n,r),VC(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,HC(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Gk(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),MC.apply(this,arguments)}function FC(e,t){return UC.apply(this,arguments)}function UC(){return UC=ga(ma().mark((function e(t,n){var r,i,a,o;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gT((r=lk(t)).remoteStore)||ik("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=lk(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ca.get(i)||[]).push(n),r.Ca.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=XT(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),UC.apply(this,arguments)}function VC(e,t){(e.Ca.get(t)||[]).forEach((function(e){e.resolve()})),e.Ca.delete(t)}function zC(e,t,n){var r=lk(e),i=r.Da[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function jC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Pi(e.pa.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ga.delete(a),n&&e.fa.xa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.pa.delete(t),e.isPrimaryClient&&e.ba.mr(t).forEach((function(t){e.ba.containsKey(t)||BC(e,t)}))}function BC(e,t){e.ya.delete(t.path.canonicalString());var n=e.wa.get(t);null!==n&&(dT(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),GC(e))}function qC(e,t,n){var r,i=Pi(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof pC?(e.ba.addReference(a.key,t),KC(e,a)):a instanceof vC?(ik("SyncEngine","Document no longer in limbo: "+a.key),e.ba.removeReference(a.key,t),e.ba.containsKey(a.key)||BC(e,a.key)):sk()}}catch(o){i.e(o)}finally{i.f()}}function KC(e,t){var n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(ik("SyncEngine","New document in limbo: "+n),e.ya.add(r),GC(e))}function GC(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){var t=e.ya.values().next().value;e.ya.delete(t);var n=new Ok(Rk.fromString(t)),r=e.va.next();e.Sa.set(r,new gC(n)),e.wa=e.wa.insert(n,r),hT(e.remoteStore,new _S(v_(c_(n.path)),r,"TargetPurposeLimboResolution",ab.ae))}}function HC(e,t,n){return WC.apply(this,arguments)}function WC(){return WC=ga(ma().mark((function e(t,n,r){var i,a,o,u;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=lk(t),a=[],o=[],u=[],e.t0=i.ga.isEmpty(),e.t0){e.next=9;break}return i.ga.forEach((function(e,t){u.push(i.Ma(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=fE.$i(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.fa.c_(a),e.next=9,function(){var e=ga(ma().mark((function e(t,n){var r,i,a,o,u,s,c,l;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lk(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Wk.forEach(n,(function(t){return Wk.forEach(t.Qi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Wk.forEach(t.Ki,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Jk(e.t0)){e.next=10;break}throw e.t0;case 10:ik("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Pi(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.rs.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.rs=r.rs.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),WC.apply(this,arguments)}function QC(e,t){return YC.apply(this,arguments)}function YC(){return(YC=ga(ma().mark((function e(t,n){var r,i;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=lk(t)).currentUser.isEqual(n)){e.next=11;break}return ik("SyncEngine","User change. New user:",n.toKey()),e.next=5,mE(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ca.forEach((function(e){e.forEach((function(e){e.reject(new hk(fk.CANCELLED,t))}))})),e.Ca.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,HC(r,i.cs);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function XC(e,t){var n=lk(e),r=n.Sa.get(t);if(r&&r.ma)return F_().add(r.key);var i=F_(),a=n.pa.get(t);if(!a)return i;var o,u=Pi(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ga.get(s);i=i.unionWith(c.view.la)}}catch(l){u.e(l)}finally{u.f()}return i}function $C(e,t){return JC.apply(this,arguments)}function JC(){return JC=ga(ma().mark((function e(t,n){var r,i,a;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lk(t),e.next=3,EE(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ra(i),e.abrupt("return",(r.isPrimaryClient&&qC(r,n.targetId,a.Ea),a));case 6:case"end":return e.stop()}}),e)}))),JC.apply(this,arguments)}function ZC(e,t){return eA.apply(this,arguments)}function eA(){return(eA=ga(ma().mark((function e(t,n){var r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lk(t),e.abrupt("return",CE(r.localStore,n).then((function(e){return HC(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tA(e,t,n,r){return nA.apply(this,arguments)}function nA(){return nA=ga(ma().mark((function e(t,n,r,i){var a,o;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=lk(t),e.next=3,function(e,t){var n=lk(e),r=lk(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Fn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Wk.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,AT(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(zC(a,n,i||null),VC(a,n),function(e,t){lk(lk(e).mutationQueue).xn(t)}(a.localStore,n)):sk();case 11:return e.next=13,HC(a,o);case 13:e.next=16;break;case 15:ik("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),nA.apply(this,arguments)}function rA(e,t){return iA.apply(this,arguments)}function iA(){return(iA=ga(ma().mark((function e(t,n){var r,i,a,o,u,s,c,l;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dA(r=lk(t)),pA(r),!0!==n||!0===r.Fa){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,aA(r,i.toArray());case 5:return a=e.sent,r.Fa=!0,e.next=9,GT(r.remoteStore,!0);case 9:o=Pi(a);try{for(o.s();!(u=o.n()).done;)s=u.value,hT(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Fa){e.next=25;break}return c=[],l=Promise.resolve(),r.pa.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return jC(r,t),SE(r.localStore,t,!0)})),dT(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,aA(r,c);case 21:return function(e){var t=lk(e);t.Sa.forEach((function(e,n){dT(t.remoteStore,n)})),t.ba.gr(),t.Sa=new Map,t.wa=new jb(Ok.comparator)}(r),r.Fa=!1,e.next=25,GT(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aA(e,t,n){return oA.apply(this,arguments)}function oA(){return oA=ga(ma().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=lk(t),a=[],o=[],u=Pi(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.pa.get(c))||0===f.length){e.next=34;break}return e.next=11,xE(i.localStore,v_(f[0]));case 11:l=e.sent,h=Pi(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ga.get(p),e.next=20,$C(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,TE(i.localStore,c);case 36:return y=e.sent,e.next=39,xE(i.localStore,y);case 39:return l=e.sent,e.next=42,_C(i,uA(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.fa.c_(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),oA.apply(this,arguments)}function uA(e){return s_(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function sA(e){return function(e){return lk(lk(e).persistence).ki()}(lk(e).localStore)}function cA(e,t,n,r){return lA.apply(this,arguments)}function lA(){return lA=ga(ma().mark((function e(t,n,r,i){var a,o,u,s;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=lk(t)).Fa){e.next=3;break}return e.abrupt("return",void ik("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.pa.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,CE(a.localStore,x_(o[0]));case 10:return u=e.sent,s=Ox.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Yb.EMPTY_BYTE_STRING),e.next=14,HC(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,SE(a.localStore,n,!0);case 17:return jC(a,n,i),e.abrupt("break",20);case 19:sk();case 20:case"end":return e.stop()}}),e)}))),lA.apply(this,arguments)}function fA(e,t,n){return hA.apply(this,arguments)}function hA(){return hA=ga(ma().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=dA(t)).Fa){e.next=45;break}a=Pi(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.pa.has(u)){e.next=10;break}return ik("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,TE(i.localStore,u);case 12:return s=e.sent,e.next=15,xE(i.localStore,s);case 15:return c=e.sent,e.next=18,_C(i,uA(s),c.targetId,!1,c.resumeToken);case 18:hT(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Pi(r),e.prev=30,h=ma().mark((function e(){var t;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.pa.has(t),!e.t0){e.next=5;break}return e.next=5,SE(i.localStore,t,!1).then((function(){dT(i.remoteStore,t),jC(i,t)})).catch(Gk);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),hA.apply(this,arguments)}function dA(e){var t=lk(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=CC.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=XC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=NC.bind(null,t),t.fa.c_=oC.bind(null,t.eventManager),t.fa.xa=uC.bind(null,t.eventManager),t}function pA(e){var t=lk(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=OC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=LC.bind(null,t),t}function vA(e,t,n){var r=lk(e);(function(){var e=ga(ma().mark((function e(t,n,r){var i,a,o,u,s;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=lk(e),r=Xx(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ur.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(dC(i)),a=new hC(i,t.localStore,n.serializer),e.next=15,n.Oa();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.na(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.Oa();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,HC(t,s.sa,void 0);case 31:return e.next=33,function(e,t){var n=lk(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ur.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.ia));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(ok("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var mA=function(){function e(){Ai(this,e),this.synchronizeTabs=!1}return Ni(e,[{key:"initialize",value:function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=eT(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return vE(this.persistence,new dE,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new tE(rE.Jr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new qE}},{key:"terminate",value:function(){var e=ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),yA=function(e){Oi(n,e);var t=Mi(n);function n(e,r,i){var a;return Ai(this,n),(a=t.call(this)).Na=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Ni(n,[{key:"initialize",value:function(){var e=ga(ma().mark((function e(t){var r=this;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$o(Di(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Na.initialize(this,t);case 4:return e.next=6,pA(this.Na.syncEngine);case 6:return e.next=8,AT(this.Na.remoteStore);case 8:return e.next=10,this.persistence.gi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return vE(this.persistence,new dE,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new NI(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new ib(t,this.persistence);return new rb(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=lE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?mI.withCacheSize(this.cacheSizeBytes):mI.DEFAULT;return new uE(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,JE(),ZE(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new qE}}]),n}(mA),gA=function(e){Oi(n,e);var t=Mi(n);function n(e,r){var i;return Ai(this,n),(i=t.call(this,e,r,!1)).Na=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Ni(n,[{key:"initialize",value:function(){var e=ga(ma().mark((function e(t){var r,i=this;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$o(Di(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Na.syncEngine,e.t0=this.sharedClientState instanceof BE,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Xs:tA.bind(null,r),eo:cA.bind(null,r),no:fA.bind(null,r),ki:sA.bind(null,r),Zs:ZC.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.gi(function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rA(i.Na.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=JE();if(!BE.C(t))throw new hk(fk.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=lE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new BE(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(yA),kA=function(){function e(){Ai(this,e)}return Ni(e,[{key:"initialize",value:function(){var e=ga(ma().mark((function e(t,n){var r=this;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return RC(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=QC.bind(null,this.syncEngine),e.next=12,GT(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new tC}},{key:"createDatastore",value:function(e){var t=eT(e.databaseInfo.databaseId),n=function(e){return new $E(e)}(e.databaseInfo);return function(e,t,n,r){return new aT(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new uT(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return RC(t.syncEngine,e,0)}),GE.C()?new GE:new KE)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new kC(e,t,n,r,i,a);return o&&(u.Fa=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=lk(t),ik("RemoteStore","RemoteStore shutting down."),n.F_.add(5),e.next=5,lT(n);case 5:n.x_.shutdown(),n.O_.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function bA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return ga(ma().mark((function r(){var i;return ma().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var wA=function(){function e(t){Ai(this,e),this.observer=t,this.muted=!1}return Ni(e,[{key:"next",value:function(e){this.observer.next&&this.Ba(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ba(this.observer.error,e):ak("Uncaught Error in snapshot listener:",e.toString())}},{key:"La",value:function(){this.muted=!0}},{key:"Ba",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),_A=function(){function e(t,n){var r=this;Ai(this,e),this.ka=t,this.serializer=n,this.metadata=new dk,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then((function(e){e&&e.ea()?r.metadata.resolve(e.X_.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.X_))))}),(function(e){return r.metadata.reject(e)}))}return Ni(e,[{key:"close",value:function(){return this.ka.cancel()}},{key:"getMetadata",value:function(){var e=ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oa",value:function(){var e=ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Qa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qa",value:function(){var e=ga(ma().mark((function e(){var t,n,r,i;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ka();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.qa.decode(t),r=Number(n),isNaN(r)&&this.$a("length string (".concat(n,") is not valid number")),e.next=9,this.Ua(r);case 9:return i=e.sent,e.abrupt("return",new lC(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ka",value:function(){var e=ga(ma().mark((function e(){var t,n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Wa()<0)){e.next=7;break}return e.next=3,this.Ga();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Wa())<0&&this.$a("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ua",value:function(){var e=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ga();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.$a("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.qa.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"$a",value:function(e){throw this.ka.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ga",value:function(){var e=ga(ma().mark((function e(){var t,n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ka.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),xA=function(){function e(t){Ai(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Ni(e,[{key:"lookup",value:function(){var e=ga(ma().mark((function e(t){var n,r=this;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new hk(fk.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=ga(ma().mark((function e(t,n){var r,i,a,o,u,s;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lk(t),i=rS(r.serializer)+"/documents",a={documents:n.map((function(e){return Zx(r.serializer,e)}))},e.next=5,r.Fo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=uS(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());ck(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new gx(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=ga(ma().mark((function e(){var t,n=this;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Ok.fromPath(t);n.mutations.push(new kx(r,n.precondition(r)))})),e.next=7,function(){var e=ga(ma().mark((function e(t,n){var r,i,a;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lk(t),i=rS(r.serializer)+"/documents",a={writes:n.map((function(e){return sS(r.serializer,e)}))},e.next=3,r.bo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw sk();t=Ck.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new hk(fk.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ck.min())?rx.exists(!1):rx.updateTime(t):rx.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ck.min()))throw new hk(fk.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return rx.updateTime(t)}return rx.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),SA=function(){function e(t,n,r,i,a){Ai(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.za=r.maxAttempts,this.Ho=new tT(this.asyncQueue,"transaction_retry")}return Ni(e,[{key:"run",value:function(){this.za-=1,this.ja()}},{key:"ja",value:function(){var e=this;this.Ho.Qo(ga(ma().mark((function t(){var n,r;return ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new xA(e.datastore),(r=e.Ha(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ja(t)}))}))})).catch((function(t){e.Ja(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Ha",value:function(e){try{var t=this.updateFunction(e);return!ob(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ja",value:function(e){var t=this;this.za>0&&this.Ya(e)?(this.za-=1,this.asyncQueue.enqueueAndForget((function(){return t.ja(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Ya",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Sx(t)}return!1}}]),e}(),IA=function(){function e(t,n,r,i){var a=this;Ai(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ek.UNAUTHENTICATED,this.clientId=xk.V(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ik("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return ik("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return Ni(e,[{key:"getConfiguration",value:function(){var e=ga(ma().mark((function e(){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new hk(fk.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new dk;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(ga(ma().mark((function n(){var r;return ma().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=XT(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function EA(e,t){return TA.apply(this,arguments)}function TA(){return TA=ga(ma().mark((function e(t,n){var r,i;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),ik("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,mE(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),TA.apply(this,arguments)}function CA(e,t){return AA.apply(this,arguments)}function AA(){return AA=ga(ma().mark((function e(t,n){var r,i;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,NA(t);case 3:return r=e.sent,ik("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return qT(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return qT(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),AA.apply(this,arguments)}function RA(e){return"FirebaseError"===e.name?e.code===fk.FAILED_PRECONDITION||e.code===fk.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function NA(e){return PA.apply(this,arguments)}function PA(){return(PA=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return ik("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,EA(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),RA(n=e.t0)){e.next=13;break}throw n;case 13:return ok("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,EA(t,new mA);case 16:e.next=21;break;case 18:return ik("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,EA(t,new mA);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function OA(e){return DA.apply(this,arguments)}function DA(){return(DA=ga(ma().mark((function e(t){return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return ik("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,CA(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return ik("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,CA(t,new kA);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function LA(e){return NA(e).then((function(e){return e.persistence}))}function MA(e){return NA(e).then((function(e){return e.localStore}))}function FA(e){return OA(e).then((function(e){return e.remoteStore}))}function UA(e){return OA(e).then((function(e){return e.syncEngine}))}function VA(e){return OA(e).then((function(e){return e.datastore}))}function zA(e){return jA.apply(this,arguments)}function jA(){return(jA=ga(ma().mark((function e(t){var n,r;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,OA(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=bC.bind(null,n.syncEngine),r.onUnlisten=SC.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function BA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new dk;return e.asyncQueue.enqueueAndForget(ga(ma().mark((function i(){return ma().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new wA({next:function(a){t.enqueueAndForget((function(){return iC(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new hk(fk.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new hk(fk.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new cC(c_(n.path),a,{includeMetadataChanges:!0,Z_:!0});return nC(e,o)},i.next=3,zA(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function qA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new dk;return e.asyncQueue.enqueueAndForget(ga(ma().mark((function i(){return ma().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new wA({next:function(n){t.enqueueAndForget((function(){return iC(e,o)})),n.fromCache&&"server"===r.source?i.reject(new hk(fk.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new cC(n,a,{includeMetadataChanges:!0,Z_:!0});return nC(e,o)},i.next=3,zA(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function KA(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var GA=new Map;function HA(e,t,n){if(!n)throw new hk(fk.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function WA(e,t,n,r){if(!0===t&&!0===r)throw new hk(fk.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function QA(e){if(!Ok.isDocumentKey(e))throw new hk(fk.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function YA(e){if(Ok.isDocumentKey(e))throw new hk(fk.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function XA(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":sk()}function $A(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new hk(fk.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=XA(e);throw new hk(fk.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function JA(e,t){if(t<=0)throw new hk(fk.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var ZA=function(){function e(t){var n,r;if(Ai(this,e),void 0===t.host){if(void 0!==t.ssl)throw new hk(fk.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new hk(fk.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}WA("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KA(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new hk(fk.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new hk(fk.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new hk(fk.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return Ni(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),eR=function(){function e(t,n,r,i){Ai(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZA({}),this._settingsFrozen=!1}return Ni(e,[{key:"app",get:function(){if(!this._app)throw new hk(fk.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new hk(fk.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZA(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new vk;switch(e.type){case"firstParty":return new kk(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new hk(fk.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=GA.get(e);t&&(ik("ComponentProvider","Removing Datastore"),GA.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function tR(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=$A(e,eR))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&ok("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var u,s;if("string"==typeof i.mockUserToken)u=i.mockUserToken,s=ek.MOCK_USER;else{u=Yi(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new hk(fk.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new ek(c)}e._authCredentials=new mk(new pk(u,s))}}var nR=function(){function e(t,n,r){Ai(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Ni(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),rR=function(){function e(t,n,r){Ai(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Ni(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new iR(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),iR=function(e){Oi(n,e);var t=Mi(n);function n(e,r,i){var a;return Ai(this,n),(a=t.call(this,e,r,c_(i)))._path=i,a.type="collection",a}return Ni(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new rR(this.firestore,null,new Ok(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(nR);function aR(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=va(e),HA("collection","path",t),e instanceof eR){var a=Rk.fromString.apply(Rk,[t].concat(r));return YA(a),new iR(e,null,a)}if(!(e instanceof rR||e instanceof iR))throw new hk(fk.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Rk.fromString.apply(Rk,[t].concat(r)));return YA(o),new iR(e.firestore,null,o)}function oR(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=va(e),1===arguments.length&&(t=xk.V()),HA("doc","path",t),e instanceof eR){var a=Rk.fromString.apply(Rk,[t].concat(r));return QA(a),new rR(e,null,new Ok(a))}if(!(e instanceof rR||e instanceof iR))throw new hk(fk.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Rk.fromString.apply(Rk,[t].concat(r)));return QA(o),new rR(e.firestore,e instanceof iR?e.converter:null,new Ok(o))}function uR(e,t){return e=va(e),t=va(t),(e instanceof rR||e instanceof iR)&&(t instanceof rR||t instanceof iR)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function sR(e,t){return e=va(e),t=va(t),e instanceof nR&&t instanceof nR&&e.firestore===t.firestore&&k_(e._query,t._query)&&e.converter===t.converter}var cR=function(){function e(){var t=this;Ai(this,e),this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new tT(this,"async_queue_retry"),this.ou=function(){var e=ZE();e&&ik("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Ho.$o()};var n=ZE();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.ou)}return Ni(e,[{key:"isShuttingDown",get:function(){return this.eu}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this._u(),this.au(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.eu){this.eu=!0,this.iu=e||!1;var t=ZE();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ou)}}},{key:"enqueue",value:function(e){var t=this;if(this._u(),this.eu)return new Promise((function(){}));var n=new dk;return this.au((function(){return t.eu&&t.iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Xa.push(e),t.uu()}))}},{key:"uu",value:function(){var e=ga(ma().mark((function e(){var t=this;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Xa.length){e.next=14;break}return e.prev=1,e.next=4,this.Xa[0]();case 4:this.Xa.shift(),this.Ho.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Jk(e.t0)){e.next=12;break}throw e.t0;case 12:ik("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Xa.length>0&&this.Ho.Qo((function(){return t.uu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"au",value:function(e){var t=this,n=this.Za.then((function(){return t.ru=!0,e().catch((function(e){t.nu=e,t.ru=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ak("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.ru=!1,e}))}));return this.Za=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this._u(),this.su.indexOf(e)>-1&&(t=0);var i=YT.createAndSchedule(this,e,t,n,(function(e){return r.cu(e)}));return this.tu.push(i),i}},{key:"_u",value:function(){this.nu&&sk()}},{key:"verifyOperationInProgress",value:function(){}},{key:"lu",value:function(){var e=ga(ma().mark((function e(){var t;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Za,e.next=3,t;case 3:if(t!==this.Za){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hu",value:function(e){var t,n=Pi(this.tu);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Pu",value:function(e){var t=this;return this.lu().then((function(){t.tu.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Pi(t.tu);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.lu()}))}},{key:"Iu",value:function(e){this.su.push(e)}},{key:"cu",value:function(e){var t=this.tu.indexOf(e);this.tu.splice(t,1)}}]),e}();function lR(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Pi(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var fR=function(){function e(){Ai(this,e),this._progressObserver={},this._taskCompletionResolver=new dk,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Ni(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),hR=function(e){Oi(n,e);var t=Mi(n);function n(e,r,i,a){var o;return Ai(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new cR,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return Ni(n,[{key:"_terminate",value:function(){return this._firestoreClient||pR(this),this._firestoreClient.terminate()}}]),n}(eR);function dR(e){return e._firestoreClient||pR(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function pR(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new rw(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,KA(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new IA(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function vR(e,t,n){var r=new dk;return e.asyncQueue.enqueue(ga(ma().mark((function i(){var a;return ma().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,EA(e,n);case 3:return i.next=5,CA(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),RA(a=i.t0)){i.next=13;break}throw a;case 13:ok("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function mR(e){return function(e){var t=new dk;return e.asyncQueue.enqueueAndForget(ga(ma().mark((function n(){return ma().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=FC,n.next=3,UA(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(dR(e=$A(e,hR)))}function yR(e){return function(e){return e.asyncQueue.enqueue(ga(ma().mark((function t(){var n,r;return ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,LA(e);case 2:return n=t.sent,t.next=5,FA(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=lk(e);return t.F_.delete(0),sT(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(dR(e=$A(e,hR)))}function gR(e){return function(e){return e.asyncQueue.enqueue(ga(ma().mark((function t(){var n,r;return ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,LA(e);case 2:return n=t.sent,t.next=5,FA(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=lk(t)).F_.add(0),e.next=4,lT(n);case 4:n.O_.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(dR(e=$A(e,hR)))}function kR(e,t){var n=dR(e=$A(e,hR)),r=new fR;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new _A(e,t)}(function(e,t){if(e instanceof Uint8Array)return bA(e,t);if(e instanceof ArrayBuffer)return bA(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?Tx().encode(e):e),t)}(n,eT(t));e.asyncQueue.enqueueAndForget(ga(ma().mark((function t(){return ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=vA,t.next=3,UA(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function bR(e,t){return function(e,t){return e.asyncQueue.enqueue(ga(ma().mark((function n(){return ma().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=lk(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ur.getNamedQuery(e,t)}))},n.next=3,MA(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(dR(e=$A(e,hR)),t).then((function(t){return t?new nR(e,null,t.query):null}))}function wR(e){if(e._initialized||e._terminated)throw new hk(fk.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var _R=function(){function e(t){Ai(this,e),this._byteString=t}return Ni(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Yb.fromBase64String(t))}catch(t){throw new hk(fk.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Yb.fromUint8Array(t))}}]),e}(),xR=function(){function e(){Ai(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new hk(fk.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pk(n)}return Ni(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var SR=Ni((function e(t){Ai(this,e),this._methodName=t})),IR=function(){function e(t,n){if(Ai(this,e),!isFinite(t)||t<-90||t>90)throw new hk(fk.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new hk(fk.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Ni(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Sk(this._lat,e._lat)||Sk(this._long,e._long)}}]),e}(),ER=/^__.*__$/,TR=function(){function e(t,n,r){Ai(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ni(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new hx(e,this.data,this.fieldMask,t,this.fieldTransforms):new fx(e,this.data,t,this.fieldTransforms)}}]),e}(),CR=function(){function e(t,n,r){Ai(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ni(e,[{key:"toMutation",value:function(e,t){return new hx(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function AR(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw sk()}}var RR=function(){function e(t,n,r,i,a,o){Ai(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.du(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Ni(e,[{key:"path",get:function(){return this.settings.path}},{key:"Tu",get:function(){return this.settings.Tu}},{key:"Eu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Au",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Eu({path:n,Ru:!1});return r.Vu(e),r}},{key:"mu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Eu({path:n,Ru:!1});return r.du(),r}},{key:"fu",value:function(e){return this.Eu({path:void 0,Ru:!0})}},{key:"gu",value:function(e){return XR(e,this.settings.methodName,this.settings.pu||!1,this.path,this.settings.yu)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"du",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Vu(this.path.get(e))}},{key:"Vu",value:function(e){if(0===e.length)throw this.gu("Document fields must not be empty");if(AR(this.Tu)&&ER.test(e))throw this.gu('Document fields cannot begin and end with "__"')}}]),e}(),NR=function(){function e(t,n,r){Ai(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||eT(t)}return Ni(e,[{key:"wu",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new RR({Tu:e,methodName:t,yu:n,path:Pk.emptyPath(),Ru:!1,pu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function PR(e){var t=e._freezeSettings(),n=eT(e._databaseId);return new NR(e._databaseId,!!t.ignoreUndefinedProperties,n)}function OR(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.wu(a.merge||a.mergeFields?2:0,t,n,i);HR("Data must be an object, but it was:",o,r);var u,s,c=KR(r,o);if(a.merge)u=new Wb(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Pi(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=WR(t,l.value,n);if(!o.contains(d))throw new hk(fk.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));$R(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new Wb(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new TR(new Ew(c),u,s)}var DR=function(e){Oi(n,e);var t=Mi(n);function n(){return Ai(this,n),t.apply(this,arguments)}return Ni(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Tu)throw 1===e.Tu?e.gu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.gu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(SR);function LR(e,t,n){return new RR({Tu:3,yu:t.settings.yu,methodName:e._methodName,Ru:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var MR=function(e){Oi(n,e);var t=Mi(n);function n(){return Ai(this,n),t.apply(this,arguments)}return Ni(n,[{key:"_toFieldTransform",value:function(e){return new tx(e.path,new W_)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(SR),FR=function(e){Oi(n,e);var t=Mi(n);function n(e,r){var i;return Ai(this,n),(i=t.call(this,e)).Su=r,i}return Ni(n,[{key:"_toFieldTransform",value:function(e){var t=LR(this,e,!0),n=this.Su.map((function(e){return qR(e,t)})),r=new Q_(n);return new tx(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(SR),UR=function(e){Oi(n,e);var t=Mi(n);function n(e,r){var i;return Ai(this,n),(i=t.call(this,e)).Su=r,i}return Ni(n,[{key:"_toFieldTransform",value:function(e){var t=LR(this,e,!0),n=this.Su.map((function(e){return qR(e,t)})),r=new X_(n);return new tx(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(SR),VR=function(e){Oi(n,e);var t=Mi(n);function n(e,r){var i;return Ai(this,n),(i=t.call(this,e)).bu=r,i}return Ni(n,[{key:"_toFieldTransform",value:function(e){var t=new J_(e.serializer,B_(e.serializer,this.bu));return new tx(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(SR);function zR(e,t,n,r){var i=e.wu(1,t,n);HR("Data must be an object, but it was:",i,r);var a=[],o=Ew.empty();Vb(r,(function(e,r){var u=YR(t,e,n);r=va(r);var s=i.mu(u);if(r instanceof DR)a.push(u);else{var c=qR(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Wb(a);return new CR(o,u,i.fieldTransforms)}function jR(e,t,n,r,i,a){var o=e.wu(1,t,n),u=[WR(t,r,n)],s=[i];if(a.length%2!=0)throw new hk(fk.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(WR(t,a[c])),s.push(a[c+1]);for(var l=[],f=Ew.empty(),h=u.length-1;h>=0;--h)if(!$R(l,u[h])){var d=u[h],p=s[h];p=va(p);var v=o.mu(d);if(p instanceof DR)l.push(d);else{var m=qR(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Wb(l);return new CR(f,y,o.fieldTransforms)}function BR(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return qR(n,e.wu(r?4:3,t))}function qR(e,t){if(GR(e=va(e)))return HR("Unsupported field value:",t,e),KR(e,t);if(e instanceof SR)return function(e,t){if(!AR(t.Tu))throw t.gu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.gu("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Ru&&4!==t.Tu)throw t.gu("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Pi(e);try{for(a.s();!(n=a.n()).done;){var o=qR(n.value,t.fu(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=va(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return B_(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Tk.fromDate(e);return{timestampValue:Wx(t.serializer,n)}}if(e instanceof Tk){var r=new Tk(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Wx(t.serializer,r)}}if(e instanceof IR)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof _R)return{bytesValue:Qx(t.serializer,e._byteString)};if(e instanceof rR){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.gu("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:$x(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.gu("Unsupported field value: ".concat(XA(e)))}(e,t)}function KR(e,t){var n={};return zb(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Vb(e,(function(e,r){var i=qR(r,t.Au(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function GR(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Tk||e instanceof IR||e instanceof _R||e instanceof rR||e instanceof SR)}function HR(e,t,n){if(!GR(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=XA(n);throw"an object"===r?t.gu(e+" a custom object"):t.gu(e+" "+r)}}function WR(e,t,n){if((t=va(t))instanceof xR)return t._internalPath;if("string"==typeof t)return YR(e,t);throw XR("Field path arguments must be of type string or ",e,!1,void 0,n)}var QR=new RegExp("[~\\*/\\[\\]]");function YR(e,t,n){if(t.search(QR)>=0)throw XR("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Fi(xR,m(t.split(".")))._internalPath}catch(h){throw XR("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function XR(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new hk(fk.INVALID_ARGUMENT,u+e+s)}function $R(e,t){return e.some((function(e){return e.isEqual(t)}))}var JR=function(){function e(t,n,r,i,a){Ai(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Ni(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new rR(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new ZR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(eN("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),ZR=function(e){Oi(n,e);var t=Mi(n);function n(){return Ai(this,n),t.apply(this,arguments)}return Ni(n,[{key:"data",value:function(){return $o(Di(n.prototype),"data",this).call(this)}}]),n}(JR);function eN(e,t){return"string"==typeof t?YR(e,t):t instanceof xR?t._internalPath:t._delegate._internalPath}function tN(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new hk(fk.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var nN=Ni((function e(){Ai(this,e)})),rN=function(e){Oi(n,e);var t=Mi(n);function n(){return Ai(this,n),t.apply(this,arguments)}return Ni(n)}(nN);function iN(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof nN&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof oN})).length,n=e.filter((function(e){return e instanceof aN})).length;if(t>1||t>0&&n>0)throw new hk(fk.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=Pi(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var aN=function(e){Oi(n,e);var t=Mi(n);function n(e,r,i){var a;return Ai(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return Ni(n,[{key:"_apply",value:function(e){var t=this._parse(e);return gN(e._query,t),new nR(e.firestore,e.converter,y_(e._query,t))}},{key:"_parse",value:function(e){var t=PR(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new hk(fk.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){yN(o,a);var s,c=[],l=Pi(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(mN(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=mN(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||yN(o,a),u=BR(n,t,o,"in"===a||"not-in"===a);return Lw.create(i,a,u)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(rN);var oN=function(e){Oi(n,e);var t=Mi(n);function n(e,r){var i;return Ai(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return Ni(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Mw.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=Pi(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;gN(r,a),r=y_(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new nR(e.firestore,e.converter,y_(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(nN);var uN=function(e){Oi(n,e);var t=Mi(n);function n(e,r){var i;return Ai(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return Ni(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new hk(fk.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new hk(fk.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Pw(t,n);return function(e,t){if(null===f_(e)){var n=h_(e);null!==n&&kN(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new nR(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new u_(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(rN);var sN=function(e){Oi(n,e);var t=Mi(n);function n(e,r,i){var a;return Ai(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return Ni(n,[{key:"_apply",value:function(e){return new nR(e.firestore,e.converter,g_(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(rN);var cN=function(e){Oi(n,e);var t=Mi(n);function n(e,r,i){var a;return Ai(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return Ni(n,[{key:"_apply",value:function(e){var t=vN(e,this.type,this._docOrFields,this._inclusive);return new nR(e.firestore,e.converter,function(e,t){return new u_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(rN);function lN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cN._create("startAt",t,!0)}function fN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cN._create("startAfter",t,!1)}var hN=function(e){Oi(n,e);var t=Mi(n);function n(e,r,i){var a;return Ai(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return Ni(n,[{key:"_apply",value:function(e){var t=vN(e,this.type,this._docOrFields,this._inclusive);return new nR(e.firestore,e.converter,function(e,t){return new u_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(rN);function dN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return hN._create("endBefore",t,!1)}function pN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return hN._create("endAt",t,!0)}function vN(e,t,n,r){if(n[0]=va(n[0]),n[0]instanceof JR)return function(e,t,n,r,i){if(!r)throw new hk(fk.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Pi(p_(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(pw(t,r.key));else{var c=r.data.field(s.field);if(ew(c))throw new hk(fk.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new hk(fk.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Aw(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=PR(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new hk(fk.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new hk(fk.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!d_(e)&&-1!==c.indexOf("/"))throw new hk(fk.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Rk.fromString(c));if(!Ok.isDocumentKey(l))throw new hk(fk.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Ok(l);u.push(pw(t,f))}else{var h=BR(n,r,c);u.push(h)}}return new Aw(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function mN(e,t,n){if("string"==typeof(n=va(n))){if(""===n)throw new hk(fk.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!d_(t)&&-1!==n.indexOf("/"))throw new hk(fk.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Rk.fromString(n));if(!Ok.isDocumentKey(r))throw new hk(fk.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return pw(e,new Ok(r))}if(n instanceof rR)return pw(e,n._key);throw new hk(fk.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(XA(n),"."))}function yN(e,t){if(!Array.isArray(e)||0===e.length)throw new hk(fk.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function gN(e,t){if(t.isInequality()){var n=h_(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new hk(fk.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=f_(e);null!==i&&kN(e,r,i)}var a=function(e,t){var n,r=Pi(e);try{for(r.s();!(n=r.n()).done;){var i,a=Pi(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new hk(fk.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new hk(fk.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function kN(e,t,n){if(!n.isEqual(t))throw new hk(fk.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var bN=function(){function e(){Ai(this,e)}return Ni(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(uw(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jb(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zb(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw sk()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Vb(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new IR(Jb(e.latitude),Jb(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=tw(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(nw(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=$b(e);return new Tk(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Rk.fromString(e);ck(wS(n));var r=new iw(n.get(1),n.get(3)),i=new Ok(n.popFirst(5));return r.isEqual(t)||ak("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function wN(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var _N=function(e){Oi(n,e);var t=Mi(n);function n(e){var r;return Ai(this,n),(r=t.call(this)).firestore=e,r}return Ni(n,[{key:"convertBytes",value:function(e){return new _R(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new rR(this.firestore,null,t)}}]),n}(bN);var xN=function(){function e(t,n){Ai(this,e),this.hasPendingWrites=t,this.fromCache=n}return Ni(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),SN=function(e){Oi(n,e);var t=Mi(n);function n(e,r,i,a,o,u){var s;return Ai(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Ni(n,[{key:"exists",value:function(){return $o(Di(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new IN(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(eN("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(JR),IN=function(e){Oi(n,e);var t=Mi(n);function n(){return Ai(this,n),t.apply(this,arguments)}return Ni(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return $o(Di(n.prototype),"data",this).call(this,e)}}]),n}(SN),EN=function(){function e(t,n,r,i){Ai(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new xN(i.hasPendingWrites,i.fromCache),this.query=r}return Ni(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new IN(n._firestore,n._userDataWriter,r.key,r,new xN(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new hk(fk.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new IN(e._firestore,e._userDataWriter,t.doc.key,t.doc,new xN(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new IN(e._firestore,e._userDataWriter,t.doc.key,t.doc,new xN(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:TN(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function TN(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return sk()}}function CN(e,t){return e instanceof SN&&t instanceof SN?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof EN&&t instanceof EN&&e._firestore===t._firestore&&sR(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var AN=function(e){Oi(n,e);var t=Mi(n);function n(e){var r;return Ai(this,n),(r=t.call(this)).firestore=e,r}return Ni(n,[{key:"convertBytes",value:function(e){return new _R(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new rR(this.firestore,null,t)}}]),n}(bN);function RN(e){e=$A(e,rR);var t=$A(e.firestore,hR),n=dR(t),r=new AN(t);return function(e,t){var n=new dk;return e.asyncQueue.enqueueAndForget(ga(ma().mark((function r(){return ma().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ga(ma().mark((function e(t,n,r){var i,a;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=lk(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new hk(fk.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=XT(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,MA(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new SN(t,r,e._key,n,new xN(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function NN(e){e=$A(e,nR);var t=$A(e.firestore,hR),n=dR(t),r=new AN(t);return tN(e._query),qA(n,e._query).then((function(n){return new EN(t,r,e,n)}))}function PN(e){e=$A(e,nR);var t=$A(e.firestore,hR),n=dR(t),r=new AN(t);return function(e,t){var n=new dk;return e.asyncQueue.enqueueAndForget(ga(ma().mark((function r(){return ma().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ga(ma().mark((function e(t,n,r){var i,a,o,u,s;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,EE(t,n,!0);case 3:i=e.sent,a=new mC(n,i.Ps),o=a.ha(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=XT(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,MA(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new EN(t,r,e,n)}))}function ON(e){e=$A(e,nR);var t=$A(e.firestore,hR),n=dR(t),r=new AN(t);return qA(n,e._query,{source:"server"}).then((function(n){return new EN(t,r,e,n)}))}function DN(e,t,n){e=$A(e,rR);var r=$A(e.firestore,hR),i=wN(e.converter,t,n);return UN(r,[OR(PR(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,rx.none())])}function LN(e,t,n){e=$A(e,rR);for(var r=$A(e.firestore,hR),i=PR(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return UN(r,[("string"==typeof(t=va(t))||t instanceof xR?jR(i,"updateDoc",e._key,t,n,o):zR(i,"updateDoc",e._key,t)).toMutation(e._key,rx.exists(!0))])}function MN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=va(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||lR(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(lR(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof rR)l=$A(e.firestore,hR),f=c_(e._key.path),c={next:function(t){n[s]&&n[s](VN(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=$A(e,nR);l=$A(p.firestore,hR),f=p._query;var v=new AN(l);c={next:function(e){n[s]&&n[s](new EN(l,v,p,e))},error:n[s+1],complete:n[s+2]},tN(e._query)}return function(e,t,n,r){var i=new wA(r),a=new cC(t,i,n);return e.asyncQueue.enqueueAndForget(ga(ma().mark((function t(){return ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=nC,t.next=3,zA(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.La(),e.asyncQueue.enqueueAndForget(ga(ma().mark((function t(){return ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=iC,t.next=3,zA(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(dR(l),f,h,c)}function FN(e,t){return function(e,t){var n=new wA(t);return e.asyncQueue.enqueueAndForget(ga(ma().mark((function t(){return ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){lk(e).K_.add(t),t.next()},t.next=3,zA(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.La(),e.asyncQueue.enqueueAndForget(ga(ma().mark((function t(){return ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){lk(e).K_.delete(t)},t.next=3,zA(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(dR(e=$A(e,hR)),lR(t)?t:{next:t})}function UN(e,t){return function(e,t){var n=new dk;return e.asyncQueue.enqueueAndForget(ga(ma().mark((function r(){return ma().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=EC,r.next=3,UA(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(dR(e),t)}function VN(e,t,n){var r=n.docs.get(t._key),i=new AN(e);return new SN(e,i,t._key,r,new xN(n.hasPendingWrites,n.fromCache),t.converter)}var zN={maxAttempts:5},jN=function(){function e(t,n){Ai(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=PR(t)}return Ni(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=BN(e,this._firestore),i=wN(r.converter,t,n),a=OR(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,rx.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=BN(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=va(t))||t instanceof xR?jR(this._dataReader,"WriteBatch.update",i._key,t,n,o):zR(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,rx.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=BN(e,this._firestore);return this._mutations=this._mutations.concat(new gx(t._key,rx.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new hk(fk.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function BN(e,t){if((e=va(e)).firestore!==t)throw new hk(fk.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var qN=function(e){Oi(n,e);var t=Mi(n);function n(e,r){var i;return Ai(this,n),(i=t.call(this,e,r))._firestore=e,i}return Ni(n,[{key:"get",value:function(e){var t=this,r=BN(e,this._firestore),i=new AN(this._firestore);return $o(Di(n.prototype),"get",this).call(this,e).then((function(e){return new SN(t._firestore,i,r._key,e._document,new xN(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Ai(this,e),this._firestore=t,this._transaction=n,this._dataReader=PR(t)}return Ni(e,[{key:"get",value:function(e){var t=this,n=BN(e,this._firestore),r=new _N(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return sk();var i=e[0];if(i.isFoundDocument())return new JR(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new JR(t._firestore,r,n._key,null,n.converter);throw sk()}))}},{key:"set",value:function(e,t,n){var r=BN(e,this._firestore),i=wN(r.converter,t,n),a=OR(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=BN(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=va(t))||t instanceof xR?jR(this._dataReader,"Transaction.update",i._key,t,n,o):zR(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=BN(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function KN(e,t,n){e=$A(e,hR);var r=Object.assign(Object.assign({},zN),n);return function(e){if(e.maxAttempts<1)throw new hk(fk.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new dk;return e.asyncQueue.enqueueAndForget(ga(ma().mark((function i(){var a;return ma().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,VA(e);case 2:a=i.sent,new SA(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(dR(e),(function(n){return t(new qN(e,n))}),r)}function GN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new FR("arrayUnion",t)}function HN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new UR("arrayRemove",t)}new WeakMap;!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){tk=e}(yo),co(new ka("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new hR(new yk(e.getProvider("auth-internal")),new wk(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new hk(fk.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new iw(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),xo(Zg,"4.2.0",e),xo(Zg,"4.2.0","esm2017")}();function WN(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new hk("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function QN(){if("undefined"===typeof Uint8Array)throw new hk("unimplemented","Uint8Arrays are not available in this environment.")}function YN(){if("undefined"==typeof atob)throw new hk("unimplemented","Blobs are unavailable in Firestore in this environment.")}var XN=function(){function e(t){Ai(this,e),this._delegate=t}return Ni(e,[{key:"toBase64",value:function(){return YN(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return QN(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return YN(),new e(_R.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return QN(),new e(_R.fromUint8Array(t))}}]),e}();function $N(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Pi(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var JN=function(){function e(){Ai(this,e)}return Ni(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){wR(e=$A(e,hR));var n=dR(e);if(n._uninitializedComponentsProvider)throw new hk(fk.FAILED_PRECONDITION,"SDK cache is already specified.");ok("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new kA;return vR(n,i,new yA(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){wR(e=$A(e,hR));var t=dR(e);if(t._uninitializedComponentsProvider)throw new hk(fk.FAILED_PRECONDITION,"SDK cache is already specified.");ok("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new kA;return vR(t,r,new gA(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new hk(fk.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new dk;return e._queue.enqueueAndForgetEvenWhileRestricted(ga(ma().mark((function n(){return ma().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=ga(ma().mark((function e(t){var n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Yk.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Yk.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(lE(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),ZN=function(){function e(t,n,r){var i=this;Ai(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof iw||(this._appCompat=t)}return Ni(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||ok("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};tR(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return yR(this._delegate)}},{key:"disableNetwork",value:function(){return gR(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&WA("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return mR(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return FN(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new hk("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new dP(this,aR(this._delegate,e))}catch(t){throw aP(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new iP(this,oR(this._delegate,e))}catch(t){throw aP(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new lP(this,function(e,t){if(e=$A(e,eR),HA("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new hk(fk.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new nR(e,null,function(e){return new u_(Rk.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw aP(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return KN(this._delegate,(function(n){return e(new tP(t,n))}))}},{key:"batch",value:function(){var e=this;return dR(this._delegate),new nP(new jN(this._delegate,(function(t){return UN(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return kR(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return bR(this._delegate,e).then((function(e){return e?new lP(t,e):null}))}}]),e}(),eP=function(e){Oi(n,e);var t=Mi(n);function n(e){var r;return Ai(this,n),(r=t.call(this)).firestore=e,r}return Ni(n,[{key:"convertBytes",value:function(e){return new XN(new _R(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return iP.forKey(t,this.firestore,null)}}]),n}(bN);var tP=function(){function e(t,n){Ai(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new eP(t)}return Ni(e,[{key:"get",value:function(e){var t=this,n=pP(e);return this._delegate.get(n).then((function(e){return new sP(t._firestore,new SN(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=pP(e);return n?(WN("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=pP(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=pP(e);return this._delegate.delete(t),this}}]),e}(),nP=function(){function e(t){Ai(this,e),this._delegate=t}return Ni(e,[{key:"set",value:function(e,t,n){var r=pP(e);return n?(WN("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=pP(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=pP(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),rP=function(){function e(t,n,r){Ai(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Ni(e,[{key:"fromFirestore",value:function(e,t){var n=new IN(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new cP(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new eP(t),n),i.set(n,a)),a}}]),e}();rP.INSTANCES=new WeakMap;var iP=function(){function e(t,n){Ai(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new eP(t)}return Ni(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new dP(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new dP(this.firestore,aR(this._delegate,e))}catch(t){throw aP(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=va(e))instanceof rR&&uR(this._delegate,e)}},{key:"set",value:function(e,t){t=WN("DocumentReference.set",t);try{return t?DN(this._delegate,e,t):DN(this._delegate,e)}catch(n){throw aP(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?LN(this._delegate,e):LN.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw aP(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return UN($A((e=this._delegate).firestore,hR),[new gx(e._key,rx.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=oP(n),a=uP(n,(function(t){return new sP(e.firestore,new SN(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return MN(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?RN(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=$A(e,rR);var t=$A(e.firestore,hR);return BA(dR(t),e._key,{source:"server"}).then((function(n){return VN(t,e,n)}))}(this._delegate):function(e){e=$A(e,rR);var t=$A(e.firestore,hR);return BA(dR(t),e._key).then((function(n){return VN(t,e,n)}))}(this._delegate)).then((function(e){return new sP(t.firestore,new SN(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(rP.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new hk("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new rR(n._delegate,r,new Ok(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new rR(n._delegate,r,t))}}]),e}();function aP(e,t,n){return e.message=e.message.replace(t,n),e}function oP(e){var t,n=Pi(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!$N(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function uP(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=$N(e[0])?e[0]:$N(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var sP=function(){function e(t,n){Ai(this,e),this._firestore=t,this._delegate=n}return Ni(e,[{key:"ref",get:function(){return new iP(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return CN(this._delegate,e._delegate)}}]),e}(),cP=function(e){Oi(n,e);var t=Mi(n);function n(){return Ai(this,n),t.apply(this,arguments)}return Ni(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||sk(),t}}]),n}(sP),lP=function(){function e(t,n){Ai(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new eP(t)}return Ni(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,iN(this._delegate,function(e,t,n){var r=t,i=eN("where",e);return aN._create(i,r,n)}(t,n,r)))}catch(i){throw aP(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,iN(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=eN("orderBy",e);return uN._create(n,t)}(t,n)))}catch(r){throw aP(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,iN(this._delegate,(JA("limit",n=t),sN._create("limit",n,"F"))))}catch(n){throw aP(n,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,iN(this._delegate,(JA("limitToLast",n=t),sN._create("limitToLast",n,"L"))))}catch(n){throw aP(n,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,iN(this._delegate,lN.apply(void 0,arguments)))}catch(t){throw aP(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,iN(this._delegate,fN.apply(void 0,arguments)))}catch(t){throw aP(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,iN(this._delegate,dN.apply(void 0,arguments)))}catch(t){throw aP(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,iN(this._delegate,pN.apply(void 0,arguments)))}catch(t){throw aP(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return sR(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?PN(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?ON(this._delegate):NN(this._delegate)).then((function(e){return new hP(t.firestore,new EN(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=oP(n),a=uP(n,(function(t){return new hP(e.firestore,new EN(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return MN(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(rP.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),fP=function(){function e(t,n){Ai(this,e),this._firestore=t,this._delegate=n}return Ni(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new cP(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),hP=function(){function e(t,n){Ai(this,e),this._firestore=t,this._delegate=n}return Ni(e,[{key:"query",get:function(){return new lP(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new cP(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new fP(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new cP(n._firestore,r))}))}},{key:"isEqual",value:function(e){return CN(this._delegate,e._delegate)}}]),e}(),dP=function(e){Oi(n,e);var t=Mi(n);function n(e,r){var i;return Ai(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Ni(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new iP(this.firestore,e):null}},{key:"doc",value:function(e){try{return new iP(this.firestore,void 0===e?oR(this._delegate):oR(this._delegate,e))}catch(t){throw aP(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=$A(e.firestore,hR),r=oR(e),i=wN(e.converter,t);return UN(n,[OR(PR(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,rx.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new iP(t.firestore,e)}))}},{key:"isEqual",value:function(e){return uR(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(rP.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(lP);function pP(e){return $A(e,rR)}var vP=function(){function e(){Ai(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Fi(xR,n)}return Ni(e,[{key:"isEqual",value:function(e){return(e=va(e))instanceof xR&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Pk.keyField().canonicalString())}}]),e}(),mP=function(){function e(t){Ai(this,e),this._delegate=t}return Ni(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new MR("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new DR("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=GN.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=HN.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new VR("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),yP={Firestore:ZN,GeoPoint:IR,Timestamp:Tk,Blob:XN,Transaction:tP,WriteBatch:nP,DocumentReference:iP,DocumentSnapshot:sP,Query:lP,QueryDocumentSnapshot:cP,QuerySnapshot:hP,CollectionReference:dP,FieldPath:vP,FieldValue:mP,setLogLevel:function(e){var t;t=e,nk.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new ka("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},yP)))}(e,(function(e,t){return new ZN(e,t,new JN)})),e.registerVersion("@firebase/firestore-compat","0.3.18")}(Yo);var gP,kP="firebasestorage.googleapis.com",bP="storageBucket",wP=function(e){Oi(n,e);var t=Mi(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Ai(this,n),(i=t.call(this,_P(e),"Firebase Storage: ".concat(r," (").concat(_P(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(Fr(i),n.prototype),i}return Ni(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return _P(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(na);function _P(e){return"storage/"+e}function xP(){return new wP(gP.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function SP(){return new wP(gP.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function IP(){return new wP(gP.CANCELED,"User canceled the upload/download.")}function EP(){return new wP(gP.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function TP(e){return new wP(gP.INVALID_ARGUMENT,e)}function CP(){return new wP(gP.APP_DELETED,"The Firebase app was deleted.")}function AP(e){return new wP(gP.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function RP(e,t){return new wP(gP.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function NP(e){throw new wP(gP.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(gP||(gP={}));var PP,OP=function(){function e(t,n){Ai(this,e),this.bucket=t,this.path_=n}return Ni(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new wP(gP.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===kP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new wP(gP.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),DP=function(){function e(t){Ai(this,e),this.promise_=Promise.reject(t)}return Ni(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function LP(e){return"string"===typeof e||e instanceof String}function MP(e){return FP()&&e instanceof Blob}function FP(){return"undefined"!==typeof Blob&&!$i()}function UP(e,t,n,r){if(r<t)throw TP("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw TP("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function VP(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function zP(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function jP(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(PP||(PP={}));var BP=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this,d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];Ai(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return Ni(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=xP();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?CP():IP());else i(SP())}};this.canceled_?t(0,new qP(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new qP(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===PP.NO_ERROR,a=r.getStatus();if(!n||jP(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===PP.ABORT;t(!1,new qP(!1,null,o))}else{var u=-1!==e.successCodes_.indexOf(a);t(!0,new qP(u,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),qP=Ni((function e(t,n,r){Ai(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function KP(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function GP(){for(var e=KP(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(FP())return new Blob(n);throw new wP(gP.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function HP(e){if("undefined"===typeof atob)throw t="base-64",new wP(gP.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var WP={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},QP=Ni((function e(t,n){Ai(this,e),this.data=t,this.contentType=n||null}));function YP(e,t){switch(e){case WP.RAW:return new QP(XP(t));case WP.BASE64:case WP.BASE64URL:return new QP($P(e,t));case WP.DATA_URL:return new QP(function(e){var t=new JP(e);return t.base64?$P(WP.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw RP(WP.DATA_URL,"Malformed data URL.")}return XP(t)}(t.rest)}(t),new JP(t).contentType)}throw xP()}function XP(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function $P(e,t){switch(e){case WP.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw RP(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case WP.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw RP(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=HP(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw RP(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var JP=Ni((function e(t){Ai(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw RP(WP.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}));var ZP=function(){function e(t,n){Ai(this,e);var r=0,i="";MP(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return Ni(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(MP(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(FP()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(GP.apply(null,i))}var a=n.map((function(e){return LP(e)?YP(WP.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function eO(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function tO(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function nO(e,t){return t}var rO=Ni((function e(t,n,r,i){Ai(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||nO})),iO=null;function aO(){if(iO)return iO;var e=[];e.push(new rO("bucket")),e.push(new rO("generation")),e.push(new rO("metageneration")),e.push(new rO("name","fullPath",!0));var t=new rO("name");t.xform=function(e,t){return function(e){return!LP(e)||e.length<2?e:tO(e)}(t)},e.push(t);var n=new rO("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new rO("timeCreated")),e.push(new rO("updated")),e.push(new rO("md5Hash",null,!0)),e.push(new rO("cacheControl",null,!0)),e.push(new rO("contentDisposition",null,!0)),e.push(new rO("contentEncoding",null,!0)),e.push(new rO("contentLanguage",null,!0)),e.push(new rO("contentType",null,!0)),e.push(new rO("metadata","customMetadata",!0)),iO=e}function oO(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new OP(n,r);return t._makeStorageReference(i)}})}(r,e),r}function uO(e,t,n){var r=eO(t);return null===r?null:oO(e,r,n)}function sO(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var cO="prefixes",lO="items";function fO(e,t,n){var r=eO(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[cO]){var i,a=Pi(n[cO]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new OP(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n[lO]){var s,c=Pi(n[lO]);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new OP(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var hO=Ni((function e(t,n,r,i){Ai(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function dO(e){if(!e)throw xP()}function pO(e,t){return function(n,r){var i=uO(e,r,t);return dO(null!==i),i}}function vO(e,t){return function(n,r){var i=uO(e,r,t);return dO(null!==i),function(e,t,n,r){var i=eO(t);if(null===i)return null;if(!LP(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent,u=a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return VP("/b/"+o(i)+"/o/"+o(a),n,r)+zP({alt:"media",token:t})}));return u[0]}(i,r,e.host,e._protocol)}}function mO(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new wP(gP.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new wP(gP.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new wP(gP.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new wP(gP.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function yO(e){var t=mO(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new wP(gP.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function gO(e,t,n){var r=VP(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new hO(r,"GET",pO(e,n),i);return a.errorHandler=yO(t),a}function kO(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=VP(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new hO(o,"GET",function(e,t){return function(n,r){var i=fO(e,t,r);return dO(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=mO(t),s}function bO(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function wO(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=bO(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+sO(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=ZP.getBlob(c,r,l);if(null===f)throw EP();var h={name:s.fullPath},d=VP(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new hO(d,"POST",pO(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=mO(t),v}var _O=Ni((function e(t,n,r,i){Ai(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function xO(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){dO(!1)}return dO(!!n&&-1!==(t||["active"]).indexOf(n)),n}var SO=262144;function IO(e,t,n,r,i,a,o,u){var s=new _O(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new wP(gP.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw EP();var v=t.maxUploadRetryTime,m=new hO(n,"POST",(function(e,n){var i,o=xO(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?pO(t,a)(e,n):null,new _O(u,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=u||null,m.errorHandler=mO(e),m}var EO={STATE_CHANGED:"state_changed"},TO={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function CO(e){switch(e){case"running":case"pausing":case"canceling":return TO.RUNNING;case"paused":return TO.PAUSED;case"success":return TO.SUCCESS;case"canceled":return TO.CANCELED;default:return TO.ERROR}}var AO=Ni((function e(t,n,r){Ai(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function RO(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var NO=null,PO=function(){function e(){var t=this;Ai(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=PP.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=PP.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=PP.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return Ni(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw NP("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw NP("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw NP("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw NP("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw NP("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),OO=function(e){Oi(n,e);var t=Mi(n);function n(){return Ai(this,n),t.apply(this,arguments)}return Ni(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(PO);function DO(){return NO?NO():new OO}var LO=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Ai(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=aO(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals(gP.CANCELED))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(jP(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=SP()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals(gP.CANCELED)?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return Ni(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=c(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=bO(t,r,i),u={name:o.fullPath},s=VP(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=sO(o,n),f=e.maxUploadRetryTime,h=new hO(s,"POST",(function(e){var t;xO(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){dO(!1)}return dO(LP(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=mO(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,DO,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new hO(n,"POST",(function(e){var t=xO(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){dO(!1)}n||dO(!1);var i=Number(n);return dO(!isNaN(i)),new _O(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=mO(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,DO,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=SO*this._chunkMultiplier,n=new _O(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=IO(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,DO,i,a,!1);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(SO*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=gO(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,DO,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=wO(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,DO,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=IP(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=CO(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new AO(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(CO(this._state)){case TO.SUCCESS:RO(this._resolve.bind(null,this.snapshot))();break;case TO.CANCELED:case TO.ERROR:RO(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(CO(this._state)){case TO.RUNNING:case TO.PAUSED:e.next&&RO(e.next.bind(e,this.snapshot))();break;case TO.SUCCESS:e.complete&&RO(e.complete.bind(e))();break;default:e.error&&RO(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),MO=function(){function e(t,n){Ai(this,e),this._service=t,this._location=n instanceof OP?n:OP.makeFromUrl(n,t.host)}return Ni(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new OP(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return tO(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new OP(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw AP(e)}}]),e}();function FO(e,t,n){return UO.apply(this,arguments)}function UO(){return(UO=ga(ma().mark((function e(t,n,r){var i,a,o,u;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,VO(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,m(u.prefixes)),(a=n.items).push.apply(a,m(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,FO(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function VO(e,t){null!=t&&"number"===typeof t.maxResults&&UP("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=kO(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,DO)}function zO(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=VP(t.fullServerUrl(),e.host,e._protocol),a=sO(n,r),o=e.maxOperationRetryTime,u=new hO(i,"PATCH",pO(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=yO(t),u}(e.storage,e._location,t,aO());return e.storage.makeRequestWithTokens(n,DO)}function jO(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=VP(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new hO(r,"GET",vO(e,n),i);return a.errorHandler=yO(t),a}(e.storage,e._location,aO());return e.storage.makeRequestWithTokens(t,DO).then((function(e){if(null===e)throw new wP(gP.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function BO(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=VP(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new hO(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=yO(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,DO)}function qO(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new OP(e._location.bucket,n);return new MO(e.storage,r)}function KO(e,t){if(e instanceof WO){var n=e;if(null==n._bucket)throw new wP(gP.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+bP+"' property when initializing the app?");var r=new MO(n,n._bucket);return null!=t?KO(r,t):r}return void 0!==t?qO(e,t):e}function GO(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof WO)return new MO(e,t);throw TP("To use ref(service, url), the first argument must be a Storage instance.")}return KO(e,t)}function HO(e,t){var n=null===t||void 0===t?void 0:t[bP];return null==n?null:OP.makeFromBucketSpec(n,e)}var WO=function(){function e(t,n,r,i,a){Ai(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=kP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?OP.makeFromBucketSpec(i,this._host):HO(this._host,this.app.options)}return Ni(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=OP.makeFromBucketSpec(this._url,e):this._bucket=HO(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){UP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){UP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=ga(ma().mark((function e(){var t,n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=ga(ma().mark((function e(){var t,n;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new MO(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new DP(CP());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=zP(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new BP(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=ga(ma().mark((function e(t,n){var r,i,a,o;return ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=c(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),QO="@firebase/storage",YO="0.11.2",XO="storage";function $O(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new LO(e,new ZP(t),n)}(e=va(e),t,n)}function JO(e){return function(e){e._throwIfRoot("getMetadata");var t=gO(e.storage,e._location,aO());return e.storage.makeRequestWithTokens(t,DO)}(e=va(e))}function ZO(e){return function(e){var t={prefixes:[],items:[]};return FO(e,t).then((function(){return t}))}(e=va(e))}function eD(e,t){return GO(e=va(e),t)}function tD(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:Yi(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function nD(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new WO(r,i,a,n,yo)}co(new ka(XO,nD,"PUBLIC").setMultipleInstances(!0)),xo(QO,YO,""),xo(QO,YO,"esm2017");var rD=function(){function e(t,n,r){Ai(this,e),this._delegate=t,this.task=n,this.ref=r}return Ni(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),iD=function(){function e(t,n){Ai(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Ni(e,[{key:"snapshot",get:function(){return new rD(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new rD(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new rD(e,i,i._ref))}:{next:t.next?function(e){return t.next(new rD(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),aD=function(){function e(t,n){Ai(this,e),this._delegate=t,this._service=n}return Ni(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new oD(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new oD(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),oD=function(){function e(t,n){Ai(this,e),this._delegate=t,this.storage=n}return Ni(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return qO(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new iD($O(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:WP.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=YP(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new iD(new LO(this._delegate,new ZP(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return ZO(this._delegate).then((function(t){return new aD(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return VO(e=va(e),t)}(this._delegate,e||void 0).then((function(e){return new aD(e,t.storage)}))}},{key:"getMetadata",value:function(){return JO(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return zO(e=va(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return jO(va(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),BO(va(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw AP(e)}}]),e}(),uD=function(){function e(t,n){Ai(this,e),this.app=t,this._delegate=n}return Ni(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(sD(e))throw TP("ref() expected a child path but got a URL, use refFromURL instead.");return new oD(eD(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!sD(e))throw TP("refFromURL() expected a full URL but got a child path, use ref() instead.");try{OP.makeFromUrl(e,this._delegate.host)}catch(t){throw TP("refFromUrl() expected a valid full URL but got an invalid one.")}return new oD(eD(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};tD(this._delegate,e,t,n)}}]),e}();function sD(e){return/^[A-Za-z]+:\/\//.test(e)}function cD(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new uD(r,i)}!function(e){var t={TaskState:TO,TaskEvent:EO,StringFormat:WP,Storage:uD,Reference:oD};e.INTERNAL.registerComponent(new ka("storage-compat",cD,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.2")}(Yo);var lD,fD=Yo.initializeApp({apiKey:"AIzaSyAGzdVNKsTtJZMFmcR65PkPjivdU5XAf7c",authDomain:"whats-app-clone-ecf4b.firebaseapp.com",projectId:"whats-app-clone-ecf4b",storageBucket:"whats-app-clone-ecf4b.appspot.com",messagingSenderId:"335426106818",appId:"1:335426106818:web:5037ef1f5539816fae925b",measurementId:"G-DK3T1V8FW6"}).firestore(),hD=Yo.auth(),dD=new Yo.auth.GoogleAuthProvider,pD=(Yo.storage(),fD);function vD(){return vD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vD.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(lD||(lD={}));var mD,yD="popstate";function gD(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function kD(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function bD(e,t){return{usr:e.state,key:e.key,idx:t}}function wD(e,t,n,r){return void 0===n&&(n=null),vD({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?xD(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function _D(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function xD(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function SD(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,u=i.v5Compat,s=void 0!==u&&u,c=o.history,l=lD.Pop,f=null,h=d();function d(){return(c.state||{idx:null}).idx}function p(){l=lD.Pop;var e=d(),t=null==e?null:e-h;h=e,f&&f({action:l,location:m.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:_D(e);return gD(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,c.replaceState(vD({},c.state,{idx:h}),""));var m={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(yD,p),f=e,function(){o.removeEventListener(yD,p),f=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=lD.Push;var r=wD(m.location,e,t);n&&n(r,e);var i=bD(r,h=d()+1),a=m.createHref(r);try{c.pushState(i,"",a)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;o.location.assign(a)}s&&f&&f({action:l,location:m.location,delta:1})},replace:function(e,t){l=lD.Replace;var r=wD(m.location,e,t);n&&n(r,e);var i=bD(r,h=d()),a=m.createHref(r);c.replaceState(i,"",a),s&&f&&f({action:l,location:m.location,delta:0})},go:function(e){return c.go(e)}};return m}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(mD||(mD={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function ID(e,t,n){void 0===n&&(n="/");var r=VD(("string"===typeof t?xD(t):t).pathname||"/",n);if(null==r)return null;var i=ED(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=MD(i[o],UD(r));return a}function ED(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(gD(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=qD([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(gD(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),ED(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:LD(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=Pi(TD(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function TD(e){var t=e.split("/");if(0===t.length)return[];var n=Xo(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var u=TD(i.join("/")),s=[];return s.push.apply(s,m(u.map((function(e){return""===e?o:[o,e].join("/")})))),a&&s.push.apply(s,m(u)),s.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var CD=/^:\w+$/,AD=3,RD=2,ND=1,PD=10,OD=-2,DD=function(e){return"*"===e};function LD(e,t){var n=e.split("/"),r=n.length;return n.some(DD)&&(r+=OD),t&&(r+=RD),n.filter((function(e){return!DD(e)})).reduce((function(e,t){return e+(CD.test(t)?AD:""===t?ND:PD)}),r)}function MD(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=FD({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:qD([i,l.pathname]),pathnameBase:KD(qD([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=qD([i,l.pathnameBase]))}return a}function FD(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);kD("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=c(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return kD(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l[n]||"",t),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function UD(e){try{return decodeURI(e)}catch(t){return kD(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function VD(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function zD(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function jD(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function BD(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=xD(e):(gD(!(i=vD({},e)).pathname||!i.pathname.includes("?"),zD("?","pathname","search",i)),gD(!i.pathname||!i.pathname.includes("#"),zD("#","pathname","hash",i)),gD(!i.search||!i.search.includes("#"),zD("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?xD(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:GD(a),hash:HD(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var qD=function(e){return e.join("/").replace(/\/\/+/g,"/")},KD=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},GD=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},HD=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},WD=function(e){Oi(n,e);var t=Mi(n);function n(){return Ai(this,n),t.apply(this,arguments)}return Ni(n)}(Ui(Error));function QD(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var YD=["post","put","patch","delete"],XD=(new Set(YD),["get"].concat(YD));new Set(XD),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function $D(){return $D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$D.apply(this,arguments)}var JD=t.createContext(null);var ZD=t.createContext(null);var eL=t.createContext(null);var tL=t.createContext(null);var nL=t.createContext(null);var rL=t.createContext({outlet:null,matches:[],isDataRoute:!1});var iL=t.createContext(null);function aL(){return null!=t.useContext(nL)}function oL(){return aL()||gD(!1),t.useContext(nL).location}function uL(e){t.useContext(tL).static||t.useLayoutEffect(e)}function sL(){return t.useContext(rL).isDataRoute?function(){var e=gL(mL.UseNavigateStable).router,n=bL(yL.UseNavigateStable),r=t.useRef(!1);uL((function(){r.current=!0}));var i=t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,$D({fromRouteId:n},i)))}),[e,n]);return i}():function(){aL()||gD(!1);var e=t.useContext(JD),n=t.useContext(tL),r=n.basename,i=n.navigator,a=t.useContext(rL).matches,o=oL().pathname,u=JSON.stringify(jD(a).map((function(e){return e.pathnameBase}))),s=t.useRef(!1);return uL((function(){s.current=!0})),t.useCallback((function(t,n){if(void 0===n&&(n={}),s.current)if("number"!==typeof t){var a=BD(t,JSON.parse(u),o,"path"===n.relative);null==e&&"/"!==r&&(a.pathname="/"===a.pathname?r:qD([r,a.pathname])),(n.replace?i.replace:i.push)(a,n.state,n)}else i.go(t)}),[r,i,u,o,e])}()}function cL(e,n){var r=(void 0===n?{}:n).relative,i=t.useContext(rL).matches,a=oL().pathname,o=JSON.stringify(jD(i).map((function(e){return e.pathnameBase})));return t.useMemo((function(){return BD(e,JSON.parse(o),a,"path"===r)}),[e,o,a,r])}function lL(e,n,r){aL()||gD(!1);var i,a=t.useContext(tL).navigator,o=t.useContext(rL).matches,u=o[o.length-1],s=u?u.params:{},c=(u&&u.pathname,u?u.pathnameBase:"/"),l=(u&&u.route,oL());if(n){var f,h="string"===typeof n?xD(n):n;"/"===c||(null==(f=h.pathname)?void 0:f.startsWith(c))||gD(!1),i=h}else i=l;var d=i.pathname||"/",p=ID(e,{pathname:"/"===c?d:d.slice(c.length)||"/"});var v=vL(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:qD([c,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:qD([c,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,r);return n&&v?t.createElement(nL.Provider,{value:{location:$D({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:lD.Pop}},v):v}function fL(){var e=function(){var e,n=t.useContext(iL),r=kL(yL.UseRouteError),i=bL(yL.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=QD(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}var hL=t.createElement(fL,null),dL=function(e){Oi(r,e);var n=Mi(r);function r(e){var t;return Ai(this,r),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return Ni(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(rL.Provider,{value:this.props.routeContext},t.createElement(iL.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(t.Component);function pL(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(JD);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(rL.Provider,{value:n},i)}function vL(e,n,r){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==e){var a;if(null==(a=r)||!a.errors)return null;e=r.matches}var o=e,u=null==(i=r)?void 0:i.errors;if(null!=u){var s=o.findIndex((function(e){return e.route.id&&(null==u?void 0:u[e.route.id])}));s>=0||gD(!1),o=o.slice(0,Math.min(o.length,s+1))}return o.reduceRight((function(e,i,a){var s=i.route.id?null==u?void 0:u[i.route.id]:null,c=null;r&&(c=i.route.errorElement||hL);var l=n.concat(o.slice(0,a+1)),f=function(){var n;return n=s?c:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(pL,{match:i,routeContext:{outlet:e,matches:l,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?t.createElement(dL,{location:r.location,revalidation:r.revalidation,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):f()}),null)}var mL=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(mL||{}),yL=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(yL||{});function gL(e){var n=t.useContext(JD);return n||gD(!1),n}function kL(e){var n=t.useContext(ZD);return n||gD(!1),n}function bL(e){var n=function(e){var n=t.useContext(rL);return n||gD(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||gD(!1),r.route.id}r.startTransition;function wL(e){gD(!1)}function _L(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?lD.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;aL()&&gD(!1);var h=r.replace(/^\/*/,"/"),d=t.useMemo((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=xD(o));var p=o,v=p.pathname,m=void 0===v?"/":v,y=p.search,g=void 0===y?"":y,k=p.hash,b=void 0===k?"":k,w=p.state,_=void 0===w?null:w,x=p.key,S=void 0===x?"default":x,I=t.useMemo((function(){var e=VD(m,h);return null==e?null:{location:{pathname:e,search:g,hash:b,state:_,key:S},navigationType:s}}),[h,m,g,b,_,S,s]);return null==I?null:t.createElement(tL.Provider,{value:d},t.createElement(nL.Provider,{children:a,value:I}))}function xL(e){var t=e.children,n=e.location;return lL(EL(t),n)}var SL=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(SL||{}),IL=new Promise((function(){}));t.Component;function EL(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e)){var a=[].concat(m(n),[i]);if(e.type!==t.Fragment){e.type!==wL&&gD(!1),e.props.index&&e.props.children&&gD(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=EL(e.props.children,a)),r.push(o)}else r.push.apply(r,EL(e.props.children,a))}})),r}function TL(){return TL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TL.apply(this,arguments)}function CL(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var AL=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];var RL=r.startTransition;function NL(e){var n,r=e.basename,i=e.children,a=e.future,o=e.window,u=t.useRef();null==u.current&&(u.current=(void 0===(n={window:o,v5Compat:!0})&&(n={}),SD((function(e,t){var n=e.location;return wD("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:_D(t)}),null,n)));var s=u.current,l=c(t.useState({action:s.action,location:s.location}),2),f=l[0],h=l[1],d=(a||{}).v7_startTransition,p=t.useCallback((function(e){d&&RL?RL((function(){return h(e)})):h(e)}),[h,d]);return t.useLayoutEffect((function(){return s.listen(p)}),[s,p]),t.createElement(_L,{basename:r,children:i,location:f.location,navigationType:f.action,navigator:s})}var PL="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,OL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,DL=t.forwardRef((function(e,n){var r,i=e.onClick,a=e.relative,o=e.reloadDocument,u=e.replace,s=e.state,c=e.target,l=e.to,f=e.preventScrollReset,h=CL(e,AL),d=t.useContext(tL).basename,p=!1;if("string"===typeof l&&OL.test(l)&&(r=l,PL))try{var v=new URL(window.location.href),m=l.startsWith("//")?new URL(v.protocol+l):new URL(l),y=VD(m.pathname,d);m.origin===v.origin&&null!=y?l=y+m.search+m.hash:p=!0}catch(b){}var g=function(e,n){var r=(void 0===n?{}:n).relative;aL()||gD(!1);var i=t.useContext(tL),a=i.basename,o=i.navigator,u=cL(e,{relative:r}),s=u.hash,c=u.pathname,l=u.search,f=c;return"/"!==a&&(f="/"===c?a:qD([a,c])),o.createHref({pathname:f,search:l,hash:s})}(l,{relative:a}),k=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,u=r.preventScrollReset,s=r.relative,c=sL(),l=oL(),f=cL(e,{relative:s});return t.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:_D(l)===_D(f);c(e,{replace:n,state:o,preventScrollReset:u,relative:s})}}),[l,c,f,a,o,i,e,u,s])}(l,{replace:u,state:s,target:c,preventScrollReset:f,relative:a});return t.createElement("a",TL({},h,{href:r||g,onClick:p||o?i:function(e){i&&i(e),e.defaultPrevented||k(e)},ref:n,target:c}))}));var LL,ML;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(LL||(LL={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ML||(ML={}));var FL=function(e){var n,r=e.id,i=e.name,a=e.addNewChat,o=c((0,t.useState)(""),2),u=o[0],s=o[1],l=c((0,t.useState)([]),2),f=l[0],h=l[1];(0,t.useEffect)((function(){r&&pD.collection("rooms").doc(r).collection("message").orderBy("timestamp","desc").onSnapshot((function(e){h(e.docs.map((function(e){return e.data()})))}))}),[r]),(0,t.useEffect)((function(){s(Math.floor(5e3*Math.random()))}),[]);return a?(0,cr.jsx)("div",{onClick:function(){var e=prompt("please enter name for chat");pD.collection("rooms").add({name:e})},className:"sidebarChat",children:(0,cr.jsx)("h2",{children:"Add new chat"})}):(0,cr.jsx)(DL,{to:"/rooms/".concat(r),children:(0,cr.jsxs)("div",{className:"sidebarChat",children:[(0,cr.jsx)(_r,{src:"https://avatars.dicebear.com/api/human/".concat(u,".svg")}),(0,cr.jsxs)("div",{className:"sidebarChat__info",children:[(0,cr.jsx)("h2",{children:i}),(0,cr.jsx)("p",{children:null===(n=f[0])||void 0===n?void 0:n.message})]})]})})},UL=(0,t.createContext)(),VL=function(e){var n=e.children,r=e.initialState,i=e.reducer;return(0,cr.jsx)(UL.Provider,{value:(0,t.useReducer)(i,r),children:n})},zL=function(){return(0,t.useContext)(UL)},jL=function(){var e=c((0,t.useState)([]),2),n=e[0],r=e[1],i=c(zL(),2),a=i[0].user;i[1];return(0,t.useEffect)((function(){pD.collection("rooms").onSnapshot((function(e){r(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),(0,cr.jsxs)("div",{className:"sidebar",children:[(0,cr.jsxs)("div",{className:"sidebar__header",children:[(0,cr.jsx)(_r,{src:null===a||void 0===a?void 0:a.photoURL}),(0,cr.jsxs)("div",{className:"sidebar__headerRight",children:[(0,cr.jsx)(Si,{children:(0,cr.jsx)(Ii,{})}),(0,cr.jsx)(Si,{children:(0,cr.jsx)(Ei,{})}),(0,cr.jsx)(Si,{children:(0,cr.jsx)(Ti,{})})]})]}),(0,cr.jsx)("div",{className:"sidebar__search",children:(0,cr.jsxs)("div",{className:"sidebar__searchContainer",children:[(0,cr.jsx)(Ci,{}),(0,cr.jsx)("input",{placeholder:"Search or start new chat!",type:"text"})]})}),(0,cr.jsxs)("div",{className:"sidebar__chats",children:[(0,cr.jsx)(FL,{addNewChat:!0}),n.map((function(e){var t=e.id,n=e.data;return(0,cr.jsx)(FL,{id:t,name:n.name},t)}))]})]})},BL=pr((0,cr.jsx)("path",{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"}),"AttachFile"),qL=pr((0,cr.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"}),"InsertEmoticon"),KL=pr((0,cr.jsx)("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"}),"Mic"),GL=function(){var e,n,r,i=c((0,t.useState)(""),2),a=i[0],o=i[1],u=c((0,t.useState)(""),2),s=u[0],l=u[1],f=c((0,t.useState)(""),2),h=f[0],d=f[1],p=function(){var e=t.useContext(rL).matches,n=e[e.length-1];return n?n.params:{}}().roomId,v=c((0,t.useState)([]),2),m=v[0],y=v[1],g=c(zL(),2),k=g[0].user;g[1];(0,t.useEffect)((function(){p&&(pD.collection("rooms").doc(p).onSnapshot((function(e){d(e.data().name)})),pD.collection("rooms").doc(p).collection("message").orderBy("timestamp","asc").onSnapshot((function(e){y(e.docs.map((function(e){return e.data()})))})))}),[p]),(0,t.useEffect)((function(){o(Math.floor(5e3*Math.random()))}),[p]);return(0,cr.jsxs)("div",{className:"chat",children:[(0,cr.jsxs)("div",{className:"chat__header",children:[(0,cr.jsx)(_r,{src:"https://avatars.dicebear.com/api/human/".concat(a,".svg")}),(0,cr.jsxs)("div",{className:"chat__headerInfo",children:[(0,cr.jsx)("h3",{children:h}),(0,cr.jsxs)("p",{children:["Last Seen",null===(e=new Date(null===(n=m[m.length-1])||void 0===n||null===(r=n.timestamp)||void 0===r?void 0:r.toDate()))||void 0===e?void 0:e.toUTCString()]})]}),(0,cr.jsxs)("div",{className:"chat__headerRight",children:[(0,cr.jsx)(Si,{children:(0,cr.jsx)(Ci,{})}),(0,cr.jsx)(Si,{children:(0,cr.jsx)(BL,{})}),(0,cr.jsx)(Si,{children:(0,cr.jsx)(Ti,{})})]})]}),(0,cr.jsx)("div",{className:"chat__body",children:m.map((function(e){var t;return(0,cr.jsxs)("p",{className:"chat__message ".concat(e.name==k.displayName&&" chat__receiver"),children:[(0,cr.jsx)("span",{className:"chat__name",children:e.name}),e.message,(0,cr.jsx)("span",{className:"chat__timestamp",children:new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()})]})}))}),(0,cr.jsxs)("div",{className:"chat__footer",children:[(0,cr.jsx)(qL,{}),(0,cr.jsxs)("form",{children:[(0,cr.jsx)("input",{value:s,onChange:function(e){return l(e.target.value)},type:"text",placeholder:"Type a message"}),(0,cr.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),pD.collection("rooms").doc(p).collection("message").add({message:s,name:k.displayName,timestamp:Yo.firestore.FieldValue.serverTimestamp()}),l("")},children:"Send a message"})]}),(0,cr.jsx)(KL,{})]})]})};function HL(e){return or("MuiButton",e)}var WL=ur("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var QL=t.createContext({});var YL=t.createContext(void 0),XL=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],$L=function(e){return f({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},JL=Yn(gi,{shouldForwardProp:function(e){return Wn(e)||"classes"===e},name:"MuiButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],t["".concat(n.variant).concat(nr(n.color))],t["size".concat(nr(n.size))],t["".concat(n.variant,"Size").concat(nr(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((function(e){var t,n,r,i=e.theme,a=e.ownerState,o="light"===i.palette.mode?i.palette.grey[300]:i.palette.grey[800],u="light"===i.palette.mode?i.palette.grey.A100:i.palette.grey[700];return f({},i.typography.button,(Xe(t={minWidth:64,padding:"6px 16px",borderRadius:(i.vars||i).shape.borderRadius,transition:i.transitions.create(["background-color","box-shadow","border-color","color"],{duration:i.transitions.duration.short}),"&:hover":f({textDecoration:"none",backgroundColor:i.vars?"rgba(".concat(i.vars.palette.text.primaryChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):pn(i.palette.text.primary,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===a.variant&&"inherit"!==a.color&&{backgroundColor:i.vars?"rgba(".concat(i.vars.palette[a.color].mainChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):pn(i.palette[a.color].main,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===a.variant&&"inherit"!==a.color&&{border:"1px solid ".concat((i.vars||i).palette[a.color].main),backgroundColor:i.vars?"rgba(".concat(i.vars.palette[a.color].mainChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):pn(i.palette[a.color].main,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===a.variant&&{backgroundColor:i.vars?i.vars.palette.Button.inheritContainedHoverBg:u,boxShadow:(i.vars||i).shadows[4],"@media (hover: none)":{boxShadow:(i.vars||i).shadows[2],backgroundColor:(i.vars||i).palette.grey[300]}},"contained"===a.variant&&"inherit"!==a.color&&{backgroundColor:(i.vars||i).palette[a.color].dark,"@media (hover: none)":{backgroundColor:(i.vars||i).palette[a.color].main}}),"&:active":f({},"contained"===a.variant&&{boxShadow:(i.vars||i).shadows[8]})},"&.".concat(WL.focusVisible),f({},"contained"===a.variant&&{boxShadow:(i.vars||i).shadows[6]})),Xe(t,"&.".concat(WL.disabled),f({color:(i.vars||i).palette.action.disabled},"outlined"===a.variant&&{border:"1px solid ".concat((i.vars||i).palette.action.disabledBackground)},"contained"===a.variant&&{color:(i.vars||i).palette.action.disabled,boxShadow:(i.vars||i).shadows[0],backgroundColor:(i.vars||i).palette.action.disabledBackground})),t),"text"===a.variant&&{padding:"6px 8px"},"text"===a.variant&&"inherit"!==a.color&&{color:(i.vars||i).palette[a.color].main},"outlined"===a.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===a.variant&&"inherit"!==a.color&&{color:(i.vars||i).palette[a.color].main,border:i.vars?"1px solid rgba(".concat(i.vars.palette[a.color].mainChannel," / 0.5)"):"1px solid ".concat(pn(i.palette[a.color].main,.5))},"contained"===a.variant&&{color:i.vars?i.vars.palette.text.primary:null==(n=(r=i.palette).getContrastText)?void 0:n.call(r,i.palette.grey[300]),backgroundColor:i.vars?i.vars.palette.Button.inheritContainedBg:o,boxShadow:(i.vars||i).shadows[2]},"contained"===a.variant&&"inherit"!==a.color&&{color:(i.vars||i).palette[a.color].contrastText,backgroundColor:(i.vars||i).palette[a.color].main},"inherit"===a.color&&{color:"inherit",borderColor:"currentColor"},"small"===a.size&&"text"===a.variant&&{padding:"4px 5px",fontSize:i.typography.pxToRem(13)},"large"===a.size&&"text"===a.variant&&{padding:"8px 11px",fontSize:i.typography.pxToRem(15)},"small"===a.size&&"outlined"===a.variant&&{padding:"3px 9px",fontSize:i.typography.pxToRem(13)},"large"===a.size&&"outlined"===a.variant&&{padding:"7px 21px",fontSize:i.typography.pxToRem(15)},"small"===a.size&&"contained"===a.variant&&{padding:"4px 10px",fontSize:i.typography.pxToRem(13)},"large"===a.size&&"contained"===a.variant&&{padding:"8px 22px",fontSize:i.typography.pxToRem(15)},a.fullWidth&&{width:"100%"})}),(function(e){var t;return e.ownerState.disableElevation&&(Xe(t={boxShadow:"none","&:hover":{boxShadow:"none"}},"&.".concat(WL.focusVisible),{boxShadow:"none"}),Xe(t,"&:active",{boxShadow:"none"}),Xe(t,"&.".concat(WL.disabled),{boxShadow:"none"}),t)})),ZL=Yn("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.startIcon,t["iconSize".concat(nr(n.size))]]}})((function(e){var t=e.ownerState;return f({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},$L(t))})),eM=Yn("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.endIcon,t["iconSize".concat(nr(n.size))]]}})((function(e){var t=e.ownerState;return f({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},$L(t))})),tM=t.forwardRef((function(e,n){var r=t.useContext(QL),i=t.useContext(YL),a=tr({props:Xn(r,e),name:"MuiButton"}),o=a.children,u=a.color,s=void 0===u?"primary":u,c=a.component,h=void 0===c?"button":c,v=a.className,m=a.disabled,y=void 0!==m&&m,g=a.disableElevation,k=void 0!==g&&g,b=a.disableFocusRipple,w=void 0!==b&&b,_=a.endIcon,x=a.focusVisibleClassName,S=a.fullWidth,I=void 0!==S&&S,E=a.size,T=void 0===E?"medium":E,C=a.startIcon,A=a.type,R=a.variant,N=void 0===R?"text":R,P=l(a,XL),O=f({},a,{color:s,component:h,disabled:y,disableElevation:k,disableFocusRipple:w,fullWidth:I,size:T,type:A,variant:N}),D=function(e){var t=e.color,n=e.disableElevation,r=e.fullWidth,i=e.size,a=e.variant,o=e.classes;return f({},o,p({root:["root",a,"".concat(a).concat(nr(t)),"size".concat(nr(i)),"".concat(a,"Size").concat(nr(i)),"inherit"===t&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat(nr(i))],endIcon:["endIcon","iconSize".concat(nr(i))]},HL,o))}(O),L=C&&(0,cr.jsx)(ZL,{className:D.startIcon,ownerState:O,children:C}),M=_&&(0,cr.jsx)(eM,{className:D.endIcon,ownerState:O,children:_}),F=i||"";return(0,cr.jsxs)(JL,f({ownerState:O,className:d(r.className,D.root,v,F),component:h,disabled:y,focusRipple:!w,focusVisibleClassName:d(D.focusVisible,x),ref:n,type:A},P,{classes:D,children:[L,o,M]}))})),nM=tM,rM="SET_USER",iM=function(e,t){return t.type===rM?Oa(Oa({},e),{},{user:t.user}):e},aM=function(){var e=c(zL(),2),t=(e[0].user,e[1]);return(0,cr.jsx)("div",{className:"login",children:(0,cr.jsxs)("div",{className:"login__container",children:[(0,cr.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHwAAAB8CAMAAACcwCSMAAAAhFBMVEUqsxj////3+PcMrgCr3qbv8O/7+fv//P/4+PkXsAAjsg318vUAqwBdwVPw+e/g895YwE7X79TC57+h2puDznyX1pC65La13rGw4Kvy9vFnxF42tibc7dqY1JPE48Gh15x3ynBGuzqIzYHN6Mrm8eRTv0ep2KbS59BuxGY/uTHm7eWNz4iPLjEaAAAIZklEQVRoge2b63aquhaAKVnmhqhQFUG8ICha3//9dm5g1EBCu6r7jLPzox2twkdm5jUzeB9vHN5/cG1MouWfvzyW0cQFPl3MyBj89TEm4WJqgcezMaHerwxKxrO4Bx6F4JfIig/CqAv+Sclvovkg9NMMn4PfRvMB5ib4a9h3dO/VbJ3ewD9fxmb0zT08eh2aj+gOHv66nuuDhDo8fqHQ+QCxBp/9qm95HnR2g0/Hr2V73njawhcvXXE+yKKFhy+WOpN72MAnL584m/pEwV+/5GrROXz5YkPjAywVfPUO+B8F//O/B6eEAKLGcGv5AZzh1sf95pTE2zg5Lc7HNXuCl8AJ8PZJniIxIBS/0jrZe2AA/1twCi7XCCKIsa8PjBHC5WHtnIB+A05AmKSMLHk+Fj99Xz4Ihihduua/g+EUZFsfMaacNm4m3QiBfYL8rRt+KJxcBLqZrZxyi25+IT+5OKz9MDgFc4bGaqoSxVaeDXibOBazTx2S0UFw4pVIW1+fKzmc5FEU5RP4gcRnWDwWG6i0Gt4QOMgmSK2wIOP6tL8I/wIAocX8lPsINkLBPkptSeEAOLj6rWlhRj4UVHdr7A+vWNQQ3r7kz/vp7nCyUYrGJob8ODP5U/YAzBZgS4ebXroznOxQa9Fwe+x0ZKwGLhFu7A8t+m7rCgcb5CvLRlU27rNi5gkq1C7Ptee+jnBwRa0LPVm1mJBEuCFB71l3Nzg5K7vGMN27RA5wSGFjd1nnBU5wuk6VT4Hp0S1qkayCSumqS9ciOcFBqcwXVo5sRp9JOjONbdc1LnBykH6Nzbtwj9ak8KW0MDx03NsBTosmXLrKXNGPIuCzJ0jX34aDWAkdtbrG9J3aN47AXLolH3UUwHY4yVTAZDbW/Gtff1VVv/cSN0+Qcg1Ho845wEuptjC/sYNgNBoFhS1hoGumdLhb56xwmmEZKWFjryTkaAY/WadOzsrTIuODWuFgi9S6tcVcLuGj1MZm9Fh6RpSYHtQGp0Uq3WTaPDtZKPYoOFinTgvpZ3F6+QacBVKpMm0hSeoWXtuzRLCVbtbo4m1wMFV+qtk7oMevUTsyK53O5MPDcjicrpH06e215HxjB8aVfADkUATD1KByFjjzrDKOtstL5sGN/mW1NrFu/PFNcrfBYyn1tI1M5KDBnVTOV/r+DLCJPRexFJbtDKkm9tGX2XPdP38ORTJQDZ05vSj3uGuvpMVN4YJPl7JkJVXOEF0s8FCGBqRlI5qpbV0KMjKXi46fTaMfLvWNLZj+v00Dr6kLnGYqqj9rnAW+U3mjdh29KLkHM6foTouJqGDg8xpZ4ImoP/BU/5DsnAOLGOtKFG8GdbfAZVyAkf4hC5RK7o5Tz3lc9eFzRmGBb4WZP/jGxs8EtQubJwTCXLdD4aVIBuBDLkC2jeBdinoB5zd52mC1mJq47nHmLH9rbL0rL32cgbjJQDjzrgIePSwuyXyl8fv7y0y2R2sJH7zmMgPE+eOHbUYR6HOnl9CQ03Jt547qeXfXAj8p1/h0S5I09J3maspRPV8/fJfnQsJR7Yba+VXFw6dPKC0betmUEuAUjIIgP3h3FBrK3Sr4HAEt8Ey51+dKk9ImjwxGO1E0g6uygWqjbx2QPZKbVEN9O73InN0gMo+SvI0w6YESkLWBPhhtNMJK7lINjmoerbDByzRzr2+4/HrQcjs9yyC5TH/z72UybMlSU41NveSW1QRagsP+amspKotVbKrXXHI4XiMaNzco3d0hNfitpryq9HV4DkcvUuOMcueXn7+MeL/Nr0AkPDsrrwdnrx6o5NaK6VoxsXUcGPB58216lG7qO3l7U7EYk095d5DVT3h4blBgKQzNR6Y8116ryW0JY9Kvns87lyMdH4zavqxYNtxRM7hWqb4pEbnhaZhUDZ/5uPPNzpKfVKmsPIJqJ7uvv07Beh9/iVBXa+6VZFC2QpCxTey4M8FzsGt/0kQAWM/C4117ieSwz1jscL6xwh8eOlQn9D6Z5p5VSt0sNTuceVhhLNXgrh+Yq72wb+9G8Ygo6tQehTMPMkub/bsOS7Er3EJVO04bvvqFl2b3tXPT3W5qPIHlLq5jF7GPLTsTqMM1O8DXqdjRgeUwqYNZJXteGE863ZPVw+2hEt0gqY/3KZTZ023/bjicGZps1N28BLV2ygk5qS1fbHbqrnAZ1WDekr3job9fRslsitrG5u77PRYWGHAb1CghJBSdu1P37JmjTXhzU+619xuo024Um8AeAHC5lj5CvHpDeHUxNbdYGlkssUwYrfO2w0soWqOT4nyqEGq7hRih8nABQHOnlAJSXEuEVH+hr8XgBheGxm+UQiSng5v2GkRp+XmerdlsAZPCenbe1anopapGL5p067kLvCka/McGufwfRCit8rLclmVepa1g1A5WaW3IuNVqfsvUurSqXwzlwMq41Kcw/bSfXbGIvdbOZDR9eakF2lkN2WNtjk/I9va2cPCIvXB6VMcS1N2FoKskEvLF2ukBrHr2rTLOfn5mgu/faTJmK1xueNM83KrDC3eKoDQcpXHmeFqoHx6rfiyfsp8n50I6F0KKT+5rWvkrqfNv1ZvC+ZxQL1zsoPHZ4LRchHp2xh4ivJaVD2+DPWcVL8IhZ6RauOFImmgsiVU+MwfyeE9m36TYX1dxWUb1Nv6zOBfk+Vv98JWCm4rIFVvl7WE97tQefigMjPngRzYGHwsTJ185PHo+hkiSUzZ0MoPGOProPoBpj9w/G+0BzLcePX3vodu3Hjd+60Hr9x4xf+vh+o/opXKn968VvPaFiuZFmn/FqyTvfYnmva8PvffFqfe+Mvbx1pfl+JiydOjvvyXo9JqgGJNoufq770eullOnFyRfOf5/4f8ABvWR70PiwhMAAAAASUVORK5CYII="}),(0,cr.jsx)("div",{className:"login__text",children:(0,cr.jsx)("h1",{children:"Sign in to WhatsApp"})}),(0,cr.jsx)(nM,{onClick:function(){hD.signInWithPopup(dD).then((function(e){console.log(e),t({type:rM,user:e.user})})).catch((function(e){return alert(e.message)}))},children:"Sign in with google"})]})})};var oM=function(){var e=c(zL(),2),t=e[0].user;return e[1],(0,cr.jsx)("div",{className:"app",children:t?(0,cr.jsxs)("div",{className:"app__body",children:[(0,cr.jsx)(jL,{}),(0,cr.jsx)(xL,{children:(0,cr.jsx)(wL,{path:"/rooms/:roomId",element:(0,cr.jsx)(GL,{})})})]}):(0,cr.jsx)(aM,{})})};i.createRoot(document.getElementById("root")).render((0,cr.jsx)(NL,{children:(0,cr.jsx)(VL,{initialState:{user:null},reducer:iM,children:(0,cr.jsx)(oM,{})})}))}()}();
//# sourceMappingURL=main.9e1d7c96.js.map